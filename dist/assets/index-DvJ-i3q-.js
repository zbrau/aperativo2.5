(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function yb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pg={exports:{}},yc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function mN(){if(NT)return yc;NT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var u=null;if(a!==void 0&&(u=""+a),s.key!==void 0&&(u=""+s.key),"key"in s){a={};for(var d in s)d!=="key"&&(a[d]=s[d])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:u,ref:s!==void 0?s:null,props:a}}return yc.Fragment=e,yc.jsx=t,yc.jsxs=t,yc}var DT;function pN(){return DT||(DT=1,pg.exports=mN()),pg.exports}var S=pN(),gg={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT;function gN(){if(MT)return ke;MT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=T&&q[T]||q["@@iterator"],typeof q=="function"?q:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,V={};function $(q,oe,pe){this.props=q,this.context=oe,this.refs=V,this.updater=pe||N}$.prototype.isReactComponent={},$.prototype.setState=function(q,oe){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,oe,"setState")},$.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function ne(){}ne.prototype=$.prototype;function Q(q,oe,pe){this.props=q,this.context=oe,this.refs=V,this.updater=pe||N}var se=Q.prototype=new ne;se.constructor=Q,k(se,$.prototype),se.isPureReactComponent=!0;var z=Array.isArray;function J(){}var R={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function M(q,oe,pe){var ve=pe.ref;return{$$typeof:n,type:q,key:oe,ref:ve!==void 0?ve:null,props:pe}}function O(q,oe){return M(q.type,oe,q.props)}function L(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function B(q){var oe={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(pe){return oe[pe]})}var P=/\/+/g;function Ve(q,oe){return typeof q=="object"&&q!==null&&q.key!=null?B(""+q.key):oe.toString(36)}function ft(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(J,J):(q.status="pending",q.then(function(oe){q.status==="pending"&&(q.status="fulfilled",q.value=oe)},function(oe){q.status==="pending"&&(q.status="rejected",q.reason=oe)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function te(q,oe,pe,ve,De){var Ne=typeof q;(Ne==="undefined"||Ne==="boolean")&&(q=null);var Ke=!1;if(q===null)Ke=!0;else switch(Ne){case"bigint":case"string":case"number":Ke=!0;break;case"object":switch(q.$$typeof){case n:case e:Ke=!0;break;case _:return Ke=q._init,te(Ke(q._payload),oe,pe,ve,De)}}if(Ke)return De=De(q),Ke=ve===""?"."+Ve(q,0):ve,z(De)?(pe="",Ke!=null&&(pe=Ke.replace(P,"$&/")+"/"),te(De,oe,pe,"",function(Mi){return Mi})):De!=null&&(L(De)&&(De=O(De,pe+(De.key==null||q&&q.key===De.key?"":(""+De.key).replace(P,"$&/")+"/")+Ke)),oe.push(De)),1;Ke=0;var Lt=ve===""?".":ve+":";if(z(q))for(var vt=0;vt<q.length;vt++)ve=q[vt],Ne=Lt+Ve(ve,vt),Ke+=te(ve,oe,pe,Ne,De);else if(vt=w(q),typeof vt=="function")for(q=vt.call(q),vt=0;!(ve=q.next()).done;)ve=ve.value,Ne=Lt+Ve(ve,vt++),Ke+=te(ve,oe,pe,Ne,De);else if(Ne==="object"){if(typeof q.then=="function")return te(ft(q),oe,pe,ve,De);throw oe=String(q),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Ke}function me(q,oe,pe){if(q==null)return q;var ve=[],De=0;return te(q,ve,"","",function(Ne){return oe.call(pe,Ne,De++)}),ve}function Te(q){if(q._status===-1){var oe=q._result;oe=oe(),oe.then(function(pe){(q._status===0||q._status===-1)&&(q._status=1,q._result=pe)},function(pe){(q._status===0||q._status===-1)&&(q._status=2,q._result=pe)}),q._status===-1&&(q._status=0,q._result=oe)}if(q._status===1)return q._result.default;throw q._result}var qe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},st={map:me,forEach:function(q,oe,pe){me(q,function(){oe.apply(this,arguments)},pe)},count:function(q){var oe=0;return me(q,function(){oe++}),oe},toArray:function(q){return me(q,function(oe){return oe})||[]},only:function(q){if(!L(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return ke.Activity=E,ke.Children=st,ke.Component=$,ke.Fragment=t,ke.Profiler=s,ke.PureComponent=Q,ke.StrictMode=i,ke.Suspense=f,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ke.__COMPILER_RUNTIME={__proto__:null,c:function(q){return R.H.useMemoCache(q)}},ke.cache=function(q){return function(){return q.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(q,oe,pe){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ve=k({},q.props),De=q.key;if(oe!=null)for(Ne in oe.key!==void 0&&(De=""+oe.key),oe)!D.call(oe,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&oe.ref===void 0||(ve[Ne]=oe[Ne]);var Ne=arguments.length-2;if(Ne===1)ve.children=pe;else if(1<Ne){for(var Ke=Array(Ne),Lt=0;Lt<Ne;Lt++)Ke[Lt]=arguments[Lt+2];ve.children=Ke}return M(q.type,De,ve)},ke.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},ke.createElement=function(q,oe,pe){var ve,De={},Ne=null;if(oe!=null)for(ve in oe.key!==void 0&&(Ne=""+oe.key),oe)D.call(oe,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(De[ve]=oe[ve]);var Ke=arguments.length-2;if(Ke===1)De.children=pe;else if(1<Ke){for(var Lt=Array(Ke),vt=0;vt<Ke;vt++)Lt[vt]=arguments[vt+2];De.children=Lt}if(q&&q.defaultProps)for(ve in Ke=q.defaultProps,Ke)De[ve]===void 0&&(De[ve]=Ke[ve]);return M(q,Ne,De)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(q){return{$$typeof:d,render:q}},ke.isValidElement=L,ke.lazy=function(q){return{$$typeof:_,_payload:{_status:-1,_result:q},_init:Te}},ke.memo=function(q,oe){return{$$typeof:m,type:q,compare:oe===void 0?null:oe}},ke.startTransition=function(q){var oe=R.T,pe={};R.T=pe;try{var ve=q(),De=R.S;De!==null&&De(pe,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(J,qe)}catch(Ne){qe(Ne)}finally{oe!==null&&pe.types!==null&&(oe.types=pe.types),R.T=oe}},ke.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ke.use=function(q){return R.H.use(q)},ke.useActionState=function(q,oe,pe){return R.H.useActionState(q,oe,pe)},ke.useCallback=function(q,oe){return R.H.useCallback(q,oe)},ke.useContext=function(q){return R.H.useContext(q)},ke.useDebugValue=function(){},ke.useDeferredValue=function(q,oe){return R.H.useDeferredValue(q,oe)},ke.useEffect=function(q,oe){return R.H.useEffect(q,oe)},ke.useEffectEvent=function(q){return R.H.useEffectEvent(q)},ke.useId=function(){return R.H.useId()},ke.useImperativeHandle=function(q,oe,pe){return R.H.useImperativeHandle(q,oe,pe)},ke.useInsertionEffect=function(q,oe){return R.H.useInsertionEffect(q,oe)},ke.useLayoutEffect=function(q,oe){return R.H.useLayoutEffect(q,oe)},ke.useMemo=function(q,oe){return R.H.useMemo(q,oe)},ke.useOptimistic=function(q,oe){return R.H.useOptimistic(q,oe)},ke.useReducer=function(q,oe,pe){return R.H.useReducer(q,oe,pe)},ke.useRef=function(q){return R.H.useRef(q)},ke.useState=function(q){return R.H.useState(q)},ke.useSyncExternalStore=function(q,oe,pe){return R.H.useSyncExternalStore(q,oe,pe)},ke.useTransition=function(){return R.H.useTransition()},ke.version="19.2.4",ke}var PT;function Py(){return PT||(PT=1,gg.exports=gN()),gg.exports}var xe=Py();const yN=yb(xe);var yg={exports:{}},_c={},_g={exports:{}},vg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function _N(){return VT||(VT=1,(function(n){function e(te,me){var Te=te.length;te.push(me);e:for(;0<Te;){var qe=Te-1>>>1,st=te[qe];if(0<s(st,me))te[qe]=me,te[Te]=st,Te=qe;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var me=te[0],Te=te.pop();if(Te!==me){te[0]=Te;e:for(var qe=0,st=te.length,q=st>>>1;qe<q;){var oe=2*(qe+1)-1,pe=te[oe],ve=oe+1,De=te[ve];if(0>s(pe,Te))ve<st&&0>s(De,pe)?(te[qe]=De,te[ve]=Te,qe=ve):(te[qe]=pe,te[oe]=Te,qe=oe);else if(ve<st&&0>s(De,Te))te[qe]=De,te[ve]=Te,qe=ve;else break e}}return me}function s(te,me){var Te=te.sortIndex-me.sortIndex;return Te!==0?Te:te.id-me.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],_=1,E=null,T=3,w=!1,N=!1,k=!1,V=!1,$=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function se(te){for(var me=t(m);me!==null;){if(me.callback===null)i(m);else if(me.startTime<=te)i(m),me.sortIndex=me.expirationTime,e(f,me);else break;me=t(m)}}function z(te){if(k=!1,se(te),!N)if(t(f)!==null)N=!0,J||(J=!0,B());else{var me=t(m);me!==null&&ft(z,me.startTime-te)}}var J=!1,R=-1,D=5,M=-1;function O(){return V?!0:!(n.unstable_now()-M<D)}function L(){if(V=!1,J){var te=n.unstable_now();M=te;var me=!0;try{e:{N=!1,k&&(k=!1,ne(R),R=-1),w=!0;var Te=T;try{t:{for(se(te),E=t(f);E!==null&&!(E.expirationTime>te&&O());){var qe=E.callback;if(typeof qe=="function"){E.callback=null,T=E.priorityLevel;var st=qe(E.expirationTime<=te);if(te=n.unstable_now(),typeof st=="function"){E.callback=st,se(te),me=!0;break t}E===t(f)&&i(f),se(te)}else i(f);E=t(f)}if(E!==null)me=!0;else{var q=t(m);q!==null&&ft(z,q.startTime-te),me=!1}}break e}finally{E=null,T=Te,w=!1}me=void 0}}finally{me?B():J=!1}}}var B;if(typeof Q=="function")B=function(){Q(L)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ve=P.port2;P.port1.onmessage=L,B=function(){Ve.postMessage(null)}}else B=function(){$(L,0)};function ft(te,me){R=$(function(){te(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(te){switch(T){case 1:case 2:case 3:var me=3;break;default:me=T}var Te=T;T=me;try{return te()}finally{T=Te}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(te,me){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Te=T;T=te;try{return me()}finally{T=Te}},n.unstable_scheduleCallback=function(te,me,Te){var qe=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?qe+Te:qe):Te=qe,te){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=Te+st,te={id:_++,callback:me,priorityLevel:te,startTime:Te,expirationTime:st,sortIndex:-1},Te>qe?(te.sortIndex=Te,e(m,te),t(f)===null&&te===t(m)&&(k?(ne(R),R=-1):k=!0,ft(z,Te-qe))):(te.sortIndex=st,e(f,te),N||w||(N=!0,J||(J=!0,B()))),te},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(te){var me=T;return function(){var Te=T;T=me;try{return te.apply(this,arguments)}finally{T=Te}}}})(vg)),vg}var kT;function vN(){return kT||(kT=1,_g.exports=_N()),_g.exports}var Eg={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT;function EN(){if(UT)return Tn;UT=1;var n=Py();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,m,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:f,containerInfo:m,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Tn.createPortal=function(f,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(f,m,null,_)},Tn.flushSync=function(f){var m=u.T,_=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=m,i.p=_,i.d.f()}},Tn.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(f,m))},Tn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Tn.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var _=m.as,E=d(_,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?i.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:w}):_==="script"&&i.d.X(f,{crossOrigin:E,integrity:T,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Tn.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=d(m.as,m.crossOrigin);i.d.M(f,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(f)},Tn.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,E=d(_,m.crossOrigin);i.d.L(f,_,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Tn.preloadModule=function(f,m){if(typeof f=="string")if(m){var _=d(m.as,m.crossOrigin);i.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(f)},Tn.requestFormReset=function(f){i.d.r(f)},Tn.unstable_batchedUpdates=function(f,m){return f(m)},Tn.useFormState=function(f,m,_){return u.H.useFormState(f,m,_)},Tn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Tn.version="19.2.4",Tn}var LT;function TN(){if(LT)return Eg.exports;LT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Eg.exports=EN(),Eg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT;function SN(){if(OT)return _c;OT=1;var n=vN(),e=Py(),t=TN();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,l=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(l=o.return),r=o.return;while(r)}return o.tag===3?l:null}function u(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function f(r){if(a(r)!==r)throw Error(i(188))}function m(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var l=r,c=o;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return f(y),r;if(v===c)return f(y),o;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var x=!1,I=y.child;I;){if(I===l){x=!0,l=y,c=v;break}if(I===c){x=!0,c=y,l=v;break}I=I.sibling}if(!x){for(I=v.child;I;){if(I===l){x=!0,l=v,c=y;break}if(I===c){x=!0,c=v,l=y;break}I=I.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:o}function _(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=_(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=L&&r[L]||r["@@iterator"],typeof r=="function"?r:null)}var P=Symbol.for("react.client.reference");function Ve(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===P?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case $:return"Profiler";case V:return"StrictMode";case z:return"Suspense";case J:return"SuspenseList";case M:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case Q:return r.displayName||"Context";case ne:return(r._context.displayName||"Context")+".Consumer";case se:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case R:return o=r.displayName||null,o!==null?o:Ve(r.type)||"Memo";case D:o=r._payload,r=r._init;try{return Ve(r(o))}catch{}}return null}var ft=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},qe=[],st=-1;function q(r){return{current:r}}function oe(r){0>st||(r.current=qe[st],qe[st]=null,st--)}function pe(r,o){st++,qe[st]=r.current,r.current=o}var ve=q(null),De=q(null),Ne=q(null),Ke=q(null);function Lt(r,o){switch(pe(Ne,o),pe(De,r),pe(ve,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?ZE(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=ZE(o),r=eT(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}oe(ve),pe(ve,r)}function vt(){oe(ve),oe(De),oe(Ne)}function Mi(r){r.memoizedState!==null&&pe(Ke,r);var o=ve.current,l=eT(o,r.type);o!==l&&(pe(De,r),pe(ve,l))}function Pi(r){De.current===r&&(oe(ve),oe(De)),Ke.current===r&&(oe(Ke),hc._currentValue=Te)}var Vi,ls;function Jn(r){if(Vi===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Vi=o&&o[1]||"",ls=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vi+r+ls}var yo=!1;function ki(r,o){if(!r||yo)return"";yo=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ee){var X=ee}Reflect.construct(r,[],ae)}else{try{ae.call()}catch(ee){X=ee}r.call(ae.prototype)}}else{try{throw Error()}catch(ee){X=ee}(ae=r())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),x=v[0],I=v[1];if(x&&I){var U=x.split(`
`),j=I.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<j.length&&!j[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===j.length)for(c=U.length-1,y=j.length-1;1<=c&&0<=y&&U[c]!==j[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==j[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==j[y]){var ie=`
`+U[c].replace(" at new "," at ");return r.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",r.displayName)),ie}while(1<=c&&0<=y);break}}}finally{yo=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Jn(l):""}function Ui(r,o){switch(r.tag){case 26:case 27:case 5:return Jn(r.type);case 16:return Jn("Lazy");case 13:return r.child!==o&&o!==null?Jn("Suspense Fallback"):Jn("Suspense");case 19:return Jn("SuspenseList");case 0:case 15:return ki(r.type,!1);case 11:return ki(r.type.render,!1);case 1:return ki(r.type,!0);case 31:return Jn("Activity");default:return""}}function xr(r){try{var o="",l=null;do o+=Ui(r,l),l=r,r=r.return;while(r);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var bt=Object.prototype.hasOwnProperty,Mt=n.unstable_scheduleCallback,fi=n.unstable_cancelCallback,Ca=n.unstable_shouldYield,Li=n.unstable_requestPaint,sn=n.unstable_now,Oi=n.unstable_getCurrentPriorityLevel,br=n.unstable_ImmediatePriority,wr=n.unstable_UserBlockingPriority,Fi=n.unstable_NormalPriority,_o=n.unstable_LowPriority,vo=n.unstable_IdlePriority,us=n.log,Eo=n.unstable_setDisableYieldValue,Un=null,ht=null;function dn(r){if(typeof us=="function"&&Eo(r),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(Un,r)}catch{}}var nt=Math.clz32?Math.clz32:Ra,To=Math.log,cs=Math.LN2;function Ra(r){return r>>>=0,r===0?32:31-(To(r)/cs|0)|0}var jn=256,Ir=262144,Pt=4194304;function hi(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function mi(r,o,l){var c=r.pendingLanes;if(c===0)return 0;var y=0,v=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var I=c&134217727;return I!==0?(c=I&~v,c!==0?y=hi(c):(x&=I,x!==0?y=hi(x):l||(l=I&~r,l!==0&&(y=hi(l))))):(I=c&~v,I!==0?y=hi(I):x!==0?y=hi(x):l||(l=c&~r,l!==0&&(y=hi(l)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,l=o&-o,v>=l||v===32&&(l&4194048)!==0)?o:y}function Qn(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Na(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function So(){var r=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),r}function pi(r){for(var o=[],l=0;31>l;l++)o.push(r);return o}function Cr(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function vu(r,o,l,c,y,v){var x=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var I=r.entanglements,U=r.expirationTimes,j=r.hiddenUpdates;for(l=x&~l;0<l;){var ie=31-nt(l),ae=1<<ie;I[ie]=0,U[ie]=-1;var X=j[ie];if(X!==null)for(j[ie]=null,ie=0;ie<X.length;ie++){var ee=X[ie];ee!==null&&(ee.lane&=-536870913)}l&=~ae}c!==0&&Rr(r,c,0),v!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=v&~(x&~o))}function Rr(r,o,l){r.pendingLanes|=o,r.suspendedLanes&=~o;var c=31-nt(o);r.entangledLanes|=o,r.entanglements[c]=r.entanglements[c]|1073741824|l&261930}function Ao(r,o){var l=r.entangledLanes|=o;for(r=r.entanglements;l;){var c=31-nt(l),y=1<<c;y&o|r[c]&o&&(r[c]|=o),l&=~y}}function xo(r,o){var l=o&-o;return l=(l&42)!==0?1:Nr(l),(l&(r.suspendedLanes|o))!==0?0:l}function Nr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function qi(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Da(){var r=me.p;return r!==0?r:(r=window.event,r===void 0?32:AT(r.type))}function Xn(r,o){var l=me.p;try{return me.p=r,o()}finally{me.p=l}}var ue=Math.random().toString(36).slice(2),ge="__reactFiber$"+ue,we="__reactProps$"+ue,de="__reactContainer$"+ue,Kt="__reactEvents$"+ue,Wn="__reactListeners$"+ue,Zn="__reactHandles$"+ue,ds="__reactResources$"+ue,ei="__reactMarker$"+ue;function Dr(r){delete r[ge],delete r[we],delete r[Kt],delete r[Wn],delete r[Zn]}function gi(r){var o=r[ge];if(o)return o;for(var l=r.parentNode;l;){if(o=l[de]||l[ge]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(r=aT(r);r!==null;){if(l=r[ge])return l;r=aT(r)}return o}r=l,l=r.parentNode}return null}function Ln(r){if(r=r[ge]||r[de]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function $t(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function En(r){var o=r[ds];return o||(o=r[ds]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ot(r){r[ei]=!0}var Eu=new Set,Tu={};function rr(r,o){sr(r,o),sr(r+"Capture",o)}function sr(r,o){for(Tu[r]=o,r=0;r<o.length;r++)Eu.add(o[r])}var Su=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Au={},xu={};function xd(r){return bt.call(xu,r)?!0:bt.call(Au,r)?!1:Su.test(r)?xu[r]=!0:(Au[r]=!0,!1)}function Ma(r,o,l){if(xd(o))if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+l)}}function ti(r,o,l){if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+l)}}function Yt(r,o,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(o,l,""+c)}}function on(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function fs(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function bu(r,o,l){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return y.call(this)},set:function(x){l=""+x,v.call(this,x)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function at(r){if(!r._valueTracker){var o=fs(r)?"checked":"value";r._valueTracker=bu(r,o,""+r[o])}}function bo(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var l=o.getValue(),c="";return r&&(c=fs(r)?r.checked?"true":"false":r.value),r=c,r!==l?(o.setValue(r),!0):!1}function or(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var wo=/[\n"\\]/g;function On(r){return r.replace(wo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Pa(r,o,l,c,y,v,x,I){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),o!=null?x==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+on(o)):r.value!==""+on(o)&&(r.value=""+on(o)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),o!=null?wu(r,x,on(o)):l!=null?wu(r,x,on(l)):c!=null&&r.removeAttribute("value"),y==null&&v!=null&&(r.defaultChecked=!!v),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+on(I):r.removeAttribute("name")}function bd(r,o,l,c,y,v,x,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),o!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){at(r);return}l=l!=null?""+on(l):"",o=o!=null?""+on(o):l,I||o===r.value||(r.value=o),r.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=I?r.checked:!!c,r.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x),at(r)}function wu(r,o,l){o==="number"&&or(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function hs(r,o,l,c){if(r=r.options,o){o={};for(var y=0;y<l.length;y++)o["$"+l[y]]=!0;for(l=0;l<r.length;l++)y=o.hasOwnProperty("$"+r[l].value),r[l].selected!==y&&(r[l].selected=y),y&&c&&(r[l].defaultSelected=!0)}else{for(l=""+on(l),o=null,y=0;y<r.length;y++){if(r[y].value===l){r[y].selected=!0,c&&(r[y].defaultSelected=!0);return}o!==null||r[y].disabled||(o=r[y])}o!==null&&(o.selected=!0)}}function wd(r,o,l){if(o!=null&&(o=""+on(o),o!==r.value&&(r.value=o),l==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=l!=null?""+on(l):""}function ms(r,o,l,c){if(o==null){if(c!=null){if(l!=null)throw Error(i(92));if(ft(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),o=l}l=on(o),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c),at(r)}function Fn(r,o){if(o){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=o;return}}r.textContent=o}var Id=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Iu(r,o,l){var c=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":c?r.setProperty(o,l):typeof l!="number"||l===0||Id.has(o)?o==="float"?r.cssFloat=l:r[o]=(""+l).trim():r[o]=l+"px"}function Cu(r,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&l[y]!==c&&Iu(r,y,c)}else for(var v in o)o.hasOwnProperty(v)&&Iu(r,v,o[v])}function Va(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ps=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ka(r){return ps.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Bi(){}var Ru=null;function yi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var gs=null,ar=null;function Io(r){var o=Ln(r);if(o&&(r=o.stateNode)){var l=r[we]||null;e:switch(r=o.stateNode,o.type){case"input":if(Pa(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+On(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var c=l[o];if(c!==r&&c.form===r.form){var y=c[we]||null;if(!y)throw Error(i(90));Pa(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<l.length;o++)c=l[o],c.form===r.form&&bo(c)}break e;case"textarea":wd(r,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&hs(r,!!l.multiple,o,!1)}}}var Ua=!1;function ys(r,o,l){if(Ua)return r(o,l);Ua=!0;try{var c=r(o);return c}finally{if(Ua=!1,(gs!==null||ar!==null)&&(Sf(),gs&&(o=gs,r=ar,ar=gs=null,Io(o),r)))for(o=0;o<r.length;o++)Io(r[o])}}function Gi(r,o){var l=r.stateNode;if(l===null)return null;var c=l[we]||null;if(c===null)return null;l=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Co=!1;if(_i)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){Co=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{Co=!1}var lr=null,Nu=null,Ro=null;function Du(){if(Ro)return Ro;var r,o=Nu,l=o.length,c,y="value"in lr?lr.value:lr.textContent,v=y.length;for(r=0;r<l&&o[r]===y[r];r++);var x=l-r;for(c=1;c<=x&&o[l-c]===y[v-c];c++);return Ro=y.slice(r,1<c?1-c:void 0)}function No(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Mr(){return!0}function zi(){return!1}function fn(r){function o(l,c,y,v,x){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=x,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(l=r[I],this[I]=l?l(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Mr:zi,this.isPropagationStopped=zi,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),o}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=fn(Pr),_s=E({},Pr,{view:0,detail:0}),Mu=fn(_s),vs,La,cr,Oa=E({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==cr&&(cr&&r.type==="mousemove"?(vs=r.screenX-cr.screenX,La=r.screenY-cr.screenY):La=vs=0,cr=r),vs)},movementY:function(r){return"movementY"in r?r.movementY:La}}),Pu=fn(Oa),Do=E({},Oa,{dataTransfer:0}),Rd=fn(Do),Nd=E({},_s,{relatedTarget:0}),Mo=fn(Nd),Vu=E({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Dd=fn(Vu),Fa=E({},Pr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Md=fn(Fa),Pd=E({},Pr,{data:0}),dr=fn(Pd),Vd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ud={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ld(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Ud[r])?!!o[r]:!1}function Es(){return Ld}var Cn=E({},_s,{key:function(r){if(r.key){var o=Vd[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=No(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?kd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(r){return r.type==="keypress"?No(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?No(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Od=fn(Cn),Fd=E({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vr=fn(Fd),g=E({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),A=fn(g),b=E({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=fn(b),K=E({},Oa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=fn(K),fe=E({},Pr,{newState:0,oldState:0}),Ue=fn(fe),Ft=[9,13,27,32],it=_i&&"CompositionEvent"in window,wt=null;_i&&"documentMode"in document&&(wt=document.documentMode);var vi=_i&&"TextEvent"in window&&!wt,fr=_i&&(!it||wt&&8<wt&&11>=wt),Hi=" ",Ki=!1;function Po(r,o){switch(r){case"keyup":return Ft.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qa(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ba=!1;function OR(r,o){switch(r){case"compositionend":return qa(o);case"keypress":return o.which!==32?null:(Ki=!0,Hi);case"textInput":return r=o.data,r===Hi&&Ki?null:r;default:return null}}function FR(r,o){if(Ba)return r==="compositionend"||!it&&Po(r,o)?(r=Du(),Ro=Nu=lr=null,Ba=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return fr&&o.locale!=="ko"?null:o.data;default:return null}}var qR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c_(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!qR[r.type]:o==="textarea"}function d_(r,o,l,c){gs?ar?ar.push(c):ar=[c]:gs=c,o=Rf(o,"onChange"),0<o.length&&(l=new ur("onChange","change",null,l,c),r.push({event:l,listeners:o}))}var ku=null,Uu=null;function BR(r){YE(r,0)}function qd(r){var o=$t(r);if(bo(o))return r}function f_(r,o){if(r==="change")return o}var h_=!1;if(_i){var Sm;if(_i){var Am="oninput"in document;if(!Am){var m_=document.createElement("div");m_.setAttribute("oninput","return;"),Am=typeof m_.oninput=="function"}Sm=Am}else Sm=!1;h_=Sm&&(!document.documentMode||9<document.documentMode)}function p_(){ku&&(ku.detachEvent("onpropertychange",g_),Uu=ku=null)}function g_(r){if(r.propertyName==="value"&&qd(Uu)){var o=[];d_(o,Uu,r,yi(r)),ys(BR,o)}}function GR(r,o,l){r==="focusin"?(p_(),ku=o,Uu=l,ku.attachEvent("onpropertychange",g_)):r==="focusout"&&p_()}function zR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return qd(Uu)}function HR(r,o){if(r==="click")return qd(o)}function KR(r,o){if(r==="input"||r==="change")return qd(o)}function $R(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var ni=typeof Object.is=="function"?Object.is:$R;function Lu(r,o){if(ni(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var l=Object.keys(r),c=Object.keys(o);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!bt.call(o,y)||!ni(r[y],o[y]))return!1}return!0}function y_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function __(r,o){var l=y_(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=o&&c>=o)return{node:l,offset:o-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=y_(l)}}function v_(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?v_(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function E_(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=or(r.document);o instanceof r.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)r=o.contentWindow;else break;o=or(r.document)}return o}function xm(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var YR=_i&&"documentMode"in document&&11>=document.documentMode,Ga=null,bm=null,Ou=null,wm=!1;function T_(r,o,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;wm||Ga==null||Ga!==or(c)||(c=Ga,"selectionStart"in c&&xm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ou&&Lu(Ou,c)||(Ou=c,c=Rf(bm,"onSelect"),0<c.length&&(o=new ur("onSelect","select",null,o,l),r.push({event:o,listeners:c}),o.target=Ga)))}function Vo(r,o){var l={};return l[r.toLowerCase()]=o.toLowerCase(),l["Webkit"+r]="webkit"+o,l["Moz"+r]="moz"+o,l}var za={animationend:Vo("Animation","AnimationEnd"),animationiteration:Vo("Animation","AnimationIteration"),animationstart:Vo("Animation","AnimationStart"),transitionrun:Vo("Transition","TransitionRun"),transitionstart:Vo("Transition","TransitionStart"),transitioncancel:Vo("Transition","TransitionCancel"),transitionend:Vo("Transition","TransitionEnd")},Im={},S_={};_i&&(S_=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function ko(r){if(Im[r])return Im[r];if(!za[r])return r;var o=za[r],l;for(l in o)if(o.hasOwnProperty(l)&&l in S_)return Im[r]=o[l];return r}var A_=ko("animationend"),x_=ko("animationiteration"),b_=ko("animationstart"),JR=ko("transitionrun"),jR=ko("transitionstart"),QR=ko("transitioncancel"),w_=ko("transitionend"),I_=new Map,Cm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cm.push("scrollEnd");function $i(r,o){I_.set(r,o),rr(o,[r])}var Bd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Ei=[],Ha=0,Rm=0;function Gd(){for(var r=Ha,o=Rm=Ha=0;o<r;){var l=Ei[o];Ei[o++]=null;var c=Ei[o];Ei[o++]=null;var y=Ei[o];Ei[o++]=null;var v=Ei[o];if(Ei[o++]=null,c!==null&&y!==null){var x=c.pending;x===null?y.next=y:(y.next=x.next,x.next=y),c.pending=y}v!==0&&C_(l,y,v)}}function zd(r,o,l,c){Ei[Ha++]=r,Ei[Ha++]=o,Ei[Ha++]=l,Ei[Ha++]=c,Rm|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Nm(r,o,l,c){return zd(r,o,l,c),Hd(r)}function Uo(r,o){return zd(r,null,null,o),Hd(r)}function C_(r,o,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=r.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(y=!0)),r=v,v=v.return;return r.tag===3?(v=r.stateNode,y&&o!==null&&(y=31-nt(l),r=v.hiddenUpdates,c=r[y],c===null?r[y]=[o]:c.push(o),o.lane=l|536870912),v):null}function Hd(r){if(50<oc)throw oc=0,Fp=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Ka={};function XR(r,o,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(r,o,l,c){return new XR(r,o,l,c)}function Dm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function kr(r,o){var l=r.alternate;return l===null?(l=ii(r.tag,o,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=o,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,o=r.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function R_(r,o){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,o=l.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Kd(r,o,l,c,y,v){var x=0;if(c=r,typeof r=="function")Dm(r)&&(x=1);else if(typeof r=="string")x=nN(r,l,ve.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case M:return r=ii(31,l,o,y),r.elementType=M,r.lanes=v,r;case k:return Lo(l.children,y,v,o);case V:x=8,y|=24;break;case $:return r=ii(12,l,o,y|2),r.elementType=$,r.lanes=v,r;case z:return r=ii(13,l,o,y),r.elementType=z,r.lanes=v,r;case J:return r=ii(19,l,o,y),r.elementType=J,r.lanes=v,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Q:x=10;break e;case ne:x=9;break e;case se:x=11;break e;case R:x=14;break e;case D:x=16,c=null;break e}x=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return o=ii(x,l,o,y),o.elementType=r,o.type=c,o.lanes=v,o}function Lo(r,o,l,c){return r=ii(7,r,c,o),r.lanes=l,r}function Mm(r,o,l){return r=ii(6,r,null,o),r.lanes=l,r}function N_(r){var o=ii(18,null,null,0);return o.stateNode=r,o}function Pm(r,o,l){return o=ii(4,r.children!==null?r.children:[],r.key,o),o.lanes=l,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var D_=new WeakMap;function Ti(r,o){if(typeof r=="object"&&r!==null){var l=D_.get(r);return l!==void 0?l:(o={value:r,source:o,stack:xr(o)},D_.set(r,o),o)}return{value:r,source:o,stack:xr(o)}}var $a=[],Ya=0,$d=null,Fu=0,Si=[],Ai=0,Ts=null,hr=1,mr="";function Ur(r,o){$a[Ya++]=Fu,$a[Ya++]=$d,$d=r,Fu=o}function M_(r,o,l){Si[Ai++]=hr,Si[Ai++]=mr,Si[Ai++]=Ts,Ts=r;var c=hr;r=mr;var y=32-nt(c)-1;c&=~(1<<y),l+=1;var v=32-nt(o)+y;if(30<v){var x=y-y%5;v=(c&(1<<x)-1).toString(32),c>>=x,y-=x,hr=1<<32-nt(o)+y|l<<y|c,mr=v+r}else hr=1<<v|l<<y|c,mr=r}function Vm(r){r.return!==null&&(Ur(r,1),M_(r,1,0))}function km(r){for(;r===$d;)$d=$a[--Ya],$a[Ya]=null,Fu=$a[--Ya],$a[Ya]=null;for(;r===Ts;)Ts=Si[--Ai],Si[Ai]=null,mr=Si[--Ai],Si[Ai]=null,hr=Si[--Ai],Si[Ai]=null}function P_(r,o){Si[Ai++]=hr,Si[Ai++]=mr,Si[Ai++]=Ts,hr=o.id,mr=o.overflow,Ts=r}var hn=null,St=null,je=!1,Ss=null,xi=!1,Um=Error(i(519));function As(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qu(Ti(o,r)),Um}function V_(r){var o=r.stateNode,l=r.type,c=r.memoizedProps;switch(o[ge]=r,o[we]=c,l){case"dialog":ze("cancel",o),ze("close",o);break;case"iframe":case"object":case"embed":ze("load",o);break;case"video":case"audio":for(l=0;l<lc.length;l++)ze(lc[l],o);break;case"source":ze("error",o);break;case"img":case"image":case"link":ze("error",o),ze("load",o);break;case"details":ze("toggle",o);break;case"input":ze("invalid",o),bd(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ze("invalid",o);break;case"textarea":ze("invalid",o),ms(o,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||c.suppressHydrationWarning===!0||XE(o.textContent,l)?(c.popover!=null&&(ze("beforetoggle",o),ze("toggle",o)),c.onScroll!=null&&ze("scroll",o),c.onScrollEnd!=null&&ze("scrollend",o),c.onClick!=null&&(o.onclick=Bi),o=!0):o=!1,o||As(r,!0)}function k_(r){for(hn=r.return;hn;)switch(hn.tag){case 5:case 31:case 13:xi=!1;return;case 27:case 3:xi=!0;return;default:hn=hn.return}}function Ja(r){if(r!==hn)return!1;if(!je)return k_(r),je=!0,!1;var o=r.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||eg(r.type,r.memoizedProps)),l=!l),l&&St&&As(r),k_(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));St=oT(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));St=oT(r)}else o===27?(o=St,Ls(r.type)?(r=sg,sg=null,St=r):St=o):St=hn?wi(r.stateNode.nextSibling):null;return!0}function Oo(){St=hn=null,je=!1}function Lm(){var r=Ss;return r!==null&&(zn===null?zn=r:zn.push.apply(zn,r),Ss=null),r}function qu(r){Ss===null?Ss=[r]:Ss.push(r)}var Om=q(null),Fo=null,Lr=null;function xs(r,o,l){pe(Om,o._currentValue),o._currentValue=l}function Or(r){r._currentValue=Om.current,oe(Om)}function Fm(r,o,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),r===l)break;r=r.return}}function qm(r,o,l,c){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var v=y.dependencies;if(v!==null){var x=y.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=y;for(var U=0;U<o.length;U++)if(I.context===o[U]){v.lanes|=l,I=v.alternate,I!==null&&(I.lanes|=l),Fm(v.return,l,r),c||(x=null);break e}v=I.next}}else if(y.tag===18){if(x=y.return,x===null)throw Error(i(341));x.lanes|=l,v=x.alternate,v!==null&&(v.lanes|=l),Fm(x,l,r),x=null}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===r){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}}function ja(r,o,l,c){r=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var x=y.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var I=y.type;ni(y.pendingProps.value,x.value)||(r!==null?r.push(I):r=[I])}}else if(y===Ke.current){if(x=y.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(hc):r=[hc])}y=y.return}r!==null&&qm(o,r,l,c),o.flags|=262144}function Yd(r){for(r=r.firstContext;r!==null;){if(!ni(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function qo(r){Fo=r,Lr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function mn(r){return U_(Fo,r)}function Jd(r,o){return Fo===null&&qo(r),U_(r,o)}function U_(r,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Lr===null){if(r===null)throw Error(i(308));Lr=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Lr=Lr.next=o;return l}var WR=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){o.aborted=!0,r.forEach(function(l){return l()})}},ZR=n.unstable_scheduleCallback,e1=n.unstable_NormalPriority,Jt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bm(){return{controller:new WR,data:new Map,refCount:0}}function Bu(r){r.refCount--,r.refCount===0&&ZR(e1,function(){r.controller.abort()})}var Gu=null,Gm=0,Qa=0,Xa=null;function t1(r,o){if(Gu===null){var l=Gu=[];Gm=0,Qa=Kp(),Xa={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Gm++,o.then(L_,L_),o}function L_(){if(--Gm===0&&Gu!==null){Xa!==null&&(Xa.status="fulfilled");var r=Gu;Gu=null,Qa=0,Xa=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function n1(r,o){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return r.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<l.length;y++)(0,l[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var O_=te.S;te.S=function(r,o){TE=sn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&t1(r,o),O_!==null&&O_(r,o)};var Bo=q(null);function zm(){var r=Bo.current;return r!==null?r:_t.pooledCache}function jd(r,o){o===null?pe(Bo,Bo.current):pe(Bo,o.pool)}function F_(){var r=zm();return r===null?null:{parent:Jt._currentValue,pool:r}}var Wa=Error(i(460)),Hm=Error(i(474)),Qd=Error(i(542)),Xd={then:function(){}};function q_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function B_(r,o,l){switch(l=r[l],l===void 0?r.push(o):l!==o&&(o.then(Bi,Bi),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,z_(r),r;default:if(typeof o.status=="string")o.then(Bi,Bi);else{if(r=_t,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,z_(r),r}throw zo=o,Wa}}function Go(r){try{var o=r._init;return o(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(zo=l,Wa):l}}var zo=null;function G_(){if(zo===null)throw Error(i(459));var r=zo;return zo=null,r}function z_(r){if(r===Wa||r===Qd)throw Error(i(483))}var Za=null,zu=0;function Wd(r){var o=zu;return zu+=1,Za===null&&(Za=[]),B_(Za,r,o)}function Hu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Zd(r,o){throw o.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function H_(r){function o(G,F){if(r){var Y=G.deletions;Y===null?(G.deletions=[F],G.flags|=16):Y.push(F)}}function l(G,F){if(!r)return null;for(;F!==null;)o(G,F),F=F.sibling;return null}function c(G){for(var F=new Map;G!==null;)G.key!==null?F.set(G.key,G):F.set(G.index,G),G=G.sibling;return F}function y(G,F){return G=kr(G,F),G.index=0,G.sibling=null,G}function v(G,F,Y){return G.index=Y,r?(Y=G.alternate,Y!==null?(Y=Y.index,Y<F?(G.flags|=67108866,F):Y):(G.flags|=67108866,F)):(G.flags|=1048576,F)}function x(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function I(G,F,Y,re){return F===null||F.tag!==6?(F=Mm(Y,G.mode,re),F.return=G,F):(F=y(F,Y),F.return=G,F)}function U(G,F,Y,re){var Ce=Y.type;return Ce===k?ie(G,F,Y.props.children,re,Y.key):F!==null&&(F.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===D&&Go(Ce)===F.type)?(F=y(F,Y.props),Hu(F,Y),F.return=G,F):(F=Kd(Y.type,Y.key,Y.props,null,G.mode,re),Hu(F,Y),F.return=G,F)}function j(G,F,Y,re){return F===null||F.tag!==4||F.stateNode.containerInfo!==Y.containerInfo||F.stateNode.implementation!==Y.implementation?(F=Pm(Y,G.mode,re),F.return=G,F):(F=y(F,Y.children||[]),F.return=G,F)}function ie(G,F,Y,re,Ce){return F===null||F.tag!==7?(F=Lo(Y,G.mode,re,Ce),F.return=G,F):(F=y(F,Y),F.return=G,F)}function ae(G,F,Y){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Mm(""+F,G.mode,Y),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return Y=Kd(F.type,F.key,F.props,null,G.mode,Y),Hu(Y,F),Y.return=G,Y;case N:return F=Pm(F,G.mode,Y),F.return=G,F;case D:return F=Go(F),ae(G,F,Y)}if(ft(F)||B(F))return F=Lo(F,G.mode,Y,null),F.return=G,F;if(typeof F.then=="function")return ae(G,Wd(F),Y);if(F.$$typeof===Q)return ae(G,Jd(G,F),Y);Zd(G,F)}return null}function X(G,F,Y,re){var Ce=F!==null?F.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ce!==null?null:I(G,F,""+Y,re);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===Ce?U(G,F,Y,re):null;case N:return Y.key===Ce?j(G,F,Y,re):null;case D:return Y=Go(Y),X(G,F,Y,re)}if(ft(Y)||B(Y))return Ce!==null?null:ie(G,F,Y,re,null);if(typeof Y.then=="function")return X(G,F,Wd(Y),re);if(Y.$$typeof===Q)return X(G,F,Jd(G,Y),re);Zd(G,Y)}return null}function ee(G,F,Y,re,Ce){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return G=G.get(Y)||null,I(F,G,""+re,Ce);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return G=G.get(re.key===null?Y:re.key)||null,U(F,G,re,Ce);case N:return G=G.get(re.key===null?Y:re.key)||null,j(F,G,re,Ce);case D:return re=Go(re),ee(G,F,Y,re,Ce)}if(ft(re)||B(re))return G=G.get(Y)||null,ie(F,G,re,Ce,null);if(typeof re.then=="function")return ee(G,F,Y,Wd(re),Ce);if(re.$$typeof===Q)return ee(G,F,Y,Jd(F,re),Ce);Zd(F,re)}return null}function Se(G,F,Y,re){for(var Ce=null,We=null,be=F,Fe=F=0,Ye=null;be!==null&&Fe<Y.length;Fe++){be.index>Fe?(Ye=be,be=null):Ye=be.sibling;var Ze=X(G,be,Y[Fe],re);if(Ze===null){be===null&&(be=Ye);break}r&&be&&Ze.alternate===null&&o(G,be),F=v(Ze,F,Fe),We===null?Ce=Ze:We.sibling=Ze,We=Ze,be=Ye}if(Fe===Y.length)return l(G,be),je&&Ur(G,Fe),Ce;if(be===null){for(;Fe<Y.length;Fe++)be=ae(G,Y[Fe],re),be!==null&&(F=v(be,F,Fe),We===null?Ce=be:We.sibling=be,We=be);return je&&Ur(G,Fe),Ce}for(be=c(be);Fe<Y.length;Fe++)Ye=ee(be,G,Fe,Y[Fe],re),Ye!==null&&(r&&Ye.alternate!==null&&be.delete(Ye.key===null?Fe:Ye.key),F=v(Ye,F,Fe),We===null?Ce=Ye:We.sibling=Ye,We=Ye);return r&&be.forEach(function(Gs){return o(G,Gs)}),je&&Ur(G,Fe),Ce}function Re(G,F,Y,re){if(Y==null)throw Error(i(151));for(var Ce=null,We=null,be=F,Fe=F=0,Ye=null,Ze=Y.next();be!==null&&!Ze.done;Fe++,Ze=Y.next()){be.index>Fe?(Ye=be,be=null):Ye=be.sibling;var Gs=X(G,be,Ze.value,re);if(Gs===null){be===null&&(be=Ye);break}r&&be&&Gs.alternate===null&&o(G,be),F=v(Gs,F,Fe),We===null?Ce=Gs:We.sibling=Gs,We=Gs,be=Ye}if(Ze.done)return l(G,be),je&&Ur(G,Fe),Ce;if(be===null){for(;!Ze.done;Fe++,Ze=Y.next())Ze=ae(G,Ze.value,re),Ze!==null&&(F=v(Ze,F,Fe),We===null?Ce=Ze:We.sibling=Ze,We=Ze);return je&&Ur(G,Fe),Ce}for(be=c(be);!Ze.done;Fe++,Ze=Y.next())Ze=ee(be,G,Fe,Ze.value,re),Ze!==null&&(r&&Ze.alternate!==null&&be.delete(Ze.key===null?Fe:Ze.key),F=v(Ze,F,Fe),We===null?Ce=Ze:We.sibling=Ze,We=Ze);return r&&be.forEach(function(hN){return o(G,hN)}),je&&Ur(G,Fe),Ce}function yt(G,F,Y,re){if(typeof Y=="object"&&Y!==null&&Y.type===k&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var Ce=Y.key;F!==null;){if(F.key===Ce){if(Ce=Y.type,Ce===k){if(F.tag===7){l(G,F.sibling),re=y(F,Y.props.children),re.return=G,G=re;break e}}else if(F.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===D&&Go(Ce)===F.type){l(G,F.sibling),re=y(F,Y.props),Hu(re,Y),re.return=G,G=re;break e}l(G,F);break}else o(G,F);F=F.sibling}Y.type===k?(re=Lo(Y.props.children,G.mode,re,Y.key),re.return=G,G=re):(re=Kd(Y.type,Y.key,Y.props,null,G.mode,re),Hu(re,Y),re.return=G,G=re)}return x(G);case N:e:{for(Ce=Y.key;F!==null;){if(F.key===Ce)if(F.tag===4&&F.stateNode.containerInfo===Y.containerInfo&&F.stateNode.implementation===Y.implementation){l(G,F.sibling),re=y(F,Y.children||[]),re.return=G,G=re;break e}else{l(G,F);break}else o(G,F);F=F.sibling}re=Pm(Y,G.mode,re),re.return=G,G=re}return x(G);case D:return Y=Go(Y),yt(G,F,Y,re)}if(ft(Y))return Se(G,F,Y,re);if(B(Y)){if(Ce=B(Y),typeof Ce!="function")throw Error(i(150));return Y=Ce.call(Y),Re(G,F,Y,re)}if(typeof Y.then=="function")return yt(G,F,Wd(Y),re);if(Y.$$typeof===Q)return yt(G,F,Jd(G,Y),re);Zd(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,F!==null&&F.tag===6?(l(G,F.sibling),re=y(F,Y),re.return=G,G=re):(l(G,F),re=Mm(Y,G.mode,re),re.return=G,G=re),x(G)):l(G,F)}return function(G,F,Y,re){try{zu=0;var Ce=yt(G,F,Y,re);return Za=null,Ce}catch(be){if(be===Wa||be===Qd)throw be;var We=ii(29,be,null,G.mode);return We.lanes=re,We.return=G,We}finally{}}}var Ho=H_(!0),K_=H_(!1),bs=!1;function Km(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $m(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ws(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Is(r,o,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(rt&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=Hd(r),C_(r,null,l),o}return zd(r,c,o,l),Hd(r)}function Ku(r,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var c=o.lanes;c&=r.pendingLanes,l|=c,o.lanes=l,Ao(r,l)}}function Ym(r,o){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=x:v=v.next=x,l=l.next}while(l!==null);v===null?y=v=o:v=v.next=o}else y=v=o;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=o:r.next=o,l.lastBaseUpdate=o}var Jm=!1;function $u(){if(Jm){var r=Xa;if(r!==null)throw r}}function Yu(r,o,l,c){Jm=!1;var y=r.updateQueue;bs=!1;var v=y.firstBaseUpdate,x=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var U=I,j=U.next;U.next=null,x===null?v=j:x.next=j,x=U;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,I=ie.lastBaseUpdate,I!==x&&(I===null?ie.firstBaseUpdate=j:I.next=j,ie.lastBaseUpdate=U))}if(v!==null){var ae=y.baseState;x=0,ie=j=U=null,I=v;do{var X=I.lane&-536870913,ee=X!==I.lane;if(ee?($e&X)===X:(c&X)===X){X!==0&&X===Qa&&(Jm=!0),ie!==null&&(ie=ie.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Se=r,Re=I;X=o;var yt=l;switch(Re.tag){case 1:if(Se=Re.payload,typeof Se=="function"){ae=Se.call(yt,ae,X);break e}ae=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Re.payload,X=typeof Se=="function"?Se.call(yt,ae,X):Se,X==null)break e;ae=E({},ae,X);break e;case 2:bs=!0}}X=I.callback,X!==null&&(r.flags|=64,ee&&(r.flags|=8192),ee=y.callbacks,ee===null?y.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ie===null?(j=ie=ee,U=ae):ie=ie.next=ee,x|=X;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;ee=I,I=ee.next,ee.next=null,y.lastBaseUpdate=ee,y.shared.pending=null}}while(!0);ie===null&&(U=ae),y.baseState=U,y.firstBaseUpdate=j,y.lastBaseUpdate=ie,v===null&&(y.shared.lanes=0),Ms|=x,r.lanes=x,r.memoizedState=ae}}function $_(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function Y_(r,o){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)$_(l[r],o)}var el=q(null),ef=q(0);function J_(r,o){r=Yr,pe(ef,r),pe(el,o),Yr=r|o.baseLanes}function jm(){pe(ef,Yr),pe(el,el.current)}function Qm(){Yr=ef.current,oe(el),oe(ef)}var ri=q(null),bi=null;function Cs(r){var o=r.alternate;pe(qt,qt.current&1),pe(ri,r),bi===null&&(o===null||el.current!==null||o.memoizedState!==null)&&(bi=r)}function Xm(r){pe(qt,qt.current),pe(ri,r),bi===null&&(bi=r)}function j_(r){r.tag===22?(pe(qt,qt.current),pe(ri,r),bi===null&&(bi=r)):Rs()}function Rs(){pe(qt,qt.current),pe(ri,ri.current)}function si(r){oe(ri),bi===r&&(bi=null),oe(qt)}var qt=q(0);function tf(r){for(var o=r;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ig(l)||rg(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Fr=0,Le=null,pt=null,jt=null,nf=!1,tl=!1,Ko=!1,rf=0,Ju=0,nl=null,i1=0;function Vt(){throw Error(i(321))}function Wm(r,o){if(o===null)return!1;for(var l=0;l<o.length&&l<r.length;l++)if(!ni(r[l],o[l]))return!1;return!0}function Zm(r,o,l,c,y,v){return Fr=v,Le=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,te.H=r===null||r.memoizedState===null?Mv:mp,Ko=!1,v=l(c,y),Ko=!1,tl&&(v=X_(o,l,c,y)),Q_(r),v}function Q_(r){te.H=Xu;var o=pt!==null&&pt.next!==null;if(Fr=0,jt=pt=Le=null,nf=!1,Ju=0,nl=null,o)throw Error(i(300));r===null||Qt||(r=r.dependencies,r!==null&&Yd(r)&&(Qt=!0))}function X_(r,o,l,c){Le=r;var y=0;do{if(tl&&(nl=null),Ju=0,tl=!1,25<=y)throw Error(i(301));if(y+=1,jt=pt=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}te.H=Pv,v=o(l,c)}while(tl);return v}function r1(){var r=te.H,o=r.useState()[0];return o=typeof o.then=="function"?ju(o):o,r=r.useState()[0],(pt!==null?pt.memoizedState:null)!==r&&(Le.flags|=1024),o}function ep(){var r=rf!==0;return rf=0,r}function tp(r,o,l){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~l}function np(r){if(nf){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}nf=!1}Fr=0,jt=pt=Le=null,tl=!1,Ju=rf=0,nl=null}function Rn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Le.memoizedState=jt=r:jt=jt.next=r,jt}function Bt(){if(pt===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=pt.next;var o=jt===null?Le.memoizedState:jt.next;if(o!==null)jt=o,pt=r;else{if(r===null)throw Le.alternate===null?Error(i(467)):Error(i(310));pt=r,r={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},jt===null?Le.memoizedState=jt=r:jt=jt.next=r}return jt}function sf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ju(r){var o=Ju;return Ju+=1,nl===null&&(nl=[]),r=B_(nl,r,o),o=Le,(jt===null?o.memoizedState:jt.next)===null&&(o=o.alternate,te.H=o===null||o.memoizedState===null?Mv:mp),r}function of(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ju(r);if(r.$$typeof===Q)return mn(r)}throw Error(i(438,String(r)))}function ip(r){var o=null,l=Le.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var c=Le.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=sf(),Le.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(r),c=0;c<r;c++)l[c]=O;return o.index++,l}function qr(r,o){return typeof o=="function"?o(r):o}function af(r){var o=Bt();return rp(o,pt,r)}function rp(r,o,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=r.baseQueue,v=c.pending;if(v!==null){if(y!==null){var x=y.next;y.next=v.next,v.next=x}o.baseQueue=y=v,c.pending=null}if(v=r.baseState,y===null)r.memoizedState=v;else{o=y.next;var I=x=null,U=null,j=o,ie=!1;do{var ae=j.lane&-536870913;if(ae!==j.lane?($e&ae)===ae:(Fr&ae)===ae){var X=j.revertLane;if(X===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),ae===Qa&&(ie=!0);else if((Fr&X)===X){j=j.next,X===Qa&&(ie=!0);continue}else ae={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},U===null?(I=U=ae,x=v):U=U.next=ae,Le.lanes|=X,Ms|=X;ae=j.action,Ko&&l(v,ae),v=j.hasEagerState?j.eagerState:l(v,ae)}else X={lane:ae,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},U===null?(I=U=X,x=v):U=U.next=X,Le.lanes|=ae,Ms|=ae;j=j.next}while(j!==null&&j!==o);if(U===null?x=v:U.next=I,!ni(v,r.memoizedState)&&(Qt=!0,ie&&(l=Xa,l!==null)))throw l;r.memoizedState=v,r.baseState=x,r.baseQueue=U,c.lastRenderedState=v}return y===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function sp(r){var o=Bt(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,y=l.pending,v=o.memoizedState;if(y!==null){l.pending=null;var x=y=y.next;do v=r(v,x.action),x=x.next;while(x!==y);ni(v,o.memoizedState)||(Qt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,c]}function W_(r,o,l){var c=Le,y=Bt(),v=je;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=o();var x=!ni((pt||y).memoizedState,l);if(x&&(y.memoizedState=l,Qt=!0),y=y.queue,lp(tv.bind(null,c,y,r),[r]),y.getSnapshot!==o||x||jt!==null&&jt.memoizedState.tag&1){if(c.flags|=2048,il(9,{destroy:void 0},ev.bind(null,c,y,l,o),null),_t===null)throw Error(i(349));v||(Fr&127)!==0||Z_(c,o,l)}return l}function Z_(r,o,l){r.flags|=16384,r={getSnapshot:o,value:l},o=Le.updateQueue,o===null?(o=sf(),Le.updateQueue=o,o.stores=[r]):(l=o.stores,l===null?o.stores=[r]:l.push(r))}function ev(r,o,l,c){o.value=l,o.getSnapshot=c,nv(o)&&iv(r)}function tv(r,o,l){return l(function(){nv(o)&&iv(r)})}function nv(r){var o=r.getSnapshot;r=r.value;try{var l=o();return!ni(r,l)}catch{return!0}}function iv(r){var o=Uo(r,2);o!==null&&Hn(o,r,2)}function op(r){var o=Rn();if(typeof r=="function"){var l=r;if(r=l(),Ko){dn(!0);try{l()}finally{dn(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:r},o}function rv(r,o,l,c){return r.baseState=l,rp(r,pt,typeof c=="function"?c:qr)}function s1(r,o,l,c,y){if(cf(r))throw Error(i(485));if(r=o.action,r!==null){var v={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){v.listeners.push(x)}};te.T!==null?l(!0):v.isTransition=!1,c(v),l=o.pending,l===null?(v.next=o.pending=v,sv(o,v)):(v.next=l.next,o.pending=l.next=v)}}function sv(r,o){var l=o.action,c=o.payload,y=r.state;if(o.isTransition){var v=te.T,x={};te.T=x;try{var I=l(y,c),U=te.S;U!==null&&U(x,I),ov(r,o,I)}catch(j){ap(r,o,j)}finally{v!==null&&x.types!==null&&(v.types=x.types),te.T=v}}else try{v=l(y,c),ov(r,o,v)}catch(j){ap(r,o,j)}}function ov(r,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){av(r,o,c)},function(c){return ap(r,o,c)}):av(r,o,l)}function av(r,o,l){o.status="fulfilled",o.value=l,lv(o),r.state=l,o=r.pending,o!==null&&(l=o.next,l===o?r.pending=null:(l=l.next,o.next=l,sv(r,l)))}function ap(r,o,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=l,lv(o),o=o.next;while(o!==c)}r.action=null}function lv(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function uv(r,o){return o}function cv(r,o){if(je){var l=_t.formState;if(l!==null){e:{var c=Le;if(je){if(St){t:{for(var y=St,v=xi;y.nodeType!==8;){if(!v){y=null;break t}if(y=wi(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){St=wi(y.nextSibling),c=y.data==="F!";break e}}As(c)}c=!1}c&&(o=l[0])}}return l=Rn(),l.memoizedState=l.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uv,lastRenderedState:o},l.queue=c,l=Rv.bind(null,Le,c),c.dispatch=l,c=op(!1),v=hp.bind(null,Le,!1,c.queue),c=Rn(),y={state:o,dispatch:null,action:r,pending:null},c.queue=y,l=s1.bind(null,Le,y,v,l),y.dispatch=l,c.memoizedState=r,[o,l,!1]}function dv(r){var o=Bt();return fv(o,pt,r)}function fv(r,o,l){if(o=rp(r,o,uv)[0],r=af(qr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=ju(o)}catch(x){throw x===Wa?Qd:x}else c=o;o=Bt();var y=o.queue,v=y.dispatch;return l!==o.memoizedState&&(Le.flags|=2048,il(9,{destroy:void 0},o1.bind(null,y,l),null)),[c,v,r]}function o1(r,o){r.action=o}function hv(r){var o=Bt(),l=pt;if(l!==null)return fv(o,l,r);Bt(),o=o.memoizedState,l=Bt();var c=l.queue.dispatch;return l.memoizedState=r,[o,c,!1]}function il(r,o,l,c){return r={tag:r,create:l,deps:c,inst:o,next:null},o=Le.updateQueue,o===null&&(o=sf(),Le.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,o.lastEffect=r),r}function mv(){return Bt().memoizedState}function lf(r,o,l,c){var y=Rn();Le.flags|=r,y.memoizedState=il(1|o,{destroy:void 0},l,c===void 0?null:c)}function uf(r,o,l,c){var y=Bt();c=c===void 0?null:c;var v=y.memoizedState.inst;pt!==null&&c!==null&&Wm(c,pt.memoizedState.deps)?y.memoizedState=il(o,v,l,c):(Le.flags|=r,y.memoizedState=il(1|o,v,l,c))}function pv(r,o){lf(8390656,8,r,o)}function lp(r,o){uf(2048,8,r,o)}function a1(r){Le.flags|=4;var o=Le.updateQueue;if(o===null)o=sf(),Le.updateQueue=o,o.events=[r];else{var l=o.events;l===null?o.events=[r]:l.push(r)}}function gv(r){var o=Bt().memoizedState;return a1({ref:o,nextImpl:r}),function(){if((rt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function yv(r,o){return uf(4,2,r,o)}function _v(r,o){return uf(4,4,r,o)}function vv(r,o){if(typeof o=="function"){r=r();var l=o(r);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Ev(r,o,l){l=l!=null?l.concat([r]):null,uf(4,4,vv.bind(null,o,r),l)}function up(){}function Tv(r,o){var l=Bt();o=o===void 0?null:o;var c=l.memoizedState;return o!==null&&Wm(o,c[1])?c[0]:(l.memoizedState=[r,o],r)}function Sv(r,o){var l=Bt();o=o===void 0?null:o;var c=l.memoizedState;if(o!==null&&Wm(o,c[1]))return c[0];if(c=r(),Ko){dn(!0);try{r()}finally{dn(!1)}}return l.memoizedState=[c,o],c}function cp(r,o,l){return l===void 0||(Fr&1073741824)!==0&&($e&261930)===0?r.memoizedState=o:(r.memoizedState=l,r=AE(),Le.lanes|=r,Ms|=r,l)}function Av(r,o,l,c){return ni(l,o)?l:el.current!==null?(r=cp(r,l,c),ni(r,o)||(Qt=!0),r):(Fr&42)===0||(Fr&1073741824)!==0&&($e&261930)===0?(Qt=!0,r.memoizedState=l):(r=AE(),Le.lanes|=r,Ms|=r,o)}function xv(r,o,l,c,y){var v=me.p;me.p=v!==0&&8>v?v:8;var x=te.T,I={};te.T=I,hp(r,!1,o,l);try{var U=y(),j=te.S;if(j!==null&&j(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ie=n1(U,c);Qu(r,o,ie,li(r))}else Qu(r,o,c,li(r))}catch(ae){Qu(r,o,{then:function(){},status:"rejected",reason:ae},li())}finally{me.p=v,x!==null&&I.types!==null&&(x.types=I.types),te.T=x}}function l1(){}function dp(r,o,l,c){if(r.tag!==5)throw Error(i(476));var y=bv(r).queue;xv(r,y,o,Te,l===null?l1:function(){return wv(r),l(c)})}function bv(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:Te},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:l},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function wv(r){var o=bv(r);o.next===null&&(o=r.alternate.memoizedState),Qu(r,o.next.queue,{},li())}function fp(){return mn(hc)}function Iv(){return Bt().memoizedState}function Cv(){return Bt().memoizedState}function u1(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var l=li();r=ws(l);var c=Is(o,r,l);c!==null&&(Hn(c,o,l),Ku(c,o,l)),o={cache:Bm()},r.payload=o;return}o=o.return}}function c1(r,o,l){var c=li();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},cf(r)?Nv(o,l):(l=Nm(r,o,l,c),l!==null&&(Hn(l,r,c),Dv(l,o,c)))}function Rv(r,o,l){var c=li();Qu(r,o,l,c)}function Qu(r,o,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(cf(r))Nv(o,y);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var x=o.lastRenderedState,I=v(x,l);if(y.hasEagerState=!0,y.eagerState=I,ni(I,x))return zd(r,o,y,0),_t===null&&Gd(),!1}catch{}finally{}if(l=Nm(r,o,y,c),l!==null)return Hn(l,r,c),Dv(l,o,c),!0}return!1}function hp(r,o,l,c){if(c={lane:2,revertLane:Kp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},cf(r)){if(o)throw Error(i(479))}else o=Nm(r,l,c,2),o!==null&&Hn(o,r,2)}function cf(r){var o=r.alternate;return r===Le||o!==null&&o===Le}function Nv(r,o){tl=nf=!0;var l=r.pending;l===null?o.next=o:(o.next=l.next,l.next=o),r.pending=o}function Dv(r,o,l){if((l&4194048)!==0){var c=o.lanes;c&=r.pendingLanes,l|=c,o.lanes=l,Ao(r,l)}}var Xu={readContext:mn,use:of,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};Xu.useEffectEvent=Vt;var Mv={readContext:mn,use:of,useCallback:function(r,o){return Rn().memoizedState=[r,o===void 0?null:o],r},useContext:mn,useEffect:pv,useImperativeHandle:function(r,o,l){l=l!=null?l.concat([r]):null,lf(4194308,4,vv.bind(null,o,r),l)},useLayoutEffect:function(r,o){return lf(4194308,4,r,o)},useInsertionEffect:function(r,o){lf(4,2,r,o)},useMemo:function(r,o){var l=Rn();o=o===void 0?null:o;var c=r();if(Ko){dn(!0);try{r()}finally{dn(!1)}}return l.memoizedState=[c,o],c},useReducer:function(r,o,l){var c=Rn();if(l!==void 0){var y=l(o);if(Ko){dn(!0);try{l(o)}finally{dn(!1)}}}else y=o;return c.memoizedState=c.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},c.queue=r,r=r.dispatch=c1.bind(null,Le,r),[c.memoizedState,r]},useRef:function(r){var o=Rn();return r={current:r},o.memoizedState=r},useState:function(r){r=op(r);var o=r.queue,l=Rv.bind(null,Le,o);return o.dispatch=l,[r.memoizedState,l]},useDebugValue:up,useDeferredValue:function(r,o){var l=Rn();return cp(l,r,o)},useTransition:function(){var r=op(!1);return r=xv.bind(null,Le,r.queue,!0,!1),Rn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,l){var c=Le,y=Rn();if(je){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),_t===null)throw Error(i(349));($e&127)!==0||Z_(c,o,l)}y.memoizedState=l;var v={value:l,getSnapshot:o};return y.queue=v,pv(tv.bind(null,c,v,r),[r]),c.flags|=2048,il(9,{destroy:void 0},ev.bind(null,c,v,l,o),null),l},useId:function(){var r=Rn(),o=_t.identifierPrefix;if(je){var l=mr,c=hr;l=(c&~(1<<32-nt(c)-1)).toString(32)+l,o="_"+o+"R_"+l,l=rf++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=i1++,o="_"+o+"r_"+l.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:fp,useFormState:cv,useActionState:cv,useOptimistic:function(r){var o=Rn();o.memoizedState=o.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=hp.bind(null,Le,!0,l),l.dispatch=o,[r,o]},useMemoCache:ip,useCacheRefresh:function(){return Rn().memoizedState=u1.bind(null,Le)},useEffectEvent:function(r){var o=Rn(),l={impl:r};return o.memoizedState=l,function(){if((rt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},mp={readContext:mn,use:of,useCallback:Tv,useContext:mn,useEffect:lp,useImperativeHandle:Ev,useInsertionEffect:yv,useLayoutEffect:_v,useMemo:Sv,useReducer:af,useRef:mv,useState:function(){return af(qr)},useDebugValue:up,useDeferredValue:function(r,o){var l=Bt();return Av(l,pt.memoizedState,r,o)},useTransition:function(){var r=af(qr)[0],o=Bt().memoizedState;return[typeof r=="boolean"?r:ju(r),o]},useSyncExternalStore:W_,useId:Iv,useHostTransitionStatus:fp,useFormState:dv,useActionState:dv,useOptimistic:function(r,o){var l=Bt();return rv(l,pt,r,o)},useMemoCache:ip,useCacheRefresh:Cv};mp.useEffectEvent=gv;var Pv={readContext:mn,use:of,useCallback:Tv,useContext:mn,useEffect:lp,useImperativeHandle:Ev,useInsertionEffect:yv,useLayoutEffect:_v,useMemo:Sv,useReducer:sp,useRef:mv,useState:function(){return sp(qr)},useDebugValue:up,useDeferredValue:function(r,o){var l=Bt();return pt===null?cp(l,r,o):Av(l,pt.memoizedState,r,o)},useTransition:function(){var r=sp(qr)[0],o=Bt().memoizedState;return[typeof r=="boolean"?r:ju(r),o]},useSyncExternalStore:W_,useId:Iv,useHostTransitionStatus:fp,useFormState:hv,useActionState:hv,useOptimistic:function(r,o){var l=Bt();return pt!==null?rv(l,pt,r,o):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:ip,useCacheRefresh:Cv};Pv.useEffectEvent=gv;function pp(r,o,l,c){o=r.memoizedState,l=l(c,o),l=l==null?o:E({},o,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var gp={enqueueSetState:function(r,o,l){r=r._reactInternals;var c=li(),y=ws(c);y.payload=o,l!=null&&(y.callback=l),o=Is(r,y,c),o!==null&&(Hn(o,r,c),Ku(o,r,c))},enqueueReplaceState:function(r,o,l){r=r._reactInternals;var c=li(),y=ws(c);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=Is(r,y,c),o!==null&&(Hn(o,r,c),Ku(o,r,c))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var l=li(),c=ws(l);c.tag=2,o!=null&&(c.callback=o),o=Is(r,c,l),o!==null&&(Hn(o,r,l),Ku(o,r,l))}};function Vv(r,o,l,c,y,v,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,v,x):o.prototype&&o.prototype.isPureReactComponent?!Lu(l,c)||!Lu(y,v):!0}function kv(r,o,l,c){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,c),o.state!==r&&gp.enqueueReplaceState(o,o.state,null)}function $o(r,o){var l=o;if("ref"in o){l={};for(var c in o)c!=="ref"&&(l[c]=o[c])}if(r=r.defaultProps){l===o&&(l=E({},l));for(var y in r)l[y]===void 0&&(l[y]=r[y])}return l}function Uv(r){Bd(r)}function Lv(r){console.error(r)}function Ov(r){Bd(r)}function df(r,o){try{var l=r.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function Fv(r,o,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function yp(r,o,l){return l=ws(l),l.tag=3,l.payload={element:null},l.callback=function(){df(r,o)},l}function qv(r){return r=ws(r),r.tag=3,r}function Bv(r,o,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;r.payload=function(){return y(v)},r.callback=function(){Fv(o,l,c)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){Fv(o,l,c),typeof y!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function d1(r,o,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=l.alternate,o!==null&&ja(o,l,y,!0),l=ri.current,l!==null){switch(l.tag){case 31:case 13:return bi===null?Af():l.alternate===null&&kt===0&&(kt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Xd?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([c]):o.add(c),Gp(r,c,y)),!1;case 22:return l.flags|=65536,c===Xd?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([c]):l.add(c)),Gp(r,c,y)),!1}throw Error(i(435,l.tag))}return Gp(r,c,y),Af(),!1}if(je)return o=ri.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==Um&&(r=Error(i(422),{cause:c}),qu(Ti(r,l)))):(c!==Um&&(o=Error(i(423),{cause:c}),qu(Ti(o,l))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,c=Ti(c,l),y=yp(r.stateNode,c,y),Ym(r,y),kt!==4&&(kt=2)),!1;var v=Error(i(520),{cause:c});if(v=Ti(v,l),sc===null?sc=[v]:sc.push(v),kt!==4&&(kt=2),o===null)return!0;c=Ti(c,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,r=y&-y,l.lanes|=r,r=yp(l.stateNode,c,r),Ym(l,r),!1;case 1:if(o=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ps===null||!Ps.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=qv(y),Bv(y,r,l,c),Ym(l,y),!1}l=l.return}while(l!==null);return!1}var _p=Error(i(461)),Qt=!1;function pn(r,o,l,c){o.child=r===null?K_(o,null,l,c):Ho(o,r.child,l,c)}function Gv(r,o,l,c,y){l=l.render;var v=o.ref;if("ref"in c){var x={};for(var I in c)I!=="ref"&&(x[I]=c[I])}else x=c;return qo(o),c=Zm(r,o,l,x,v,y),I=ep(),r!==null&&!Qt?(tp(r,o,y),Br(r,o,y)):(je&&I&&Vm(o),o.flags|=1,pn(r,o,c,y),o.child)}function zv(r,o,l,c,y){if(r===null){var v=l.type;return typeof v=="function"&&!Dm(v)&&v.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=v,Hv(r,o,v,c,y)):(r=Kd(l.type,null,c,o,o.mode,y),r.ref=o.ref,r.return=o,o.child=r)}if(v=r.child,!wp(r,y)){var x=v.memoizedProps;if(l=l.compare,l=l!==null?l:Lu,l(x,c)&&r.ref===o.ref)return Br(r,o,y)}return o.flags|=1,r=kr(v,c),r.ref=o.ref,r.return=o,o.child=r}function Hv(r,o,l,c,y){if(r!==null){var v=r.memoizedProps;if(Lu(v,c)&&r.ref===o.ref)if(Qt=!1,o.pendingProps=c=v,wp(r,y))(r.flags&131072)!==0&&(Qt=!0);else return o.lanes=r.lanes,Br(r,o,y)}return vp(r,o,l,c,y)}function Kv(r,o,l,c){var y=c.children,v=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,r!==null){for(c=o.child=r.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,o.child=null;return $v(r,o,v,l,c)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&jd(o,v!==null?v.cachePool:null),v!==null?J_(o,v):jm(),j_(o);else return c=o.lanes=536870912,$v(r,o,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(jd(o,v.cachePool),J_(o,v),Rs(),o.memoizedState=null):(r!==null&&jd(o,null),jm(),Rs());return pn(r,o,y,l),o.child}function Wu(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function $v(r,o,l,c,y){var v=zm();return v=v===null?null:{parent:Jt._currentValue,pool:v},o.memoizedState={baseLanes:l,cachePool:v},r!==null&&jd(o,null),jm(),j_(o),r!==null&&ja(r,o,c,!0),o.childLanes=y,null}function ff(r,o){return o=mf({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function Yv(r,o,l){return Ho(o,r.child,null,l),r=ff(o,o.pendingProps),r.flags|=2,si(o),o.memoizedState=null,r}function f1(r,o,l){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(je){if(c.mode==="hidden")return r=ff(o,c),o.lanes=536870912,Wu(null,r);if(Xm(o),(r=St)?(r=sT(r,xi),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ts!==null?{id:hr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},l=N_(r),l.return=o,o.child=l,hn=o,St=null)):r=null,r===null)throw As(o);return o.lanes=536870912,null}return ff(o,c)}var v=r.memoizedState;if(v!==null){var x=v.dehydrated;if(Xm(o),y)if(o.flags&256)o.flags&=-257,o=Yv(r,o,l);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(Qt||ja(r,o,l,!1),y=(l&r.childLanes)!==0,Qt||y){if(c=_t,c!==null&&(x=xo(c,l),x!==0&&x!==v.retryLane))throw v.retryLane=x,Uo(r,x),Hn(c,r,x),_p;Af(),o=Yv(r,o,l)}else r=v.treeContext,St=wi(x.nextSibling),hn=o,je=!0,Ss=null,xi=!1,r!==null&&P_(o,r),o=ff(o,c),o.flags|=4096;return o}return r=kr(r.child,{mode:c.mode,children:c.children}),r.ref=o.ref,o.child=r,r.return=o,r}function hf(r,o){var l=o.ref;if(l===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(o.flags|=4194816)}}function vp(r,o,l,c,y){return qo(o),l=Zm(r,o,l,c,void 0,y),c=ep(),r!==null&&!Qt?(tp(r,o,y),Br(r,o,y)):(je&&c&&Vm(o),o.flags|=1,pn(r,o,l,y),o.child)}function Jv(r,o,l,c,y,v){return qo(o),o.updateQueue=null,l=X_(o,c,l,y),Q_(r),c=ep(),r!==null&&!Qt?(tp(r,o,v),Br(r,o,v)):(je&&c&&Vm(o),o.flags|=1,pn(r,o,l,v),o.child)}function jv(r,o,l,c,y){if(qo(o),o.stateNode===null){var v=Ka,x=l.contextType;typeof x=="object"&&x!==null&&(v=mn(x)),v=new l(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=gp,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},Km(o),x=l.contextType,v.context=typeof x=="object"&&x!==null?mn(x):Ka,v.state=o.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(pp(o,l,x,c),v.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(x=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),x!==v.state&&gp.enqueueReplaceState(v,v.state,null),Yu(o,c,v,y),$u(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(r===null){v=o.stateNode;var I=o.memoizedProps,U=$o(l,I);v.props=U;var j=v.context,ie=l.contextType;x=Ka,typeof ie=="object"&&ie!==null&&(x=mn(ie));var ae=l.getDerivedStateFromProps;ie=typeof ae=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,ie||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||j!==x)&&kv(o,v,c,x),bs=!1;var X=o.memoizedState;v.state=X,Yu(o,c,v,y),$u(),j=o.memoizedState,I||X!==j||bs?(typeof ae=="function"&&(pp(o,l,ae,c),j=o.memoizedState),(U=bs||Vv(o,l,U,c,X,j,x))?(ie||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=j),v.props=c,v.state=j,v.context=x,c=U):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,$m(r,o),x=o.memoizedProps,ie=$o(l,x),v.props=ie,ae=o.pendingProps,X=v.context,j=l.contextType,U=Ka,typeof j=="object"&&j!==null&&(U=mn(j)),I=l.getDerivedStateFromProps,(j=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x!==ae||X!==U)&&kv(o,v,c,U),bs=!1,X=o.memoizedState,v.state=X,Yu(o,c,v,y),$u();var ee=o.memoizedState;x!==ae||X!==ee||bs||r!==null&&r.dependencies!==null&&Yd(r.dependencies)?(typeof I=="function"&&(pp(o,l,I,c),ee=o.memoizedState),(ie=bs||Vv(o,l,ie,c,X,ee,U)||r!==null&&r.dependencies!==null&&Yd(r.dependencies))?(j||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ee,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ee,U)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=ee),v.props=c,v.state=ee,v.context=U,c=ie):(typeof v.componentDidUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(o.flags|=1024),c=!1)}return v=c,hf(r,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,r!==null&&c?(o.child=Ho(o,r.child,null,y),o.child=Ho(o,null,l,y)):pn(r,o,l,y),o.memoizedState=v.state,r=o.child):r=Br(r,o,y),r}function Qv(r,o,l,c){return Oo(),o.flags|=256,pn(r,o,l,c),o.child}var Ep={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tp(r){return{baseLanes:r,cachePool:F_()}}function Sp(r,o,l){return r=r!==null?r.childLanes&~l:0,o&&(r|=ai),r}function Xv(r,o,l){var c=o.pendingProps,y=!1,v=(o.flags&128)!==0,x;if((x=v)||(x=r!==null&&r.memoizedState===null?!1:(qt.current&2)!==0),x&&(y=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,r===null){if(je){if(y?Cs(o):Rs(),(r=St)?(r=sT(r,xi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ts!==null?{id:hr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},l=N_(r),l.return=o,o.child=l,hn=o,St=null)):r=null,r===null)throw As(o);return rg(r)?o.lanes=32:o.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(Rs(),y=o.mode,I=mf({mode:"hidden",children:I},y),c=Lo(c,y,l,null),I.return=o,c.return=o,I.sibling=c,o.child=I,c=o.child,c.memoizedState=Tp(l),c.childLanes=Sp(r,x,l),o.memoizedState=Ep,Wu(null,c)):(Cs(o),Ap(o,I))}var U=r.memoizedState;if(U!==null&&(I=U.dehydrated,I!==null)){if(v)o.flags&256?(Cs(o),o.flags&=-257,o=xp(r,o,l)):o.memoizedState!==null?(Rs(),o.child=r.child,o.flags|=128,o=null):(Rs(),I=c.fallback,y=o.mode,c=mf({mode:"visible",children:c.children},y),I=Lo(I,y,l,null),I.flags|=2,c.return=o,I.return=o,c.sibling=I,o.child=c,Ho(o,r.child,null,l),c=o.child,c.memoizedState=Tp(l),c.childLanes=Sp(r,x,l),o.memoizedState=Ep,o=Wu(null,c));else if(Cs(o),rg(I)){if(x=I.nextSibling&&I.nextSibling.dataset,x)var j=x.dgst;x=j,c=Error(i(419)),c.stack="",c.digest=x,qu({value:c,source:null,stack:null}),o=xp(r,o,l)}else if(Qt||ja(r,o,l,!1),x=(l&r.childLanes)!==0,Qt||x){if(x=_t,x!==null&&(c=xo(x,l),c!==0&&c!==U.retryLane))throw U.retryLane=c,Uo(r,c),Hn(x,r,c),_p;ig(I)||Af(),o=xp(r,o,l)}else ig(I)?(o.flags|=192,o.child=r.child,o=null):(r=U.treeContext,St=wi(I.nextSibling),hn=o,je=!0,Ss=null,xi=!1,r!==null&&P_(o,r),o=Ap(o,c.children),o.flags|=4096);return o}return y?(Rs(),I=c.fallback,y=o.mode,U=r.child,j=U.sibling,c=kr(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,j!==null?I=kr(j,I):(I=Lo(I,y,l,null),I.flags|=2),I.return=o,c.return=o,c.sibling=I,o.child=c,Wu(null,c),c=o.child,I=r.child.memoizedState,I===null?I=Tp(l):(y=I.cachePool,y!==null?(U=Jt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=F_(),I={baseLanes:I.baseLanes|l,cachePool:y}),c.memoizedState=I,c.childLanes=Sp(r,x,l),o.memoizedState=Ep,Wu(r.child,c)):(Cs(o),l=r.child,r=l.sibling,l=kr(l,{mode:"visible",children:c.children}),l.return=o,l.sibling=null,r!==null&&(x=o.deletions,x===null?(o.deletions=[r],o.flags|=16):x.push(r)),o.child=l,o.memoizedState=null,l)}function Ap(r,o){return o=mf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function mf(r,o){return r=ii(22,r,null,o),r.lanes=0,r}function xp(r,o,l){return Ho(o,r.child,null,l),r=Ap(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Wv(r,o,l){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o),Fm(r.return,o,l)}function bp(r,o,l,c,y,v){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=l,x.tailMode=y,x.treeForkCount=v)}function Zv(r,o,l){var c=o.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var x=qt.current,I=(x&2)!==0;if(I?(x=x&1|2,o.flags|=128):x&=1,pe(qt,x),pn(r,o,c,l),c=je?Fu:0,!I&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Wv(r,l,o);else if(r.tag===19)Wv(r,l,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(y){case"forwards":for(l=o.child,y=null;l!==null;)r=l.alternate,r!==null&&tf(r)===null&&(y=l),l=l.sibling;l=y,l===null?(y=o.child,o.child=null):(y=l.sibling,l.sibling=null),bp(o,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=o.child,o.child=null;y!==null;){if(r=y.alternate,r!==null&&tf(r)===null){o.child=y;break}r=y.sibling,y.sibling=l,l=y,y=r}bp(o,!0,l,null,v,c);break;case"together":bp(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function Br(r,o,l){if(r!==null&&(o.dependencies=r.dependencies),Ms|=o.lanes,(l&o.childLanes)===0)if(r!==null){if(ja(r,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,l=kr(r,r.pendingProps),o.child=l,l.return=o;r.sibling!==null;)r=r.sibling,l=l.sibling=kr(r,r.pendingProps),l.return=o;l.sibling=null}return o.child}function wp(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Yd(r)))}function h1(r,o,l){switch(o.tag){case 3:Lt(o,o.stateNode.containerInfo),xs(o,Jt,r.memoizedState.cache),Oo();break;case 27:case 5:Mi(o);break;case 4:Lt(o,o.stateNode.containerInfo);break;case 10:xs(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Xm(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(Cs(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Xv(r,o,l):(Cs(o),r=Br(r,o,l),r!==null?r.sibling:null);Cs(o);break;case 19:var y=(r.flags&128)!==0;if(c=(l&o.childLanes)!==0,c||(ja(r,o,l,!1),c=(l&o.childLanes)!==0),y){if(c)return Zv(r,o,l);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),pe(qt,qt.current),c)break;return null;case 22:return o.lanes=0,Kv(r,o,l,o.pendingProps);case 24:xs(o,Jt,r.memoizedState.cache)}return Br(r,o,l)}function eE(r,o,l){if(r!==null)if(r.memoizedProps!==o.pendingProps)Qt=!0;else{if(!wp(r,l)&&(o.flags&128)===0)return Qt=!1,h1(r,o,l);Qt=(r.flags&131072)!==0}else Qt=!1,je&&(o.flags&1048576)!==0&&M_(o,Fu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(r=Go(o.elementType),o.type=r,typeof r=="function")Dm(r)?(c=$o(r,c),o.tag=1,o=jv(null,o,r,c,l)):(o.tag=0,o=vp(null,o,r,c,l));else{if(r!=null){var y=r.$$typeof;if(y===se){o.tag=11,o=Gv(null,o,r,c,l);break e}else if(y===R){o.tag=14,o=zv(null,o,r,c,l);break e}}throw o=Ve(r)||r,Error(i(306,o,""))}}return o;case 0:return vp(r,o,o.type,o.pendingProps,l);case 1:return c=o.type,y=$o(c,o.pendingProps),jv(r,o,c,y,l);case 3:e:{if(Lt(o,o.stateNode.containerInfo),r===null)throw Error(i(387));c=o.pendingProps;var v=o.memoizedState;y=v.element,$m(r,o),Yu(o,c,null,l);var x=o.memoizedState;if(c=x.cache,xs(o,Jt,c),c!==v.cache&&qm(o,[Jt],l,!0),$u(),c=x.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=Qv(r,o,c,l);break e}else if(c!==y){y=Ti(Error(i(424)),o),qu(y),o=Qv(r,o,c,l);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(St=wi(r.firstChild),hn=o,je=!0,Ss=null,xi=!0,l=K_(o,null,c,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Oo(),c===y){o=Br(r,o,l);break e}pn(r,o,c,l)}o=o.child}return o;case 26:return hf(r,o),r===null?(l=dT(o.type,null,o.pendingProps,null))?o.memoizedState=l:je||(l=o.type,r=o.pendingProps,c=Nf(Ne.current).createElement(l),c[ge]=o,c[we]=r,gn(c,l,r),Ot(c),o.stateNode=c):o.memoizedState=dT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Mi(o),r===null&&je&&(c=o.stateNode=lT(o.type,o.pendingProps,Ne.current),hn=o,xi=!0,y=St,Ls(o.type)?(sg=y,St=wi(c.firstChild)):St=y),pn(r,o,o.pendingProps.children,l),hf(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&je&&((y=c=St)&&(c=z1(c,o.type,o.pendingProps,xi),c!==null?(o.stateNode=c,hn=o,St=wi(c.firstChild),xi=!1,y=!0):y=!1),y||As(o)),Mi(o),y=o.type,v=o.pendingProps,x=r!==null?r.memoizedProps:null,c=v.children,eg(y,v)?c=null:x!==null&&eg(y,x)&&(o.flags|=32),o.memoizedState!==null&&(y=Zm(r,o,r1,null,null,l),hc._currentValue=y),hf(r,o),pn(r,o,c,l),o.child;case 6:return r===null&&je&&((r=l=St)&&(l=H1(l,o.pendingProps,xi),l!==null?(o.stateNode=l,hn=o,St=null,r=!0):r=!1),r||As(o)),null;case 13:return Xv(r,o,l);case 4:return Lt(o,o.stateNode.containerInfo),c=o.pendingProps,r===null?o.child=Ho(o,null,c,l):pn(r,o,c,l),o.child;case 11:return Gv(r,o,o.type,o.pendingProps,l);case 7:return pn(r,o,o.pendingProps,l),o.child;case 8:return pn(r,o,o.pendingProps.children,l),o.child;case 12:return pn(r,o,o.pendingProps.children,l),o.child;case 10:return c=o.pendingProps,xs(o,o.type,c.value),pn(r,o,c.children,l),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,qo(o),y=mn(y),c=c(y),o.flags|=1,pn(r,o,c,l),o.child;case 14:return zv(r,o,o.type,o.pendingProps,l);case 15:return Hv(r,o,o.type,o.pendingProps,l);case 19:return Zv(r,o,l);case 31:return f1(r,o,l);case 22:return Kv(r,o,l,o.pendingProps);case 24:return qo(o),c=mn(Jt),r===null?(y=zm(),y===null&&(y=_t,v=Bm(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),o.memoizedState={parent:c,cache:y},Km(o),xs(o,Jt,y)):((r.lanes&l)!==0&&($m(r,o),Yu(o,null,null,l),$u()),y=r.memoizedState,v=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),xs(o,Jt,c)):(c=v.cache,xs(o,Jt,c),c!==y.cache&&qm(o,[Jt],l,!0))),pn(r,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Gr(r){r.flags|=4}function Ip(r,o,l,c,y){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(y&335544128)===y)if(r.stateNode.complete)r.flags|=8192;else if(IE())r.flags|=8192;else throw zo=Xd,Hm}else r.flags&=-16777217}function tE(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!gT(o))if(IE())r.flags|=8192;else throw zo=Xd,Hm}function pf(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?So():536870912,r.lanes|=o,al|=o)}function Zu(r,o){if(!je)switch(r.tailMode){case"hidden":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function At(r){var o=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(o)for(var y=r.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=c,r.childLanes=l,o}function m1(r,o,l){var c=o.pendingProps;switch(km(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(o),null;case 1:return At(o),null;case 3:return l=o.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Or(Jt),vt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Ja(o)?Gr(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Lm())),At(o),null;case 26:var y=o.type,v=o.memoizedState;return r===null?(Gr(o),v!==null?(At(o),tE(o,v)):(At(o),Ip(o,y,null,c,l))):v?v!==r.memoizedState?(Gr(o),At(o),tE(o,v)):(At(o),o.flags&=-16777217):(r=r.memoizedProps,r!==c&&Gr(o),At(o),Ip(o,y,r,c,l)),null;case 27:if(Pi(o),l=Ne.current,y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==c&&Gr(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return At(o),null}r=ve.current,Ja(o)?V_(o):(r=lT(y,c,l),o.stateNode=r,Gr(o))}return At(o),null;case 5:if(Pi(o),y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==c&&Gr(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return At(o),null}if(v=ve.current,Ja(o))V_(o);else{var x=Nf(Ne.current);switch(v){case 1:v=x.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=x.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=x.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=x.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=x.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?x.createElement(y,{is:c.is}):x.createElement(y)}}v[ge]=o,v[we]=c;e:for(x=o.child;x!==null;){if(x.tag===5||x.tag===6)v.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===o)break e;for(;x.sibling===null;){if(x.return===null||x.return===o)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}o.stateNode=v;e:switch(gn(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Gr(o)}}return At(o),Ip(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,l),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==c&&Gr(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(r=Ne.current,Ja(o)){if(r=o.stateNode,l=o.memoizedProps,c=null,y=hn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}r[ge]=o,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||XE(r.nodeValue,l)),r||As(o,!0)}else r=Nf(r).createTextNode(c),r[ge]=o,o.stateNode=r}return At(o),null;case 31:if(l=o.memoizedState,r===null||r.memoizedState!==null){if(c=Ja(o),l!==null){if(r===null){if(!c)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[ge]=o}else Oo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),r=!1}else l=Lm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return o.flags&256?(si(o),o):(si(o),null);if((o.flags&128)!==0)throw Error(i(558))}return At(o),null;case 13:if(c=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=Ja(o),c!==null&&c.dehydrated!==null){if(r===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[ge]=o}else Oo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),y=!1}else y=Lm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(si(o),o):(si(o),null)}return si(o),(o.flags&128)!==0?(o.lanes=l,o):(l=c!==null,r=r!==null&&r.memoizedState!==null,l&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==r&&l&&(o.child.flags|=8192),pf(o,o.updateQueue),At(o),null);case 4:return vt(),r===null&&jp(o.stateNode.containerInfo),At(o),null;case 10:return Or(o.type),At(o),null;case 19:if(oe(qt),c=o.memoizedState,c===null)return At(o),null;if(y=(o.flags&128)!==0,v=c.rendering,v===null)if(y)Zu(c,!1);else{if(kt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(v=tf(r),v!==null){for(o.flags|=128,Zu(c,!1),r=v.updateQueue,o.updateQueue=r,pf(o,r),o.subtreeFlags=0,r=l,l=o.child;l!==null;)R_(l,r),l=l.sibling;return pe(qt,qt.current&1|2),je&&Ur(o,c.treeForkCount),o.child}r=r.sibling}c.tail!==null&&sn()>Ef&&(o.flags|=128,y=!0,Zu(c,!1),o.lanes=4194304)}else{if(!y)if(r=tf(v),r!==null){if(o.flags|=128,y=!0,r=r.updateQueue,o.updateQueue=r,pf(o,r),Zu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!je)return At(o),null}else 2*sn()-c.renderingStartTime>Ef&&l!==536870912&&(o.flags|=128,y=!0,Zu(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(r=c.last,r!==null?r.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=sn(),r.sibling=null,l=qt.current,pe(qt,y?l&1|2:l&1),je&&Ur(o,c.treeForkCount),r):(At(o),null);case 22:case 23:return si(o),Qm(),c=o.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(l&536870912)!==0&&(o.flags&128)===0&&(At(o),o.subtreeFlags&6&&(o.flags|=8192)):At(o),l=o.updateQueue,l!==null&&pf(o,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==l&&(o.flags|=2048),r!==null&&oe(Bo),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Or(Jt),At(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function p1(r,o){switch(km(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Or(Jt),vt(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Pi(o),null;case 31:if(o.memoizedState!==null){if(si(o),o.alternate===null)throw Error(i(340));Oo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(si(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Oo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return oe(qt),null;case 4:return vt(),null;case 10:return Or(o.type),null;case 22:case 23:return si(o),Qm(),r!==null&&oe(Bo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Or(Jt),null;case 25:return null;default:return null}}function nE(r,o){switch(km(o),o.tag){case 3:Or(Jt),vt();break;case 26:case 27:case 5:Pi(o);break;case 4:vt();break;case 31:o.memoizedState!==null&&si(o);break;case 13:si(o);break;case 19:oe(qt);break;case 10:Or(o.type);break;case 22:case 23:si(o),Qm(),r!==null&&oe(Bo);break;case 24:Or(Jt)}}function ec(r,o){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&r)===r){c=void 0;var v=l.create,x=l.inst;c=v(),x.destroy=c}l=l.next}while(l!==y)}}catch(I){ut(o,o.return,I)}}function Ns(r,o,l){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&r)===r){var x=c.inst,I=x.destroy;if(I!==void 0){x.destroy=void 0,y=o;var U=l,j=I;try{j()}catch(ie){ut(y,U,ie)}}}c=c.next}while(c!==v)}}catch(ie){ut(o,o.return,ie)}}function iE(r){var o=r.updateQueue;if(o!==null){var l=r.stateNode;try{Y_(o,l)}catch(c){ut(r,r.return,c)}}}function rE(r,o,l){l.props=$o(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){ut(r,o,c)}}function tc(r,o){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof l=="function"?r.refCleanup=l(c):l.current=c}}catch(y){ut(r,o,y)}}function pr(r,o){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){ut(r,o,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){ut(r,o,y)}else l.current=null}function sE(r){var o=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){ut(r,r.return,y)}}function Cp(r,o,l){try{var c=r.stateNode;L1(c,r.type,l,o),c[we]=o}catch(y){ut(r,r.return,y)}}function oE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ls(r.type)||r.tag===4}function Rp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||oE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ls(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Np(r,o,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(r),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Bi));else if(c!==4&&(c===27&&Ls(r.type)&&(l=r.stateNode,o=null),r=r.child,r!==null))for(Np(r,o,l),r=r.sibling;r!==null;)Np(r,o,l),r=r.sibling}function gf(r,o,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,o?l.insertBefore(r,o):l.appendChild(r);else if(c!==4&&(c===27&&Ls(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(gf(r,o,l),r=r.sibling;r!==null;)gf(r,o,l),r=r.sibling}function aE(r){var o=r.stateNode,l=r.memoizedProps;try{for(var c=r.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);gn(o,c,l),o[ge]=r,o[we]=l}catch(v){ut(r,r.return,v)}}var zr=!1,Xt=!1,Dp=!1,lE=typeof WeakSet=="function"?WeakSet:Set,an=null;function g1(r,o){if(r=r.containerInfo,Wp=Lf,r=E_(r),xm(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var x=0,I=-1,U=-1,j=0,ie=0,ae=r,X=null;t:for(;;){for(var ee;ae!==l||y!==0&&ae.nodeType!==3||(I=x+y),ae!==v||c!==0&&ae.nodeType!==3||(U=x+c),ae.nodeType===3&&(x+=ae.nodeValue.length),(ee=ae.firstChild)!==null;)X=ae,ae=ee;for(;;){if(ae===r)break t;if(X===l&&++j===y&&(I=x),X===v&&++ie===c&&(U=x),(ee=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=ee}l=I===-1||U===-1?null:{start:I,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(Zp={focusedElem:r,selectionRange:l},Lf=!1,an=o;an!==null;)if(o=an,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,an=r;else for(;an!==null;){switch(o=an,v=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)y=r[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,l=o,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var Se=$o(l.type,y);r=c.getSnapshotBeforeUpdate(Se,v),c.__reactInternalSnapshotBeforeUpdate=r}catch(Re){ut(l,l.return,Re)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,l=r.nodeType,l===9)ng(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":ng(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,an=r;break}an=o.return}}function uE(r,o,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Kr(r,l),c&4&&ec(5,l);break;case 1:if(Kr(r,l),c&4)if(r=l.stateNode,o===null)try{r.componentDidMount()}catch(x){ut(l,l.return,x)}else{var y=$o(l.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(y,o,r.__reactInternalSnapshotBeforeUpdate)}catch(x){ut(l,l.return,x)}}c&64&&iE(l),c&512&&tc(l,l.return);break;case 3:if(Kr(r,l),c&64&&(r=l.updateQueue,r!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Y_(r,o)}catch(x){ut(l,l.return,x)}}break;case 27:o===null&&c&4&&aE(l);case 26:case 5:Kr(r,l),o===null&&c&4&&sE(l),c&512&&tc(l,l.return);break;case 12:Kr(r,l);break;case 31:Kr(r,l),c&4&&fE(r,l);break;case 13:Kr(r,l),c&4&&hE(r,l),c&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=b1.bind(null,l),K1(r,l))));break;case 22:if(c=l.memoizedState!==null||zr,!c){o=o!==null&&o.memoizedState!==null||Xt,y=zr;var v=Xt;zr=c,(Xt=o)&&!v?$r(r,l,(l.subtreeFlags&8772)!==0):Kr(r,l),zr=y,Xt=v}break;case 30:break;default:Kr(r,l)}}function cE(r){var o=r.alternate;o!==null&&(r.alternate=null,cE(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Dr(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var It=null,qn=!1;function Hr(r,o,l){for(l=l.child;l!==null;)dE(r,o,l),l=l.sibling}function dE(r,o,l){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Un,l)}catch{}switch(l.tag){case 26:Xt||pr(l,o),Hr(r,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Xt||pr(l,o);var c=It,y=qn;Ls(l.type)&&(It=l.stateNode,qn=!1),Hr(r,o,l),cc(l.stateNode),It=c,qn=y;break;case 5:Xt||pr(l,o);case 6:if(c=It,y=qn,It=null,Hr(r,o,l),It=c,qn=y,It!==null)if(qn)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(l.stateNode)}catch(v){ut(l,o,v)}else try{It.removeChild(l.stateNode)}catch(v){ut(l,o,v)}break;case 18:It!==null&&(qn?(r=It,iT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),pl(r)):iT(It,l.stateNode));break;case 4:c=It,y=qn,It=l.stateNode.containerInfo,qn=!0,Hr(r,o,l),It=c,qn=y;break;case 0:case 11:case 14:case 15:Ns(2,l,o),Xt||Ns(4,l,o),Hr(r,o,l);break;case 1:Xt||(pr(l,o),c=l.stateNode,typeof c.componentWillUnmount=="function"&&rE(l,o,c)),Hr(r,o,l);break;case 21:Hr(r,o,l);break;case 22:Xt=(c=Xt)||l.memoizedState!==null,Hr(r,o,l),Xt=c;break;default:Hr(r,o,l)}}function fE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{pl(r)}catch(l){ut(o,o.return,l)}}}function hE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{pl(r)}catch(l){ut(o,o.return,l)}}function y1(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new lE),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new lE),o;default:throw Error(i(435,r.tag))}}function yf(r,o){var l=y1(r);o.forEach(function(c){if(!l.has(c)){l.add(c);var y=w1.bind(null,r,c);c.then(y,y)}})}function Bn(r,o){var l=o.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=r,x=o,I=x;e:for(;I!==null;){switch(I.tag){case 27:if(Ls(I.type)){It=I.stateNode,qn=!1;break e}break;case 5:It=I.stateNode,qn=!1;break e;case 3:case 4:It=I.stateNode.containerInfo,qn=!0;break e}I=I.return}if(It===null)throw Error(i(160));dE(v,x,y),It=null,qn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)mE(o,r),o=o.sibling}var Yi=null;function mE(r,o){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Bn(o,r),Gn(r),c&4&&(Ns(3,r,r.return),ec(3,r),Ns(5,r,r.return));break;case 1:Bn(o,r),Gn(r),c&512&&(Xt||l===null||pr(l,l.return)),c&64&&zr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=Yi;if(Bn(o,r),Gn(r),c&512&&(Xt||l===null||pr(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[ei]||v[ge]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),gn(v,c,l),v[ge]=r,Ot(v),c=v;break e;case"link":var x=mT("link","href",y).get(c+(l.href||""));if(x){for(var I=0;I<x.length;I++)if(v=x[I],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(I,1);break t}}v=y.createElement(c),gn(v,c,l),y.head.appendChild(v);break;case"meta":if(x=mT("meta","content",y).get(c+(l.content||""))){for(I=0;I<x.length;I++)if(v=x[I],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(I,1);break t}}v=y.createElement(c),gn(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[ge]=r,Ot(v),c=v}r.stateNode=c}else pT(y,r.type,r.stateNode);else r.stateNode=hT(y,c,r.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?pT(y,r.type,r.stateNode):hT(y,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Cp(r,r.memoizedProps,l.memoizedProps)}break;case 27:Bn(o,r),Gn(r),c&512&&(Xt||l===null||pr(l,l.return)),l!==null&&c&4&&Cp(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Bn(o,r),Gn(r),c&512&&(Xt||l===null||pr(l,l.return)),r.flags&32){y=r.stateNode;try{Fn(y,"")}catch(Se){ut(r,r.return,Se)}}c&4&&r.stateNode!=null&&(y=r.memoizedProps,Cp(r,y,l!==null?l.memoizedProps:y)),c&1024&&(Dp=!0);break;case 6:if(Bn(o,r),Gn(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(Se){ut(r,r.return,Se)}}break;case 3:if(Pf=null,y=Yi,Yi=Df(o.containerInfo),Bn(o,r),Yi=y,Gn(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{pl(o.containerInfo)}catch(Se){ut(r,r.return,Se)}Dp&&(Dp=!1,pE(r));break;case 4:c=Yi,Yi=Df(r.stateNode.containerInfo),Bn(o,r),Gn(r),Yi=c;break;case 12:Bn(o,r),Gn(r);break;case 31:Bn(o,r),Gn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,yf(r,c)));break;case 13:Bn(o,r),Gn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(vf=sn()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,yf(r,c)));break;case 22:y=r.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,j=zr,ie=Xt;if(zr=j||y,Xt=ie||U,Bn(o,r),Xt=ie,zr=j,Gn(r),c&8192)e:for(o=r.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(l===null||U||zr||Xt||Yo(r)),l=null,o=r;;){if(o.tag===5||o.tag===26){if(l===null){U=l=o;try{if(v=U.stateNode,y)x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{I=U.stateNode;var ae=U.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;I.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Se){ut(U,U.return,Se)}}}else if(o.tag===6){if(l===null){U=o;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(Se){ut(U,U.return,Se)}}}else if(o.tag===18){if(l===null){U=o;try{var ee=U.stateNode;y?rT(ee,!0):rT(U.stateNode,!1)}catch(Se){ut(U,U.return,Se)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,yf(r,l))));break;case 19:Bn(o,r),Gn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,yf(r,c)));break;case 30:break;case 21:break;default:Bn(o,r),Gn(r)}}function Gn(r){var o=r.flags;if(o&2){try{for(var l,c=r.return;c!==null;){if(oE(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=Rp(r);gf(r,v,y);break;case 5:var x=l.stateNode;l.flags&32&&(Fn(x,""),l.flags&=-33);var I=Rp(r);gf(r,I,x);break;case 3:case 4:var U=l.stateNode.containerInfo,j=Rp(r);Np(r,j,U);break;default:throw Error(i(161))}}catch(ie){ut(r,r.return,ie)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function pE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;pE(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Kr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)uE(r,o.alternate,o),o=o.sibling}function Yo(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Ns(4,o,o.return),Yo(o);break;case 1:pr(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&rE(o,o.return,l),Yo(o);break;case 27:cc(o.stateNode);case 26:case 5:pr(o,o.return),Yo(o);break;case 22:o.memoizedState===null&&Yo(o);break;case 30:Yo(o);break;default:Yo(o)}r=r.sibling}}function $r(r,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=r,v=o,x=v.flags;switch(v.tag){case 0:case 11:case 15:$r(y,v,l),ec(4,v);break;case 1:if($r(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(j){ut(c,c.return,j)}if(c=v,y=c.updateQueue,y!==null){var I=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)$_(U[y],I)}catch(j){ut(c,c.return,j)}}l&&x&64&&iE(v),tc(v,v.return);break;case 27:aE(v);case 26:case 5:$r(y,v,l),l&&c===null&&x&4&&sE(v),tc(v,v.return);break;case 12:$r(y,v,l);break;case 31:$r(y,v,l),l&&x&4&&fE(y,v);break;case 13:$r(y,v,l),l&&x&4&&hE(y,v);break;case 22:v.memoizedState===null&&$r(y,v,l),tc(v,v.return);break;case 30:break;default:$r(y,v,l)}o=o.sibling}}function Mp(r,o){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Bu(l))}function Pp(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Bu(r))}function Ji(r,o,l,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)gE(r,o,l,c),o=o.sibling}function gE(r,o,l,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Ji(r,o,l,c),y&2048&&ec(9,o);break;case 1:Ji(r,o,l,c);break;case 3:Ji(r,o,l,c),y&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Bu(r)));break;case 12:if(y&2048){Ji(r,o,l,c),r=o.stateNode;try{var v=o.memoizedProps,x=v.id,I=v.onPostCommit;typeof I=="function"&&I(x,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(U){ut(o,o.return,U)}}else Ji(r,o,l,c);break;case 31:Ji(r,o,l,c);break;case 13:Ji(r,o,l,c);break;case 23:break;case 22:v=o.stateNode,x=o.alternate,o.memoizedState!==null?v._visibility&2?Ji(r,o,l,c):nc(r,o):v._visibility&2?Ji(r,o,l,c):(v._visibility|=2,rl(r,o,l,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Mp(x,o);break;case 24:Ji(r,o,l,c),y&2048&&Pp(o.alternate,o);break;default:Ji(r,o,l,c)}}function rl(r,o,l,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=r,x=o,I=l,U=c,j=x.flags;switch(x.tag){case 0:case 11:case 15:rl(v,x,I,U,y),ec(8,x);break;case 23:break;case 22:var ie=x.stateNode;x.memoizedState!==null?ie._visibility&2?rl(v,x,I,U,y):nc(v,x):(ie._visibility|=2,rl(v,x,I,U,y)),y&&j&2048&&Mp(x.alternate,x);break;case 24:rl(v,x,I,U,y),y&&j&2048&&Pp(x.alternate,x);break;default:rl(v,x,I,U,y)}o=o.sibling}}function nc(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=r,c=o,y=c.flags;switch(c.tag){case 22:nc(l,c),y&2048&&Mp(c.alternate,c);break;case 24:nc(l,c),y&2048&&Pp(c.alternate,c);break;default:nc(l,c)}o=o.sibling}}var ic=8192;function sl(r,o,l){if(r.subtreeFlags&ic)for(r=r.child;r!==null;)yE(r,o,l),r=r.sibling}function yE(r,o,l){switch(r.tag){case 26:sl(r,o,l),r.flags&ic&&r.memoizedState!==null&&iN(l,Yi,r.memoizedState,r.memoizedProps);break;case 5:sl(r,o,l);break;case 3:case 4:var c=Yi;Yi=Df(r.stateNode.containerInfo),sl(r,o,l),Yi=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=ic,ic=16777216,sl(r,o,l),ic=c):sl(r,o,l));break;default:sl(r,o,l)}}function _E(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function rc(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];an=c,EE(c,r)}_E(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)vE(r),r=r.sibling}function vE(r){switch(r.tag){case 0:case 11:case 15:rc(r),r.flags&2048&&Ns(9,r,r.return);break;case 3:rc(r);break;case 12:rc(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,_f(r)):rc(r);break;default:rc(r)}}function _f(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];an=c,EE(c,r)}_E(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Ns(8,o,o.return),_f(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,_f(o));break;default:_f(o)}r=r.sibling}}function EE(r,o){for(;an!==null;){var l=an;switch(l.tag){case 0:case 11:case 15:Ns(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Bu(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,an=c;else e:for(l=r;an!==null;){c=an;var y=c.sibling,v=c.return;if(cE(c),c===l){an=null;break e}if(y!==null){y.return=v,an=y;break e}an=v}}}var _1={getCacheForType:function(r){var o=mn(Jt),l=o.data.get(r);return l===void 0&&(l=r(),o.data.set(r,l)),l},cacheSignal:function(){return mn(Jt).controller.signal}},v1=typeof WeakMap=="function"?WeakMap:Map,rt=0,_t=null,Ge=null,$e=0,lt=0,oi=null,Ds=!1,ol=!1,Vp=!1,Yr=0,kt=0,Ms=0,Jo=0,kp=0,ai=0,al=0,sc=null,zn=null,Up=!1,vf=0,TE=0,Ef=1/0,Tf=null,Ps=null,nn=0,Vs=null,ll=null,Jr=0,Lp=0,Op=null,SE=null,oc=0,Fp=null;function li(){return(rt&2)!==0&&$e!==0?$e&-$e:te.T!==null?Kp():Da()}function AE(){if(ai===0)if(($e&536870912)===0||je){var r=Ir;Ir<<=1,(Ir&3932160)===0&&(Ir=262144),ai=r}else ai=536870912;return r=ri.current,r!==null&&(r.flags|=32),ai}function Hn(r,o,l){(r===_t&&(lt===2||lt===9)||r.cancelPendingCommit!==null)&&(ul(r,0),ks(r,$e,ai,!1)),Cr(r,l),((rt&2)===0||r!==_t)&&(r===_t&&((rt&2)===0&&(Jo|=l),kt===4&&ks(r,$e,ai,!1)),gr(r))}function xE(r,o,l){if((rt&6)!==0)throw Error(i(327));var c=!l&&(o&127)===0&&(o&r.expiredLanes)===0||Qn(r,o),y=c?S1(r,o):Bp(r,o,!0),v=c;do{if(y===0){ol&&!c&&ks(r,o,0,!1);break}else{if(l=r.current.alternate,v&&!E1(l)){y=Bp(r,o,!1),v=!1;continue}if(y===2){if(v=o,r.errorRecoveryDisabledLanes&v)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;e:{var I=r;y=sc;var U=I.current.memoizedState.isDehydrated;if(U&&(ul(I,x).flags|=256),x=Bp(I,x,!1),x!==2){if(Vp&&!U){I.errorRecoveryDisabledLanes|=v,Jo|=v,y=4;break e}v=zn,zn=y,v!==null&&(zn===null?zn=v:zn.push.apply(zn,v))}y=x}if(v=!1,y!==2)continue}}if(y===1){ul(r,0),ks(r,o,0,!0);break}e:{switch(c=r,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:ks(c,o,ai,!Ds);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=vf+300-sn(),10<y)){if(ks(c,o,ai,!Ds),mi(c,0,!0)!==0)break e;Jr=o,c.timeoutHandle=tT(bE.bind(null,c,l,zn,Tf,Up,o,ai,Jo,al,Ds,v,"Throttled",-0,0),y);break e}bE(c,l,zn,Tf,Up,o,ai,Jo,al,Ds,v,null,-0,0)}}break}while(!0);gr(r)}function bE(r,o,l,c,y,v,x,I,U,j,ie,ae,X,ee){if(r.timeoutHandle=-1,ae=o.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bi},yE(o,v,ae);var Se=(v&62914560)===v?vf-sn():(v&4194048)===v?TE-sn():0;if(Se=rN(ae,Se),Se!==null){Jr=v,r.cancelPendingCommit=Se(PE.bind(null,r,o,v,l,c,y,x,I,U,ie,ae,null,X,ee)),ks(r,v,x,!j);return}}PE(r,o,v,l,c,y,x,I,U)}function E1(r){for(var o=r;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!ni(v(),y))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ks(r,o,l,c){o&=~kp,o&=~Jo,r.suspendedLanes|=o,r.pingedLanes&=~o,c&&(r.warmLanes|=o),c=r.expirationTimes;for(var y=o;0<y;){var v=31-nt(y),x=1<<v;c[v]=-1,y&=~x}l!==0&&Rr(r,l,o)}function Sf(){return(rt&6)===0?(ac(0),!1):!0}function qp(){if(Ge!==null){if(lt===0)var r=Ge.return;else r=Ge,Lr=Fo=null,np(r),Za=null,zu=0,r=Ge;for(;r!==null;)nE(r.alternate,r),r=r.return;Ge=null}}function ul(r,o){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,q1(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Jr=0,qp(),_t=r,Ge=l=kr(r.current,null),$e=o,lt=0,oi=null,Ds=!1,ol=Qn(r,o),Vp=!1,al=ai=kp=Jo=Ms=kt=0,zn=sc=null,Up=!1,(o&8)!==0&&(o|=o&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=o;0<c;){var y=31-nt(c),v=1<<y;o|=r[y],c&=~v}return Yr=o,Gd(),l}function wE(r,o){Le=null,te.H=Xu,o===Wa||o===Qd?(o=G_(),lt=3):o===Hm?(o=G_(),lt=4):lt=o===_p?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,oi=o,Ge===null&&(kt=1,df(r,Ti(o,r.current)))}function IE(){var r=ri.current;return r===null?!0:($e&4194048)===$e?bi===null:($e&62914560)===$e||($e&536870912)!==0?r===bi:!1}function CE(){var r=te.H;return te.H=Xu,r===null?Xu:r}function RE(){var r=te.A;return te.A=_1,r}function Af(){kt=4,Ds||($e&4194048)!==$e&&ri.current!==null||(ol=!0),(Ms&134217727)===0&&(Jo&134217727)===0||_t===null||ks(_t,$e,ai,!1)}function Bp(r,o,l){var c=rt;rt|=2;var y=CE(),v=RE();(_t!==r||$e!==o)&&(Tf=null,ul(r,o)),o=!1;var x=kt;e:do try{if(lt!==0&&Ge!==null){var I=Ge,U=oi;switch(lt){case 8:qp(),x=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(o=!0);var j=lt;if(lt=0,oi=null,cl(r,I,U,j),l&&ol){x=0;break e}break;default:j=lt,lt=0,oi=null,cl(r,I,U,j)}}T1(),x=kt;break}catch(ie){wE(r,ie)}while(!0);return o&&r.shellSuspendCounter++,Lr=Fo=null,rt=c,te.H=y,te.A=v,Ge===null&&(_t=null,$e=0,Gd()),x}function T1(){for(;Ge!==null;)NE(Ge)}function S1(r,o){var l=rt;rt|=2;var c=CE(),y=RE();_t!==r||$e!==o?(Tf=null,Ef=sn()+500,ul(r,o)):ol=Qn(r,o);e:do try{if(lt!==0&&Ge!==null){o=Ge;var v=oi;t:switch(lt){case 1:lt=0,oi=null,cl(r,o,v,1);break;case 2:case 9:if(q_(v)){lt=0,oi=null,DE(o);break}o=function(){lt!==2&&lt!==9||_t!==r||(lt=7),gr(r)},v.then(o,o);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:q_(v)?(lt=0,oi=null,DE(o)):(lt=0,oi=null,cl(r,o,v,7));break;case 5:var x=null;switch(Ge.tag){case 26:x=Ge.memoizedState;case 5:case 27:var I=Ge;if(x?gT(x):I.stateNode.complete){lt=0,oi=null;var U=I.sibling;if(U!==null)Ge=U;else{var j=I.return;j!==null?(Ge=j,xf(j)):Ge=null}break t}}lt=0,oi=null,cl(r,o,v,5);break;case 6:lt=0,oi=null,cl(r,o,v,6);break;case 8:qp(),kt=6;break e;default:throw Error(i(462))}}A1();break}catch(ie){wE(r,ie)}while(!0);return Lr=Fo=null,te.H=c,te.A=y,rt=l,Ge!==null?0:(_t=null,$e=0,Gd(),kt)}function A1(){for(;Ge!==null&&!Ca();)NE(Ge)}function NE(r){var o=eE(r.alternate,r,Yr);r.memoizedProps=r.pendingProps,o===null?xf(r):Ge=o}function DE(r){var o=r,l=o.alternate;switch(o.tag){case 15:case 0:o=Jv(l,o,o.pendingProps,o.type,void 0,$e);break;case 11:o=Jv(l,o,o.pendingProps,o.type.render,o.ref,$e);break;case 5:np(o);default:nE(l,o),o=Ge=R_(o,Yr),o=eE(l,o,Yr)}r.memoizedProps=r.pendingProps,o===null?xf(r):Ge=o}function cl(r,o,l,c){Lr=Fo=null,np(o),Za=null,zu=0;var y=o.return;try{if(d1(r,y,o,l,$e)){kt=1,df(r,Ti(l,r.current)),Ge=null;return}}catch(v){if(y!==null)throw Ge=y,v;kt=1,df(r,Ti(l,r.current)),Ge=null;return}o.flags&32768?(je||c===1?r=!0:ol||($e&536870912)!==0?r=!1:(Ds=r=!0,(c===2||c===9||c===3||c===6)&&(c=ri.current,c!==null&&c.tag===13&&(c.flags|=16384))),ME(o,r)):xf(o)}function xf(r){var o=r;do{if((o.flags&32768)!==0){ME(o,Ds);return}r=o.return;var l=m1(o.alternate,o,Yr);if(l!==null){Ge=l;return}if(o=o.sibling,o!==null){Ge=o;return}Ge=o=r}while(o!==null);kt===0&&(kt=5)}function ME(r,o){do{var l=p1(r.alternate,r);if(l!==null){l.flags&=32767,Ge=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(r=r.sibling,r!==null)){Ge=r;return}Ge=r=l}while(r!==null);kt=6,Ge=null}function PE(r,o,l,c,y,v,x,I,U){r.cancelPendingCommit=null;do bf();while(nn!==0);if((rt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(v=o.lanes|o.childLanes,v|=Rm,vu(r,l,v,x,I,U),r===_t&&(Ge=_t=null,$e=0),ll=o,Vs=r,Jr=l,Lp=v,Op=y,SE=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,I1(Fi,function(){return OE(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=te.T,te.T=null,y=me.p,me.p=2,x=rt,rt|=4;try{g1(r,o,l)}finally{rt=x,me.p=y,te.T=c}}nn=1,VE(),kE(),UE()}}function VE(){if(nn===1){nn=0;var r=Vs,o=ll,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=te.T,te.T=null;var c=me.p;me.p=2;var y=rt;rt|=4;try{mE(o,r);var v=Zp,x=E_(r.containerInfo),I=v.focusedElem,U=v.selectionRange;if(x!==I&&I&&I.ownerDocument&&v_(I.ownerDocument.documentElement,I)){if(U!==null&&xm(I)){var j=U.start,ie=U.end;if(ie===void 0&&(ie=j),"selectionStart"in I)I.selectionStart=j,I.selectionEnd=Math.min(ie,I.value.length);else{var ae=I.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var ee=X.getSelection(),Se=I.textContent.length,Re=Math.min(U.start,Se),yt=U.end===void 0?Re:Math.min(U.end,Se);!ee.extend&&Re>yt&&(x=yt,yt=Re,Re=x);var G=__(I,Re),F=__(I,yt);if(G&&F&&(ee.rangeCount!==1||ee.anchorNode!==G.node||ee.anchorOffset!==G.offset||ee.focusNode!==F.node||ee.focusOffset!==F.offset)){var Y=ae.createRange();Y.setStart(G.node,G.offset),ee.removeAllRanges(),Re>yt?(ee.addRange(Y),ee.extend(F.node,F.offset)):(Y.setEnd(F.node,F.offset),ee.addRange(Y))}}}}for(ae=[],ee=I;ee=ee.parentNode;)ee.nodeType===1&&ae.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ae.length;I++){var re=ae[I];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Lf=!!Wp,Zp=Wp=null}finally{rt=y,me.p=c,te.T=l}}r.current=o,nn=2}}function kE(){if(nn===2){nn=0;var r=Vs,o=ll,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=te.T,te.T=null;var c=me.p;me.p=2;var y=rt;rt|=4;try{uE(r,o.alternate,o)}finally{rt=y,me.p=c,te.T=l}}nn=3}}function UE(){if(nn===4||nn===3){nn=0,Li();var r=Vs,o=ll,l=Jr,c=SE;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?nn=5:(nn=0,ll=Vs=null,LE(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(Ps=null),qi(l),o=o.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Un,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=te.T,y=me.p,me.p=2,te.T=null;try{for(var v=r.onRecoverableError,x=0;x<c.length;x++){var I=c[x];v(I.value,{componentStack:I.stack})}}finally{te.T=o,me.p=y}}(Jr&3)!==0&&bf(),gr(r),y=r.pendingLanes,(l&261930)!==0&&(y&42)!==0?r===Fp?oc++:(oc=0,Fp=r):oc=0,ac(0)}}function LE(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Bu(o)))}function bf(){return VE(),kE(),UE(),OE()}function OE(){if(nn!==5)return!1;var r=Vs,o=Lp;Lp=0;var l=qi(Jr),c=te.T,y=me.p;try{me.p=32>l?32:l,te.T=null,l=Op,Op=null;var v=Vs,x=Jr;if(nn=0,ll=Vs=null,Jr=0,(rt&6)!==0)throw Error(i(331));var I=rt;if(rt|=4,vE(v.current),gE(v,v.current,x,l),rt=I,ac(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Un,v)}catch{}return!0}finally{me.p=y,te.T=c,LE(r,o)}}function FE(r,o,l){o=Ti(l,o),o=yp(r.stateNode,o,2),r=Is(r,o,2),r!==null&&(Cr(r,2),gr(r))}function ut(r,o,l){if(r.tag===3)FE(r,r,l);else for(;o!==null;){if(o.tag===3){FE(o,r,l);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ps===null||!Ps.has(c))){r=Ti(l,r),l=qv(2),c=Is(o,l,2),c!==null&&(Bv(l,c,o,r),Cr(c,2),gr(c));break}}o=o.return}}function Gp(r,o,l){var c=r.pingCache;if(c===null){c=r.pingCache=new v1;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(l)||(Vp=!0,y.add(l),r=x1.bind(null,r,o,l),o.then(r,r))}function x1(r,o,l){var c=r.pingCache;c!==null&&c.delete(o),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,_t===r&&($e&l)===l&&(kt===4||kt===3&&($e&62914560)===$e&&300>sn()-vf?(rt&2)===0&&ul(r,0):kp|=l,al===$e&&(al=0)),gr(r)}function qE(r,o){o===0&&(o=So()),r=Uo(r,o),r!==null&&(Cr(r,o),gr(r))}function b1(r){var o=r.memoizedState,l=0;o!==null&&(l=o.retryLane),qE(r,l)}function w1(r,o){var l=0;switch(r.tag){case 31:case 13:var c=r.stateNode,y=r.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),qE(r,l)}function I1(r,o){return Mt(r,o)}var wf=null,dl=null,zp=!1,If=!1,Hp=!1,Us=0;function gr(r){r!==dl&&r.next===null&&(dl===null?wf=dl=r:dl=dl.next=r),If=!0,zp||(zp=!0,R1())}function ac(r,o){if(!Hp&&If){Hp=!0;do for(var l=!1,c=wf;c!==null;){if(r!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var x=c.suspendedLanes,I=c.pingedLanes;v=(1<<31-nt(42|r)+1)-1,v&=y&~(x&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,HE(c,v))}else v=$e,v=mi(c,c===_t?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Qn(c,v)||(l=!0,HE(c,v));c=c.next}while(l);Hp=!1}}function C1(){BE()}function BE(){If=zp=!1;var r=0;Us!==0&&F1()&&(r=Us);for(var o=sn(),l=null,c=wf;c!==null;){var y=c.next,v=GE(c,o);v===0?(c.next=null,l===null?wf=y:l.next=y,y===null&&(dl=l)):(l=c,(r!==0||(v&3)!==0)&&(If=!0)),c=y}nn!==0&&nn!==5||ac(r),Us!==0&&(Us=0)}function GE(r,o){for(var l=r.suspendedLanes,c=r.pingedLanes,y=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var x=31-nt(v),I=1<<x,U=y[x];U===-1?((I&l)===0||(I&c)!==0)&&(y[x]=Na(I,o)):U<=o&&(r.expiredLanes|=I),v&=~I}if(o=_t,l=$e,l=mi(r,r===o?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,l===0||r===o&&(lt===2||lt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&fi(c),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Qn(r,l)){if(o=l&-l,o===r.callbackPriority)return o;switch(c!==null&&fi(c),qi(l)){case 2:case 8:l=wr;break;case 32:l=Fi;break;case 268435456:l=vo;break;default:l=Fi}return c=zE.bind(null,r),l=Mt(l,c),r.callbackPriority=o,r.callbackNode=l,o}return c!==null&&c!==null&&fi(c),r.callbackPriority=2,r.callbackNode=null,2}function zE(r,o){if(nn!==0&&nn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(bf()&&r.callbackNode!==l)return null;var c=$e;return c=mi(r,r===_t?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(xE(r,c,o),GE(r,sn()),r.callbackNode!=null&&r.callbackNode===l?zE.bind(null,r):null)}function HE(r,o){if(bf())return null;xE(r,o,!0)}function R1(){B1(function(){(rt&6)!==0?Mt(br,C1):BE()})}function Kp(){if(Us===0){var r=Qa;r===0&&(r=jn,jn<<=1,(jn&261888)===0&&(jn=256)),Us=r}return Us}function KE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ka(""+r)}function $E(r,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,r.id&&l.setAttribute("form",r.id),o.parentNode.insertBefore(l,o),r=new FormData(r),l.parentNode.removeChild(l),r}function N1(r,o,l,c,y){if(o==="submit"&&l&&l.stateNode===y){var v=KE((y[we]||null).action),x=c.submitter;x&&(o=(o=x[we]||null)?KE(o.formAction):x.getAttribute("formAction"),o!==null&&(v=o,x=null));var I=new ur("action","action",null,c,y);r.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Us!==0){var U=x?$E(y,x):new FormData(y);dp(l,{pending:!0,data:U,method:y.method,action:v},null,U)}}else typeof v=="function"&&(I.preventDefault(),U=x?$E(y,x):new FormData(y),dp(l,{pending:!0,data:U,method:y.method,action:v},v,U))},currentTarget:y}]})}}for(var $p=0;$p<Cm.length;$p++){var Yp=Cm[$p],D1=Yp.toLowerCase(),M1=Yp[0].toUpperCase()+Yp.slice(1);$i(D1,"on"+M1)}$i(A_,"onAnimationEnd"),$i(x_,"onAnimationIteration"),$i(b_,"onAnimationStart"),$i("dblclick","onDoubleClick"),$i("focusin","onFocus"),$i("focusout","onBlur"),$i(JR,"onTransitionRun"),$i(jR,"onTransitionStart"),$i(QR,"onTransitionCancel"),$i(w_,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lc));function YE(r,o){o=(o&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],y=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var x=c.length-1;0<=x;x--){var I=c[x],U=I.instance,j=I.currentTarget;if(I=I.listener,U!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=j;try{v(y)}catch(ie){Bd(ie)}y.currentTarget=null,v=U}else for(x=0;x<c.length;x++){if(I=c[x],U=I.instance,j=I.currentTarget,I=I.listener,U!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=j;try{v(y)}catch(ie){Bd(ie)}y.currentTarget=null,v=U}}}}function ze(r,o){var l=o[Kt];l===void 0&&(l=o[Kt]=new Set);var c=r+"__bubble";l.has(c)||(JE(o,r,2,!1),l.add(c))}function Jp(r,o,l){var c=0;o&&(c|=4),JE(l,r,c,o)}var Cf="_reactListening"+Math.random().toString(36).slice(2);function jp(r){if(!r[Cf]){r[Cf]=!0,Eu.forEach(function(l){l!=="selectionchange"&&(P1.has(l)||Jp(l,!1,r),Jp(l,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Cf]||(o[Cf]=!0,Jp("selectionchange",!1,o))}}function JE(r,o,l,c){switch(AT(o)){case 2:var y=aN;break;case 8:y=lN;break;default:y=cg}l=y.bind(null,o,l,r),y=void 0,!Co||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?r.addEventListener(o,l,{capture:!0,passive:y}):r.addEventListener(o,l,!0):y!==void 0?r.addEventListener(o,l,{passive:y}):r.addEventListener(o,l,!1)}function Qp(r,o,l,c,y){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var I=c.stateNode.containerInfo;if(I===y)break;if(x===4)for(x=c.return;x!==null;){var U=x.tag;if((U===3||U===4)&&x.stateNode.containerInfo===y)return;x=x.return}for(;I!==null;){if(x=gi(I),x===null)return;if(U=x.tag,U===5||U===6||U===26||U===27){c=v=x;continue e}I=I.parentNode}}c=c.return}ys(function(){var j=v,ie=yi(l),ae=[];e:{var X=I_.get(r);if(X!==void 0){var ee=ur,Se=r;switch(r){case"keypress":if(No(l)===0)break e;case"keydown":case"keyup":ee=Od;break;case"focusin":Se="focus",ee=Mo;break;case"focusout":Se="blur",ee=Mo;break;case"beforeblur":case"afterblur":ee=Mo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=A;break;case A_:case x_:case b_:ee=Dd;break;case w_:ee=C;break;case"scroll":case"scrollend":ee=Mu;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=Md;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Vr;break;case"toggle":case"beforetoggle":ee=Ue}var Re=(o&4)!==0,yt=!Re&&(r==="scroll"||r==="scrollend"),G=Re?X!==null?X+"Capture":null:X;Re=[];for(var F=j,Y;F!==null;){var re=F;if(Y=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Y===null||G===null||(re=Gi(F,G),re!=null&&Re.push(uc(F,re,Y))),yt)break;F=F.return}0<Re.length&&(X=new ee(X,Se,null,l,ie),ae.push({event:X,listeners:Re}))}}if((o&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",ee=r==="mouseout"||r==="pointerout",X&&l!==Ru&&(Se=l.relatedTarget||l.fromElement)&&(gi(Se)||Se[de]))break e;if((ee||X)&&(X=ie.window===ie?ie:(X=ie.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(Se=l.relatedTarget||l.toElement,ee=j,Se=Se?gi(Se):null,Se!==null&&(yt=a(Se),Re=Se.tag,Se!==yt||Re!==5&&Re!==27&&Re!==6)&&(Se=null)):(ee=null,Se=j),ee!==Se)){if(Re=Pu,re="onMouseLeave",G="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Re=Vr,re="onPointerLeave",G="onPointerEnter",F="pointer"),yt=ee==null?X:$t(ee),Y=Se==null?X:$t(Se),X=new Re(re,F+"leave",ee,l,ie),X.target=yt,X.relatedTarget=Y,re=null,gi(ie)===j&&(Re=new Re(G,F+"enter",Se,l,ie),Re.target=Y,Re.relatedTarget=yt,re=Re),yt=re,ee&&Se)t:{for(Re=V1,G=ee,F=Se,Y=0,re=G;re;re=Re(re))Y++;re=0;for(var Ce=F;Ce;Ce=Re(Ce))re++;for(;0<Y-re;)G=Re(G),Y--;for(;0<re-Y;)F=Re(F),re--;for(;Y--;){if(G===F||F!==null&&G===F.alternate){Re=G;break t}G=Re(G),F=Re(F)}Re=null}else Re=null;ee!==null&&jE(ae,X,ee,Re,!1),Se!==null&&yt!==null&&jE(ae,yt,Se,Re,!0)}}e:{if(X=j?$t(j):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var We=f_;else if(c_(X))if(h_)We=KR;else{We=zR;var be=GR}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?j&&Va(j.elementType)&&(We=f_):We=HR;if(We&&(We=We(r,j))){d_(ae,We,l,ie);break e}be&&be(r,X,j),r==="focusout"&&j&&X.type==="number"&&j.memoizedProps.value!=null&&wu(X,"number",X.value)}switch(be=j?$t(j):window,r){case"focusin":(c_(be)||be.contentEditable==="true")&&(Ga=be,bm=j,Ou=null);break;case"focusout":Ou=bm=Ga=null;break;case"mousedown":wm=!0;break;case"contextmenu":case"mouseup":case"dragend":wm=!1,T_(ae,l,ie);break;case"selectionchange":if(YR)break;case"keydown":case"keyup":T_(ae,l,ie)}var Fe;if(it)e:{switch(r){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Ba?Po(r,l)&&(Ye="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ye="onCompositionStart");Ye&&(fr&&l.locale!=="ko"&&(Ba||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Ba&&(Fe=Du()):(lr=ie,Nu="value"in lr?lr.value:lr.textContent,Ba=!0)),be=Rf(j,Ye),0<be.length&&(Ye=new dr(Ye,r,null,l,ie),ae.push({event:Ye,listeners:be}),Fe?Ye.data=Fe:(Fe=qa(l),Fe!==null&&(Ye.data=Fe)))),(Fe=vi?OR(r,l):FR(r,l))&&(Ye=Rf(j,"onBeforeInput"),0<Ye.length&&(be=new dr("onBeforeInput","beforeinput",null,l,ie),ae.push({event:be,listeners:Ye}),be.data=Fe)),N1(ae,r,j,l,ie)}YE(ae,o)})}function uc(r,o,l){return{instance:r,listener:o,currentTarget:l}}function Rf(r,o){for(var l=o+"Capture",c=[];r!==null;){var y=r,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Gi(r,l),y!=null&&c.unshift(uc(r,y,v)),y=Gi(r,o),y!=null&&c.push(uc(r,y,v))),r.tag===3)return c;r=r.return}return[]}function V1(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function jE(r,o,l,c,y){for(var v=o._reactName,x=[];l!==null&&l!==c;){var I=l,U=I.alternate,j=I.stateNode;if(I=I.tag,U!==null&&U===c)break;I!==5&&I!==26&&I!==27||j===null||(U=j,y?(j=Gi(l,v),j!=null&&x.unshift(uc(l,j,U))):y||(j=Gi(l,v),j!=null&&x.push(uc(l,j,U)))),l=l.return}x.length!==0&&r.push({event:o,listeners:x})}var k1=/\r\n?/g,U1=/\u0000|\uFFFD/g;function QE(r){return(typeof r=="string"?r:""+r).replace(k1,`
`).replace(U1,"")}function XE(r,o){return o=QE(o),QE(r)===o}function gt(r,o,l,c,y,v){switch(l){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||Fn(r,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&Fn(r,""+c);break;case"className":ti(r,"class",c);break;case"tabIndex":ti(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(r,l,c);break;case"style":Cu(r,c,v);break;case"data":if(o!=="object"){ti(r,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=ka(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(o!=="input"&&gt(r,o,"name",y.name,y,null),gt(r,o,"formEncType",y.formEncType,y,null),gt(r,o,"formMethod",y.formMethod,y,null),gt(r,o,"formTarget",y.formTarget,y,null)):(gt(r,o,"encType",y.encType,y,null),gt(r,o,"method",y.method,y,null),gt(r,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=ka(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=Bi);break;case"onScroll":c!=null&&ze("scroll",r);break;case"onScrollEnd":c!=null&&ze("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=ka(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":ze("beforetoggle",r),ze("toggle",r),Ma(r,"popover",c);break;case"xlinkActuate":Yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Yt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Yt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Yt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Yt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ma(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Cd.get(l)||l,Ma(r,l,c))}}function Xp(r,o,l,c,y,v){switch(l){case"style":Cu(r,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?Fn(r,c):(typeof c=="number"||typeof c=="bigint")&&Fn(r,""+c);break;case"onScroll":c!=null&&ze("scroll",r);break;case"onScrollEnd":c!=null&&ze("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Bi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tu.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),o=l.slice(2,y?l.length-7:void 0),v=r[we]||null,v=v!=null?v[l]:null,typeof v=="function"&&r.removeEventListener(o,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(o,c,y);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):Ma(r,l,c)}}}function gn(r,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",r),ze("load",r);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var x=l[v];if(x!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:gt(r,o,v,x,l,null)}}y&&gt(r,o,"srcSet",l.srcSet,l,null),c&&gt(r,o,"src",l.src,l,null);return;case"input":ze("invalid",r);var I=v=x=y=null,U=null,j=null;for(c in l)if(l.hasOwnProperty(c)){var ie=l[c];if(ie!=null)switch(c){case"name":y=ie;break;case"type":x=ie;break;case"checked":U=ie;break;case"defaultChecked":j=ie;break;case"value":v=ie;break;case"defaultValue":I=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,o));break;default:gt(r,o,c,ie,l,null)}}bd(r,v,I,U,j,x,y,!1);return;case"select":ze("invalid",r),c=x=v=null;for(y in l)if(l.hasOwnProperty(y)&&(I=l[y],I!=null))switch(y){case"value":v=I;break;case"defaultValue":x=I;break;case"multiple":c=I;default:gt(r,o,y,I,l,null)}o=v,l=x,r.multiple=!!c,o!=null?hs(r,!!c,o,!1):l!=null&&hs(r,!!c,l,!0);return;case"textarea":ze("invalid",r),v=y=c=null;for(x in l)if(l.hasOwnProperty(x)&&(I=l[x],I!=null))switch(x){case"value":c=I;break;case"defaultValue":y=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:gt(r,o,x,I,l,null)}ms(r,c,y,v);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(c=l[U],c!=null))switch(U){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:gt(r,o,U,c,l,null)}return;case"dialog":ze("beforetoggle",r),ze("toggle",r),ze("cancel",r),ze("close",r);break;case"iframe":case"object":ze("load",r);break;case"video":case"audio":for(c=0;c<lc.length;c++)ze(lc[c],r);break;case"image":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"embed":case"source":case"link":ze("error",r),ze("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in l)if(l.hasOwnProperty(j)&&(c=l[j],c!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:gt(r,o,j,c,l,null)}return;default:if(Va(o)){for(ie in l)l.hasOwnProperty(ie)&&(c=l[ie],c!==void 0&&Xp(r,o,ie,c,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(c=l[I],c!=null&&gt(r,o,I,c,l,null))}function L1(r,o,l,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,x=null,I=null,U=null,j=null,ie=null;for(ee in l){var ae=l[ee];if(l.hasOwnProperty(ee)&&ae!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":U=ae;default:c.hasOwnProperty(ee)||gt(r,o,ee,null,c,ae)}}for(var X in c){var ee=c[X];if(ae=l[X],c.hasOwnProperty(X)&&(ee!=null||ae!=null))switch(X){case"type":v=ee;break;case"name":y=ee;break;case"checked":j=ee;break;case"defaultChecked":ie=ee;break;case"value":x=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:ee!==ae&&gt(r,o,X,ee,c,ae)}}Pa(r,x,I,U,j,ie,v,y);return;case"select":ee=x=I=X=null;for(v in l)if(U=l[v],l.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":ee=U;default:c.hasOwnProperty(v)||gt(r,o,v,null,c,U)}for(y in c)if(v=c[y],U=l[y],c.hasOwnProperty(y)&&(v!=null||U!=null))switch(y){case"value":X=v;break;case"defaultValue":I=v;break;case"multiple":x=v;default:v!==U&&gt(r,o,y,v,c,U)}o=I,l=x,c=ee,X!=null?hs(r,!!l,X,!1):!!c!=!!l&&(o!=null?hs(r,!!l,o,!0):hs(r,!!l,l?[]:"",!1));return;case"textarea":ee=X=null;for(I in l)if(y=l[I],l.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:gt(r,o,I,null,c,y)}for(x in c)if(y=c[x],v=l[x],c.hasOwnProperty(x)&&(y!=null||v!=null))switch(x){case"value":X=y;break;case"defaultValue":ee=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&gt(r,o,x,y,c,v)}wd(r,X,ee);return;case"option":for(var Se in l)if(X=l[Se],l.hasOwnProperty(Se)&&X!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":r.selected=!1;break;default:gt(r,o,Se,null,c,X)}for(U in c)if(X=c[U],ee=l[U],c.hasOwnProperty(U)&&X!==ee&&(X!=null||ee!=null))switch(U){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:gt(r,o,U,X,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in l)X=l[Re],l.hasOwnProperty(Re)&&X!=null&&!c.hasOwnProperty(Re)&&gt(r,o,Re,null,c,X);for(j in c)if(X=c[j],ee=l[j],c.hasOwnProperty(j)&&X!==ee&&(X!=null||ee!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,o));break;default:gt(r,o,j,X,c,ee)}return;default:if(Va(o)){for(var yt in l)X=l[yt],l.hasOwnProperty(yt)&&X!==void 0&&!c.hasOwnProperty(yt)&&Xp(r,o,yt,void 0,c,X);for(ie in c)X=c[ie],ee=l[ie],!c.hasOwnProperty(ie)||X===ee||X===void 0&&ee===void 0||Xp(r,o,ie,X,c,ee);return}}for(var G in l)X=l[G],l.hasOwnProperty(G)&&X!=null&&!c.hasOwnProperty(G)&&gt(r,o,G,null,c,X);for(ae in c)X=c[ae],ee=l[ae],!c.hasOwnProperty(ae)||X===ee||X==null&&ee==null||gt(r,o,ae,X,c,ee)}function WE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function O1(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,x=y.initiatorType,I=y.duration;if(v&&I&&WE(x)){for(x=0,I=y.responseEnd,c+=1;c<l.length;c++){var U=l[c],j=U.startTime;if(j>I)break;var ie=U.transferSize,ae=U.initiatorType;ie&&WE(ae)&&(U=U.responseEnd,x+=ie*(U<I?1:(I-j)/(U-j)))}if(--c,o+=8*(v+x)/(y.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Wp=null,Zp=null;function Nf(r){return r.nodeType===9?r:r.ownerDocument}function ZE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eT(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function eg(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var tg=null;function F1(){var r=window.event;return r&&r.type==="popstate"?r===tg?!1:(tg=r,!0):(tg=null,!1)}var tT=typeof setTimeout=="function"?setTimeout:void 0,q1=typeof clearTimeout=="function"?clearTimeout:void 0,nT=typeof Promise=="function"?Promise:void 0,B1=typeof queueMicrotask=="function"?queueMicrotask:typeof nT<"u"?function(r){return nT.resolve(null).then(r).catch(G1)}:tT;function G1(r){setTimeout(function(){throw r})}function Ls(r){return r==="head"}function iT(r,o){var l=o,c=0;do{var y=l.nextSibling;if(r.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){r.removeChild(y),pl(o);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")cc(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,cc(l);for(var v=l.firstChild;v;){var x=v.nextSibling,I=v.nodeName;v[ei]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=x}}else l==="body"&&cc(r.ownerDocument.body);l=y}while(l);pl(o)}function rT(r,o){var l=r;r=0;do{var c=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=c}while(l)}function ng(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ng(l),Dr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function z1(r,o,l,c){for(;r.nodeType===1;){var y=l;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[ei])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=wi(r.nextSibling),r===null)break}return null}function H1(r,o,l){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=wi(r.nextSibling),r===null))return null;return r}function sT(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=wi(r.nextSibling),r===null))return null;return r}function ig(r){return r.data==="$?"||r.data==="$~"}function rg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function K1(r,o){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||l.readyState!=="loading")o();else{var c=function(){o(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function wi(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var sg=null;function oT(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(o===0)return wi(r.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}r=r.nextSibling}return null}function aT(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return r;o--}else l!=="/$"&&l!=="/&"||o++}r=r.previousSibling}return null}function lT(r,o,l){switch(o=Nf(l),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function cc(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Dr(r)}var Ii=new Map,uT=new Set;function Df(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var jr=me.d;me.d={f:$1,r:Y1,D:J1,C:j1,L:Q1,m:X1,X:Z1,S:W1,M:eN};function $1(){var r=jr.f(),o=Sf();return r||o}function Y1(r){var o=Ln(r);o!==null&&o.tag===5&&o.type==="form"?wv(o):jr.r(r)}var fl=typeof document>"u"?null:document;function cT(r,o,l){var c=fl;if(c&&typeof o=="string"&&o){var y=On(o);y='link[rel="'+r+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),uT.has(y)||(uT.add(y),r={rel:r,crossOrigin:l,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),gn(o,"link",r),Ot(o),c.head.appendChild(o)))}}function J1(r){jr.D(r),cT("dns-prefetch",r,null)}function j1(r,o){jr.C(r,o),cT("preconnect",r,o)}function Q1(r,o,l){jr.L(r,o,l);var c=fl;if(c&&r&&o){var y='link[rel="preload"][as="'+On(o)+'"]';o==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+On(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+On(l.imageSizes)+'"]')):y+='[href="'+On(r)+'"]';var v=y;switch(o){case"style":v=hl(r);break;case"script":v=ml(r)}Ii.has(v)||(r=E({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:r,as:o},l),Ii.set(v,r),c.querySelector(y)!==null||o==="style"&&c.querySelector(dc(v))||o==="script"&&c.querySelector(fc(v))||(o=c.createElement("link"),gn(o,"link",r),Ot(o),c.head.appendChild(o)))}}function X1(r,o){jr.m(r,o);var l=fl;if(l&&r){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+On(c)+'"][href="'+On(r)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ml(r)}if(!Ii.has(v)&&(r=E({rel:"modulepreload",href:r},o),Ii.set(v,r),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(fc(v)))return}c=l.createElement("link"),gn(c,"link",r),Ot(c),l.head.appendChild(c)}}}function W1(r,o,l){jr.S(r,o,l);var c=fl;if(c&&r){var y=En(c).hoistableStyles,v=hl(r);o=o||"default";var x=y.get(v);if(!x){var I={loading:0,preload:null};if(x=c.querySelector(dc(v)))I.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},l),(l=Ii.get(v))&&og(r,l);var U=x=c.createElement("link");Ot(U),gn(U,"link",r),U._p=new Promise(function(j,ie){U.onload=j,U.onerror=ie}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Mf(x,o,c)}x={type:"stylesheet",instance:x,count:1,state:I},y.set(v,x)}}}function Z1(r,o){jr.X(r,o);var l=fl;if(l&&r){var c=En(l).hoistableScripts,y=ml(r),v=c.get(y);v||(v=l.querySelector(fc(y)),v||(r=E({src:r,async:!0},o),(o=Ii.get(y))&&ag(r,o),v=l.createElement("script"),Ot(v),gn(v,"link",r),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function eN(r,o){jr.M(r,o);var l=fl;if(l&&r){var c=En(l).hoistableScripts,y=ml(r),v=c.get(y);v||(v=l.querySelector(fc(y)),v||(r=E({src:r,async:!0,type:"module"},o),(o=Ii.get(y))&&ag(r,o),v=l.createElement("script"),Ot(v),gn(v,"link",r),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function dT(r,o,l,c){var y=(y=Ne.current)?Df(y):null;if(!y)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=hl(l.href),l=En(y).hoistableStyles,c=l.get(o),c||(c={type:"style",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=hl(l.href);var v=En(y).hoistableStyles,x=v.get(r);if(x||(y=y.ownerDocument||y,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,x),(v=y.querySelector(dc(r)))&&!v._p&&(x.instance=v,x.state.loading=5),Ii.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ii.set(r,l),v||tN(y,r,l,x.state))),o&&c===null)throw Error(i(528,""));return x}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ml(l),l=En(y).hoistableScripts,c=l.get(o),c||(c={type:"script",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function hl(r){return'href="'+On(r)+'"'}function dc(r){return'link[rel="stylesheet"]['+r+"]"}function fT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function tN(r,o,l,c){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=r.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),gn(o,"link",l),Ot(o),r.head.appendChild(o))}function ml(r){return'[src="'+On(r)+'"]'}function fc(r){return"script[async]"+r}function hT(r,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var c=r.querySelector('style[data-href~="'+On(l.href)+'"]');if(c)return o.instance=c,Ot(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Ot(c),gn(c,"style",y),Mf(c,l.precedence,r),o.instance=c;case"stylesheet":y=hl(l.href);var v=r.querySelector(dc(y));if(v)return o.state.loading|=4,o.instance=v,Ot(v),v;c=fT(l),(y=Ii.get(y))&&og(c,y),v=(r.ownerDocument||r).createElement("link"),Ot(v);var x=v;return x._p=new Promise(function(I,U){x.onload=I,x.onerror=U}),gn(v,"link",c),o.state.loading|=4,Mf(v,l.precedence,r),o.instance=v;case"script":return v=ml(l.src),(y=r.querySelector(fc(v)))?(o.instance=y,Ot(y),y):(c=l,(y=Ii.get(v))&&(c=E({},l),ag(c,y)),r=r.ownerDocument||r,y=r.createElement("script"),Ot(y),gn(y,"link",c),r.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Mf(c,l.precedence,r));return o.instance}function Mf(r,o,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,x=0;x<c.length;x++){var I=c[x];if(I.dataset.precedence===o)v=I;else if(v!==y)break}v?v.parentNode.insertBefore(r,v.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(r,o.firstChild))}function og(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function ag(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Pf=null;function mT(r,o,l){if(Pf===null){var c=new Map,y=Pf=new Map;y.set(l,c)}else y=Pf,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),y=0;y<l.length;y++){var v=l[y];if(!(v[ei]||v[ge]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var x=v.getAttribute(o)||"";x=r+x;var I=c.get(x);I?I.push(v):c.set(x,[v])}}return c}function pT(r,o,l){r=r.ownerDocument||r,r.head.insertBefore(l,o==="title"?r.querySelector("head > title"):null)}function nN(r,o,l){if(l===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function gT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function iN(r,o,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=hl(c.href),v=o.querySelector(dc(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=Vf.bind(r),o.then(r,r)),l.state.loading|=4,l.instance=v,Ot(v);return}v=o.ownerDocument||o,c=fT(c),(y=Ii.get(y))&&og(c,y),v=v.createElement("link"),Ot(v);var x=v;x._p=new Promise(function(I,U){x.onload=I,x.onerror=U}),gn(v,"link",c),l.instance=v}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Vf.bind(r),o.addEventListener("load",l),o.addEventListener("error",l))}}var lg=0;function rN(r,o){return r.stylesheets&&r.count===0&&Uf(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var c=setTimeout(function(){if(r.stylesheets&&Uf(r,r.stylesheets),r.unsuspend){var v=r.unsuspend;r.unsuspend=null,v()}},6e4+o);0<r.imgBytes&&lg===0&&(lg=62500*O1());var y=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Uf(r,r.stylesheets),r.unsuspend)){var v=r.unsuspend;r.unsuspend=null,v()}},(r.imgBytes>lg?50:800)+o);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Vf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var kf=null;function Uf(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,kf=new Map,o.forEach(sN,r),kf=null,Vf.call(r))}function sN(r,o){if(!(o.state.loading&4)){var l=kf.get(r);if(l)var c=l.get(null);else{l=new Map,kf.set(r,l);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var x=y[v];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),c=x)}c&&l.set(null,c)}y=o.instance,x=y.getAttribute("data-precedence"),v=l.get(x)||c,v===c&&l.set(null,y),l.set(x,y),this.count++,c=Vf.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),o.state.loading|=4}}var hc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function oN(r,o,l,c,y,v,x,I,U){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.hiddenUpdates=pi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function yT(r,o,l,c,y,v,x,I,U,j,ie,ae){return r=new oN(r,o,l,x,U,j,ie,ae,I),o=1,v===!0&&(o|=24),v=ii(3,null,null,o),r.current=v,v.stateNode=r,o=Bm(),o.refCount++,r.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:o},Km(v),r}function _T(r){return r?(r=Ka,r):Ka}function vT(r,o,l,c,y,v){y=_T(y),c.context===null?c.context=y:c.pendingContext=y,c=ws(o),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Is(r,c,o),l!==null&&(Hn(l,r,o),Ku(l,r,o))}function ET(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<o?l:o}}function ug(r,o){ET(r,o),(r=r.alternate)&&ET(r,o)}function TT(r){if(r.tag===13||r.tag===31){var o=Uo(r,67108864);o!==null&&Hn(o,r,67108864),ug(r,67108864)}}function ST(r){if(r.tag===13||r.tag===31){var o=li();o=Nr(o);var l=Uo(r,o);l!==null&&Hn(l,r,o),ug(r,o)}}var Lf=!0;function aN(r,o,l,c){var y=te.T;te.T=null;var v=me.p;try{me.p=2,cg(r,o,l,c)}finally{me.p=v,te.T=y}}function lN(r,o,l,c){var y=te.T;te.T=null;var v=me.p;try{me.p=8,cg(r,o,l,c)}finally{me.p=v,te.T=y}}function cg(r,o,l,c){if(Lf){var y=dg(c);if(y===null)Qp(r,o,c,Of,l),xT(r,c);else if(cN(y,r,o,l,c))c.stopPropagation();else if(xT(r,c),o&4&&-1<uN.indexOf(r)){for(;y!==null;){var v=Ln(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var x=hi(v.pendingLanes);if(x!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;x;){var U=1<<31-nt(x);I.entanglements[1]|=U,x&=~U}gr(v),(rt&6)===0&&(Ef=sn()+500,ac(0))}}break;case 31:case 13:I=Uo(v,2),I!==null&&Hn(I,v,2),Sf(),ug(v,2)}if(v=dg(c),v===null&&Qp(r,o,c,Of,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else Qp(r,o,c,null,l)}}function dg(r){return r=yi(r),fg(r)}var Of=null;function fg(r){if(Of=null,r=gi(r),r!==null){var o=a(r);if(o===null)r=null;else{var l=o.tag;if(l===13){if(r=u(o),r!==null)return r;r=null}else if(l===31){if(r=d(o),r!==null)return r;r=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Of=r,null}function AT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oi()){case br:return 2;case wr:return 8;case Fi:case _o:return 32;case vo:return 268435456;default:return 32}default:return 32}}var hg=!1,Os=null,Fs=null,qs=null,mc=new Map,pc=new Map,Bs=[],uN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xT(r,o){switch(r){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":mc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(o.pointerId)}}function gc(r,o,l,c,y,v){return r===null||r.nativeEvent!==v?(r={blockedOn:o,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},o!==null&&(o=Ln(o),o!==null&&TT(o)),r):(r.eventSystemFlags|=c,o=r.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),r)}function cN(r,o,l,c,y){switch(o){case"focusin":return Os=gc(Os,r,o,l,c,y),!0;case"dragenter":return Fs=gc(Fs,r,o,l,c,y),!0;case"mouseover":return qs=gc(qs,r,o,l,c,y),!0;case"pointerover":var v=y.pointerId;return mc.set(v,gc(mc.get(v)||null,r,o,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,pc.set(v,gc(pc.get(v)||null,r,o,l,c,y)),!0}return!1}function bT(r){var o=gi(r.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){r.blockedOn=o,Xn(r.priority,function(){ST(l)});return}}else if(o===31){if(o=d(l),o!==null){r.blockedOn=o,Xn(r.priority,function(){ST(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ff(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var l=dg(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);Ru=c,l.target.dispatchEvent(c),Ru=null}else return o=Ln(l),o!==null&&TT(o),r.blockedOn=l,!1;o.shift()}return!0}function wT(r,o,l){Ff(r)&&l.delete(o)}function dN(){hg=!1,Os!==null&&Ff(Os)&&(Os=null),Fs!==null&&Ff(Fs)&&(Fs=null),qs!==null&&Ff(qs)&&(qs=null),mc.forEach(wT),pc.forEach(wT)}function qf(r,o){r.blockedOn===o&&(r.blockedOn=null,hg||(hg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,dN)))}var Bf=null;function IT(r){Bf!==r&&(Bf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bf===r&&(Bf=null);for(var o=0;o<r.length;o+=3){var l=r[o],c=r[o+1],y=r[o+2];if(typeof c!="function"){if(fg(c||l)===null)continue;break}var v=Ln(l);v!==null&&(r.splice(o,3),o-=3,dp(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function pl(r){function o(U){return qf(U,r)}Os!==null&&qf(Os,r),Fs!==null&&qf(Fs,r),qs!==null&&qf(qs,r),mc.forEach(o),pc.forEach(o);for(var l=0;l<Bs.length;l++){var c=Bs[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Bs.length&&(l=Bs[0],l.blockedOn===null);)bT(l),l.blockedOn===null&&Bs.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],x=y[we]||null;if(typeof v=="function")x||IT(l);else if(x){var I=null;if(v&&v.hasAttribute("formAction")){if(y=v,x=v[we]||null)I=x.formAction;else if(fg(y)!==null)continue}else I=x.action;typeof I=="function"?l[c+1]=I:(l.splice(c,3),c-=3),IT(l)}}}function CT(){function r(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(x){return y=x})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function mg(r){this._internalRoot=r}Gf.prototype.render=mg.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,c=li();vT(l,c,r,o,null,null)},Gf.prototype.unmount=mg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;vT(r.current,2,null,r,null,null),Sf(),o[de]=null}};function Gf(r){this._internalRoot=r}Gf.prototype.unstable_scheduleHydration=function(r){if(r){var o=Da();r={blockedOn:null,target:r,priority:o};for(var l=0;l<Bs.length&&o!==0&&o<Bs[l].priority;l++);Bs.splice(l,0,r),l===0&&bT(r)}};var RT=e.version;if(RT!=="19.2.4")throw Error(i(527,RT,"19.2.4"));me.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=m(o),r=r!==null?_(r):null,r=r===null?null:r.stateNode,r};var fN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zf.isDisabled&&zf.supportsFiber)try{Un=zf.inject(fN),ht=zf}catch{}}return _c.createRoot=function(r,o){if(!s(r))throw Error(i(299));var l=!1,c="",y=Uv,v=Lv,x=Ov;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError)),o=yT(r,1,!1,null,null,l,c,null,y,v,x,CT),r[de]=o.current,jp(r),new mg(o)},_c.hydrateRoot=function(r,o,l){if(!s(r))throw Error(i(299));var c=!1,y="",v=Uv,x=Lv,I=Ov,U=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.formState!==void 0&&(U=l.formState)),o=yT(r,1,!0,o,l??null,c,y,U,v,x,I,CT),o.context=_T(null),l=o.current,c=li(),c=Nr(c),y=ws(c),y.callback=null,Is(l,y,c),l=c,o.current.lanes=l,Cr(o,l),gr(o),r[de]=o.current,jp(r),new Gf(o)},_c.version="19.2.4",_c}var FT;function AN(){if(FT)return yg.exports;FT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),yg.exports=SN(),yg.exports}var xN=AN();const bN=yb(xN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),qT=n=>{const e=IN(n);return e.charAt(0).toUpperCase()+e.slice(1)},_b=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),CN=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=xe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:u,...d},f)=>xe.createElement("svg",{ref:f,...RN,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:_b("lucide",s),...!a&&!CN(d)&&{"aria-hidden":"true"},...d},[...u.map(([m,_])=>xe.createElement(m,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(n,e)=>{const t=xe.forwardRef(({className:i,...s},a)=>xe.createElement(NN,{ref:a,iconNode:e,className:_b(`lucide-${wN(qT(n))}`,`lucide-${n}`,i),...s}));return t.displayName=qT(n),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],vb=Be("arrow-left",DN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],PN=Be("award",MN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],kN=Be("banknote",VN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],BT=Be("bell",UN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ON=Be("book-open",LN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],qN=Be("bot",FN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],GN=Be("check",BN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],GT=Be("chef-hat",zN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gl=Be("chevron-right",HN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Eb=Be("circle-alert",KN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Vy=Be("clock",$N);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Dl=Be("coins",YN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],zT=Be("dollar-sign",JN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Tb=Be("flame",jN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Sb=Be("gift",QN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],WN=Be("history",XN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],HT=Be("house",ZN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ml=Be("loader-circle",eD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nD=Be("log-out",tD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],rD=Be("map-pin",iD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Og=Be("menu",sD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],KT=Be("moon",oD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ab=Be("pen-line",aD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xb=Be("plus",lD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],bb=Be("qr-code",uD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],dD=Be("save",cD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],hD=Be("school",fD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$T=Be("search",mD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],gD=Be("send",pD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hf=Be("shield-check",yD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Pc=Be("shopping-bag",_D);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],wb=Be("sparkles",vD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],YT=Be("sun",ED);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ib=Be("trash-2",TD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],AD=Be("trending-down",SD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],JT=Be("user",xD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],wD=Be("users",bD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ol=Be("x",ID),jT=({item:n,onAdd:e})=>{const t=n.price+5,i=s=>{s.preventDefault(),s.stopPropagation(),e(n)};return S.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col h-full overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group animate-fade-in",children:[S.jsxs("div",{className:"relative h-32 sm:h-40 w-full bg-gray-100 dark:bg-gray-700 overflow-hidden",children:[S.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),S.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[n.isPopular&&S.jsxs("div",{className:"bg-orange-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1 shadow-sm z-10 w-fit",children:[S.jsx(Tb,{size:10,className:"fill-current"}),S.jsx("span",{children:"POPULAR"})]}),S.jsxs("div",{className:"bg-blue-600 text-white text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1 shadow-sm z-10 w-fit",children:[S.jsx(AD,{size:10}),S.jsx("span",{children:"AHORRA 5 UC"})]})]}),S.jsxs("div",{className:"absolute bottom-2 right-2 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm px-2 py-0.5 rounded text-[10px] font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 shadow-sm z-10",children:[S.jsx(Vy,{size:10}),S.jsxs("span",{children:[n.prepTime," min"]})]})]}),S.jsxs("div",{className:"p-3 flex flex-col flex-1 justify-between",children:[S.jsxs("div",{className:"mb-3",children:[S.jsx("div",{className:"flex justify-between items-start gap-2 mb-1",children:S.jsx("h3",{className:"font-bold text-gray-800 dark:text-white text-sm leading-tight line-clamp-2",children:n.name})}),S.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[S.jsxs("span",{className:"text-xs text-gray-400 line-through decoration-red-400 decoration-2",children:[t," UC"]}),S.jsxs("span",{className:"font-bold text-base text-green-700 dark:text-green-400",children:[n.price," UC"]})]}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2 leading-relaxed",children:n.description})]}),S.jsxs("button",{onClick:i,className:"w-full bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/40 text-green-700 dark:text-green-400 active:bg-green-200 border border-green-200 dark:border-green-800 font-bold py-2.5 rounded-lg text-xs flex items-center justify-center gap-2 transition-colors cursor-pointer active:scale-95 transform",children:[S.jsx(xb,{size:14,strokeWidth:3}),"AGREGAR"]})]})]})};var Zt=(n=>(n.ALL="Todos",n.BREAKFAST="Desayuno",n.LUNCH="Comida",n.SNACKS="Snacks",n.DRINKS="Bebidas",n.HEALTHY="Saludable",n))(Zt||{}),Qi=(n=>(n.PENDING="Pendiente",n.PREPARING="Preparando",n.READY="Listo",n.COMPLETED="Entregado",n))(Qi||{}),Qo=(n=>(n.NOW="Lo antes posible",n.RECESS="Recreo (9:30 AM)",n.CUSTOM="Hora Personalizada",n))(Qo||{});const CD=({isOpen:n,onClose:e,items:t,loyaltyPoints:i,onUpdateQuantity:s,onCheckout:a})=>{const[u,d]=xe.useState(Qo.NOW),[f,m]=xe.useState(""),[_,E]=xe.useState(""),[T,w]=xe.useState(!1),N=200,k=100,V=t.reduce((z,J)=>z+J.price*J.quantity,0);let $=0;T&&i>=N&&($=Math.min(V,k));const ne=Math.max(0,V-$);xe.useEffect(()=>{n&&(d(Qo.NOW),m(""),E(""),w(!1))},[n]);const Q=z=>{const J=z.target.value;if(m(J),!J){E("");return}const[R,D]=J.split(":").map(Number);R>11||R===11&&D>0?E("La hora lmite para pedir es 11:00 AM"):R<7?E("La cafetera abre a las 7:00 AM"):E("")},se=z=>{const J=u===Qo.CUSTOM?`Personalizado (${f})`:u;if(u===Qo.CUSTOM){if(!f){E("Selecciona una hora");return}if(_)return}const R=$>0?N:0;a(J,R,$,z)};return n?S.jsxs("div",{className:"fixed inset-0 z-[100] flex justify-end",children:[S.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:e}),S.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-900 h-full shadow-2xl flex flex-col transform transition-transform duration-300 ease-in-out animate-slide-in-right",children:[S.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800 flex items-center justify-between bg-white dark:bg-gray-900 transition-colors",children:[S.jsxs("h2",{className:"text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[S.jsx(Pc,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),"Tu Pedido"]}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition",children:S.jsx(Ol,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"})})]}),S.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-950 transition-colors",children:t.length===0?S.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 space-y-4",children:[S.jsx(Pc,{className:"w-16 h-16 opacity-20"}),S.jsx("p",{children:"Tu carrito est vaco"}),S.jsx("button",{onClick:e,className:"text-green-600 dark:text-green-400 font-medium hover:underline",children:"Ir al men"})]}):t.map(z=>S.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex gap-3 transition-colors",children:[S.jsx("img",{src:z.image,alt:z.name,className:"w-16 h-16 rounded-lg object-cover bg-gray-100 dark:bg-gray-700"}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:z.name}),S.jsxs("p",{className:"text-green-700 dark:text-green-400 font-bold text-sm flex items-center gap-1",children:[S.jsx(Dl,{className:"w-3 h-3"}),z.price*z.quantity," UC"]})]}),S.jsx("div",{className:"flex flex-col items-end justify-between",children:S.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 dark:bg-gray-900 rounded-lg px-2 py-1 border border-gray-200 dark:border-gray-700",children:[S.jsx("button",{onClick:()=>s(z.id,-1),className:"text-gray-500 dark:text-gray-400 hover:text-red-500 disabled:opacity-50",children:"-"}),S.jsx("span",{className:"text-sm font-medium w-4 text-center text-gray-800 dark:text-white",children:z.quantity}),S.jsx("button",{onClick:()=>s(z.id,1),className:"text-gray-500 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400",children:"+"})]})})]},z.id))}),t.length>0&&S.jsxs("div",{className:"p-4 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] transition-colors",children:[S.jsxs("div",{className:"mb-4 p-3 rounded-xl border border-dashed border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-900/10",children:[S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsxs("div",{className:"flex items-center gap-2 text-orange-700 dark:text-orange-400 font-bold text-sm",children:[S.jsx(Sb,{className:"w-4 h-4"}),S.jsx("span",{children:"Aperativo Rewards"})]}),S.jsxs("span",{className:"text-xs font-medium text-orange-600 dark:text-orange-300",children:["Tienes ",i," pts"]})]}),i>=N?S.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[S.jsxs("div",{className:"flex flex-col",children:[S.jsx("span",{className:"text-sm text-gray-800 dark:text-white font-medium group-hover:text-green-600 transition-colors",children:"Canjear comida gratis"}),S.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Usa ",N," pts para -",k," UC"]})]}),S.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[S.jsx("input",{type:"checkbox",className:"sr-only peer",checked:T,onChange:z=>w(z.target.checked)}),S.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-600"})]})]}):S.jsxs("div",{className:"space-y-1.5",children:[S.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[S.jsxs("span",{children:["Meta: ",N," pts"]}),S.jsxs("span",{children:["Faltan ",N-i," pts"]})]}),S.jsx("div",{className:"w-full bg-orange-200 dark:bg-orange-900/30 rounded-full h-2",children:S.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(100,i/N*100)}%`}})}),S.jsx("p",{className:"text-[10px] text-center text-orange-600/80 dark:text-orange-400/80 pt-1",children:"Sigue pidiendo para desbloquear tu comida gratis!"})]})]}),S.jsxs("div",{className:"mb-4",children:[S.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[S.jsx(Vy,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"Para cundo lo quieres?"]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-2",children:Object.values(Qo).map(z=>S.jsx("button",{onClick:()=>d(z),className:`text-xs py-2 px-3 rounded-lg border transition-all text-center ${u===z?"bg-green-50 dark:bg-green-900/30 border-green-600 dark:border-green-400 text-green-800 dark:text-green-300 font-medium":"border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:border-green-200 dark:hover:border-green-800"}`,children:z},z))}),u===Qo.CUSTOM&&S.jsxs("div",{className:"mt-2 animate-fade-in",children:[S.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"Selecciona hora (Mx 11:00 AM):"}),S.jsx("input",{type:"time",value:f,onChange:Q,className:`w-full border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 text-gray-900 dark:text-white bg-white dark:bg-gray-800 ${_?"border-red-300 focus:ring-red-200":"border-gray-300 dark:border-gray-700 focus:ring-green-200"}`}),_&&S.jsxs("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[S.jsx(Eb,{className:"w-3 h-3"}),_]})]})]}),S.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[S.jsxs("div",{className:"flex justify-between items-center text-gray-500 dark:text-gray-400 text-xs",children:[S.jsx("span",{children:"Subtotal"}),S.jsxs("span",{children:[V.toFixed(0)," UC"]})]}),$>0&&S.jsxs("div",{className:"flex justify-between items-center text-orange-600 dark:text-orange-400 font-medium text-xs",children:[S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(wb,{size:12})," Recompensa"]}),S.jsxs("span",{children:["-",$.toFixed(0)," UC"]})]}),S.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100 dark:border-gray-800",children:[S.jsx("span",{className:"text-gray-800 dark:text-white font-bold",children:"Total a Pagar"}),S.jsxs("div",{className:"flex items-center gap-1 text-2xl font-bold text-gray-800 dark:text-white",children:[S.jsx(Dl,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),ne.toFixed(0)," UC"]})]})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsxs("button",{onClick:()=>se("CASH"),disabled:!!_,className:"w-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-800 dark:text-white font-bold py-3.5 rounded-xl border border-gray-200 dark:border-gray-700 transition-all flex flex-col items-center justify-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx(kN,{size:18}),S.jsx("span",{className:"text-sm",children:"Efectivo"})]}),S.jsx("span",{className:"text-[10px] text-gray-500",children:"Pagas al recoger"})]}),S.jsxs("button",{onClick:()=>se("COINS"),disabled:!!_,className:"w-full bg-green-700 hover:bg-green-800 text-white font-bold py-3.5 rounded-xl shadow-lg shadow-green-200 dark:shadow-none active:scale-[0.98] transition-transform flex flex-col items-center justify-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx(Dl,{size:18}),S.jsx("span",{className:"text-sm",children:"Ucol Coins"})]}),S.jsx("span",{className:"text-[10px] text-green-200",children:"Descontar saldo"})]})]})]})]})]}):null},RD=Object.prototype.toString,ND=n=>RD.call(n)==="[object Error]",DD=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function MD(n){if(!(n&&ND(n)&&n.name==="TypeError"&&typeof n.message=="string"))return!1;const{message:t,stack:i}=n;return t==="Load failed"?i===void 0||"__sentry_captured__"in n:t.startsWith("error sending request for url")?!0:DD.has(t)}function PD(n){if(typeof n=="number"){if(n<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(n))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(n!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Kf(n,e,{min:t=0,allowInfinity:i=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${n}\` to be a number${i?" or Infinity":""}.`);if(!i&&!Number.isFinite(e))throw new TypeError(`Expected \`${n}\` to be a finite number.`);if(e<t)throw new TypeError(`Expected \`${n}\` to be  ${t}.`)}}class Cb extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function VD(n,e){const t=Math.max(1,n+1),i=e.randomize?Math.random()+1:1;let s=Math.round(i*e.minTimeout*e.factor**(t-1));return s=Math.min(s,e.maxTimeout),s}function QT(n,e){return Number.isFinite(e)?e-(performance.now()-n):e}async function kD({error:n,attemptNumber:e,retriesConsumed:t,startTime:i,options:s}){var w,N,k,V;const a=n instanceof Error?n:new TypeError(`Non-error was thrown: "${n}". You should only throw errors.`);if(a instanceof Cb)throw a.originalError;const u=Number.isFinite(s.retries)?Math.max(0,s.retries-t):s.retries,d=s.maxRetryTime??Number.POSITIVE_INFINITY,f=Object.freeze({error:a,attemptNumber:e,retriesLeft:u,retriesConsumed:t});if(await s.onFailedAttempt(f),QT(i,d)<=0)throw a;const m=await s.shouldConsumeRetry(f),_=QT(i,d);if(_<=0||u<=0)throw a;if(a instanceof TypeError&&!MD(a)){if(m)throw a;return(w=s.signal)==null||w.throwIfAborted(),!1}if(!await s.shouldRetry(f))throw a;if(!m)return(N=s.signal)==null||N.throwIfAborted(),!1;const E=VD(t,s),T=Math.min(E,_);return(k=s.signal)==null||k.throwIfAborted(),T>0&&await new Promise(($,ne)=>{var z,J;const Q=()=>{var R;clearTimeout(se),(R=s.signal)==null||R.removeEventListener("abort",Q),ne(s.signal.reason)},se=setTimeout(()=>{var R;(R=s.signal)==null||R.removeEventListener("abort",Q),$()},T);s.unref&&((z=se.unref)==null||z.call(se)),(J=s.signal)==null||J.addEventListener("abort",Q,{once:!0})}),(V=s.signal)==null||V.throwIfAborted(),!0}async function UD(n,e={}){var a,u,d;if(e={...e},PD(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),Kf("factor",e.factor,{min:0,allowInfinity:!1}),Kf("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Kf("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Kf("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(a=e.signal)==null||a.throwIfAborted();let t=0,i=0;const s=performance.now();for(;!Number.isFinite(e.retries)||i<=e.retries;){t++;try{(u=e.signal)==null||u.throwIfAborted();const f=await n(t);return(d=e.signal)==null||d.throwIfAborted(),f}catch(f){await kD({error:f,attemptNumber:t,retriesConsumed:i,startTime:s,options:e})&&i++}}throw new Error("Retry attempts exhausted without throwing an error.")}var LD={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let OD,FD;function qD(){return{geminiUrl:OD,vertexUrl:FD}}function BD(n,e,t,i){var s,a;if(!(n!=null&&n.baseUrl)){const u=qD();return e?(s=u.vertexUrl)!==null&&s!==void 0?s:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ns{}function _e(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const f=n[d];if(Array.isArray(t))for(let m=0;m<f.length;m++){const _=f[m];p(_,e.slice(a+1),t[m])}else for(const m of f)p(m,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const f=n[d];p(f[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],s=n[i];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function h(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>h(d,e.slice(i+1),t)):t}else return t}else n=n[s]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function GD(n,e){for(const[t,i]of Object.entries(e)){const s=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let f=0;f<s.length;f++)if(s[f]==="*"){d=f;break}if(d!==-1&&a.length>d)for(let f=d;f<a.length;f++){const m=a[f];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Fg(n,s,a,0,u)}}function Fg(n,e,t,i,s){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const f of d[u])Fg(f,e,t,i+1,s)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!s.has(m)),f={};for(const m of d)f[m]=u[m];for(const[m,_]of Object.entries(f)){const E=[];for(const T of t.slice(i))T==="*"?E.push(m):E.push(T);p(u,E,_)}for(const m of d)delete u[m]}}else{const u=n;a in u&&Fg(u[a],e,t,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ky(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zD(n){const e={},t=h(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=h(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function HD(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const i=h(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const a=h(n,["error"]);a!=null&&p(e,["error"],a);const u=h(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],$D(u)),e}function KD(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const i=h(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const a=h(n,["error"]);a!=null&&p(e,["error"],a);const u=h(n,["response"]);return u!=null&&p(e,["response"],YD(u)),e}function $D(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>JD(u))),p(e,["generatedVideos"],a)}const i=h(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const s=h(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function YD(n){const e={},t=h(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>jD(u))),p(e,["generatedVideos"],a)}const i=h(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const s=h(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function JD(n){const e={},t=h(n,["video"]);return t!=null&&p(e,["video"],tM(t)),e}function jD(n){const e={},t=h(n,["_self"]);return t!=null&&p(e,["video"],nM(t)),e}function QD(n){const e={},t=h(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function XD(n){const e={},t=h(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function WD(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const i=h(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const a=h(n,["error"]);a!=null&&p(e,["error"],a);const u=h(n,["response"]);return u!=null&&p(e,["response"],ZD(u)),e}function ZD(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["parent"]);i!=null&&p(e,["parent"],i);const s=h(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function Rb(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const i=h(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const a=h(n,["error"]);a!=null&&p(e,["error"],a);const u=h(n,["response"]);return u!=null&&p(e,["response"],eM(u)),e}function eM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["parent"]);i!=null&&p(e,["parent"],i);const s=h(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function tM(n){const e={},t=h(n,["uri"]);t!=null&&p(e,["uri"],t);const i=h(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],ky(i));const s=h(n,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function nM(n){const e={},t=h(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=h(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],ky(i));const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var XT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(XT||(XT={}));var WT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(WT||(WT={}));var ZT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(ZT||(ZT={}));var Js;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Js||(Js={}));var eS;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(eS||(eS={}));var tS;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(tS||(tS={}));var nS;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(nS||(nS={}));var iS;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(iS||(iS={}));var rS;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(rS||(rS={}));var sS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(sS||(sS={}));var oS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(oS||(oS={}));var aS;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(aS||(aS={}));var lS;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(lS||(lS={}));var uS;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(uS||(uS={}));var cS;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(cS||(cS={}));var dS;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(dS||(dS={}));var fS;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(fS||(fS={}));var hS;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(hS||(hS={}));var mS;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(mS||(mS={}));var pS;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(pS||(pS={}));var gS;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(gS||(gS={}));var yh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(yh||(yh={}));var yS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yS||(yS={}));var _S;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(_S||(_S={}));var vS;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(vS||(vS={}));var qg;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(qg||(qg={}));var ES;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ES||(ES={}));var TS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(TS||(TS={}));var Bg;(function(n){n.COLLECTION="COLLECTION"})(Bg||(Bg={}));var SS;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(SS||(SS={}));var AS;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(AS||(AS={}));var xS;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(xS||(xS={}));var bS;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(bS||(bS={}));var wS;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(wS||(wS={}));var IS;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(IS||(IS={}));var CS;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(CS||(CS={}));var RS;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(RS||(RS={}));var NS;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(NS||(NS={}));var DS;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(DS||(DS={}));var MS;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(MS||(MS={}));var PS;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(PS||(PS={}));var VS;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(VS||(VS={}));var kS;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(kS||(kS={}));var US;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(US||(US={}));var LS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(LS||(LS={}));var OS;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(OS||(OS={}));var FS;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(FS||(FS={}));var qS;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(qS||(qS={}));var BS;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(BS||(BS={}));var GS;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(GS||(GS={}));var zS;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(zS||(zS={}));var HS;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(HS||(HS={}));var KS;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(KS||(KS={}));var $S;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($S||($S={}));var YS;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(YS||(YS={}));var JS;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(JS||(JS={}));var Rl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Rl||(Rl={}));class Gg{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class vc{get text(){var e,t,i,s,a,u,d,f;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",_=!1;const E=[];for(const T of(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[w,N]of Object.entries(T))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(N!==null||N!==void 0)&&E.push(w);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;_=!0,m+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?m:void 0}get data(){var e,t,i,s,a,u,d,f;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const _=[];for(const E of(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[T,w]of Object.entries(E))T!=="inlineData"&&(w!==null||w!==void 0)&&_.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,i,s,a,u,d,f;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,i,s,a,u,d,f,m;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,i,s,a,u,d,f,m;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.output}}class jS{}class QS{}class iM{}class rM{}class sM{}class oM{}class XS{}class WS{}class ZS{}class aM{}class _h{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new _h;let s;const a=e;return t?s=KD(a):s=HD(a),Object.assign(i,s),i}}class eA{}class tA{}class nA{}class iA{}class lM{}class uM{}class cM{}class Uy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Uy,a=WD(e);return Object.assign(i,a),i}}class dM{}class fM{}class hM{}class mM{}class rA{}class pM{get text(){var e,t,i;let s="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,m]of Object.entries(d))f!=="text"&&f!=="thought"&&m!==null&&u.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,s+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,t,i;let s="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(u))d!=="inlineData"&&f!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(s+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class gM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ly{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ly,a=Rb(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Nb(n,e){const t=tt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Db(n){return Array.isArray(n)?n.map(e=>vh(e)):[vh(n)]}function vh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Mb(n){const e=vh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Pb(n){const e=vh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function sA(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Vb(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>sA(e)):[sA(n)]}function zg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function oA(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function aA(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function bn(n){if(n==null)throw new Error("ContentUnion is required");return zg(n)?n:{role:"user",parts:Vb(n)}}function Oy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=bn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=bn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>bn(t)):[bn(e)]}function Ri(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(oA(n)||aA(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[bn(n)]}const e=[],t=[],i=zg(n[0]);for(const s of n){const a=zg(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(oA(s)||aA(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return i||e.push({role:"user",parts:Vb(t)}),e}function yM(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Js).includes(t[0].toUpperCase())?t[0].toUpperCase():Js.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Js).includes(i.toUpperCase())?i.toUpperCase():Js.TYPE_UNSPECIFIED})}}function Pl(n){const e={},t=["items"],i=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&yM(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Js).includes(d.toUpperCase())?d.toUpperCase():Js.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Pl(d);else if(i.includes(u)){const f=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}f.push(Pl(m))}e[u]=f}else if(s.includes(u)){const f={};for(const[m,_]of Object.entries(d))f[m]=Pl(_);e[u]=f}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Fy(n){return Pl(n)}function qy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function By(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function lu(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Pl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Pl(e.response));return n}function uu(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function _M(n,e,t,i=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function is(n,e){if(typeof e!="string")throw new Error("name must be a string");return _M(n,e,"cachedContents")}function kb(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function co(n){return ky(n)}function vM(n){return n!=null&&typeof n=="object"&&"name"in n}function EM(n){return n!=null&&typeof n=="object"&&"video"in n}function TM(n){return n!=null&&typeof n=="object"&&"uri"in n}function Ub(n){var e;let t;if(vM(n)&&(t=n.name),!(TM(n)&&(t=n.uri,t===void 0))&&!(EM(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Lb(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Ob(n){for(const e of["models","tunedModels","publisherModels"])if(SM(n,e))return n[e];return[]}function SM(n,e){return n!==null&&typeof n=="object"&&e in n}function AM(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function xM(n,e={}){const t=[],i=new Set;for(const s of n){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=AM(s,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function Fb(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function bM(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function qb(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let a=!1;for(const u of s){if(typeof u!="object"||u===null)continue;const f=u.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function cu(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Bb(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wM(n){const e={},t=h(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=h(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>o2(u))),p(e,["inlinedResponses"],a)}const s=h(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function IM(n){const e={},t=h(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=h(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const s=h(n,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function CM(n){const e={},t=h(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=h(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const s=h(n,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function rh(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const i=h(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const s=h(n,["metadata","state"]);s!=null&&p(e,["state"],Bb(s));const a=h(n,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=h(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=h(n,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const f=h(n,["metadata","model"]);f!=null&&p(e,["model"],f);const m=h(n,["metadata","output"]);return m!=null&&p(e,["dest"],wM(qb(m))),e}function Hg(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const i=h(n,["displayName"]);i!=null&&p(e,["displayName"],i);const s=h(n,["state"]);s!=null&&p(e,["state"],Bb(s));const a=h(n,["error"]);a!=null&&p(e,["error"],a);const u=h(n,["createTime"]);u!=null&&p(e,["createTime"],u);const d=h(n,["startTime"]);d!=null&&p(e,["startTime"],d);const f=h(n,["endTime"]);f!=null&&p(e,["endTime"],f);const m=h(n,["updateTime"]);m!=null&&p(e,["updateTime"],m);const _=h(n,["model"]);_!=null&&p(e,["model"],_);const E=h(n,["inputConfig"]);E!=null&&p(e,["src"],RM(E));const T=h(n,["outputConfig"]);T!=null&&p(e,["dest"],IM(qb(T)));const w=h(n,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function RM(n){const e={},t=h(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=h(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const s=h(n,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function NM(n,e){const t={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=h(e,["fileName"]);i!=null&&p(t,["fileName"],i);const s=h(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>s2(n,u))),p(t,["requests","requests"],a)}return t}function DM(n){const e={},t=h(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=h(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const s=h(n,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function MM(n){const e={},t=h(n,["data"]);if(t!=null&&p(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function PM(n,e){const t={},i=h(e,["name"]);return i!=null&&p(t,["_url","name"],cu(n,i)),t}function VM(n,e){const t={},i=h(e,["name"]);return i!=null&&p(t,["_url","name"],cu(n,i)),t}function kM(n){const e={},t=h(n,["content"]);t!=null&&p(e,["content"],t);const i=h(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],UM(i));const s=h(n,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const a=h(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=h(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=h(n,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const f=h(n,["index"]);f!=null&&p(e,["index"],f);const m=h(n,["logprobsResult"]);m!=null&&p(e,["logprobsResult"],m);const _=h(n,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(w=>w)),p(e,["safetyRatings"],T)}const E=h(n,["urlContextMetadata"]);return E!=null&&p(e,["urlContextMetadata"],E),e}function UM(n){const e={},t=h(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>s)),p(e,["citations"],i)}return e}function Gb(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>h2(a))),p(e,["parts"],s)}const i=h(n,["role"]);return i!=null&&p(e,["role"],i),e}function LM(n,e){const t={},i=h(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function OM(n,e){const t={},i=h(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const s=h(n,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],CM(bM(s))),t}function lA(n,e){const t={},i=h(e,["model"]);i!=null&&p(t,["_url","model"],tt(n,i));const s=h(e,["src"]);s!=null&&p(t,["batch","inputConfig"],NM(n,Fb(n,s)));const a=h(e,["config"]);return a!=null&&LM(a,t),t}function FM(n,e){const t={},i=h(e,["model"]);i!=null&&p(t,["model"],tt(n,i));const s=h(e,["src"]);s!=null&&p(t,["inputConfig"],DM(Fb(n,s)));const a=h(e,["config"]);return a!=null&&OM(a,t),t}function qM(n,e){const t={},i=h(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function BM(n,e){const t={},i=h(e,["model"]);i!=null&&p(t,["_url","model"],tt(n,i));const s=h(e,["src"]);s!=null&&p(t,["batch","inputConfig"],JM(n,s));const a=h(e,["config"]);return a!=null&&qM(a,t),t}function GM(n,e){const t={},i=h(e,["name"]);return i!=null&&p(t,["_url","name"],cu(n,i)),t}function zM(n,e){const t={},i=h(e,["name"]);return i!=null&&p(t,["_url","name"],cu(n,i)),t}function HM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["name"]);i!=null&&p(e,["name"],i);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const a=h(n,["error"]);return a!=null&&p(e,["error"],a),e}function KM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["name"]);i!=null&&p(e,["name"],i);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const a=h(n,["error"]);return a!=null&&p(e,["error"],a),e}function $M(n,e){const t={},i=h(e,["contents"]);if(i!=null){let a=Oy(n,i);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["requests[]","request","content"],a)}const s=h(e,["config"]);return s!=null&&(p(t,["_self"],YM(s,t)),GD(t,{"requests[].*":"requests[].request.*"})),t}function YM(n,e){const t={},i=h(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const s=h(n,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const a=h(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function JM(n,e){const t={},i=h(e,["fileName"]);i!=null&&p(t,["file_name"],i);const s=h(e,["inlinedRequests"]);return s!=null&&p(t,["requests"],$M(n,s)),t}function jM(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=h(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function QM(n){const e={},t=h(n,["id"]);t!=null&&p(e,["id"],t);const i=h(n,["args"]);i!=null&&p(e,["args"],i);const s=h(n,["name"]);if(s!=null&&p(e,["name"],s),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XM(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=h(n,["mode"]);if(i!=null&&p(e,["mode"],i),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function WM(n,e,t){const i={},s=h(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],Gb(bn(s)));const a=h(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=h(e,["topP"]);u!=null&&p(i,["topP"],u);const d=h(e,["topK"]);d!=null&&p(i,["topK"],d);const f=h(e,["candidateCount"]);f!=null&&p(i,["candidateCount"],f);const m=h(e,["maxOutputTokens"]);m!=null&&p(i,["maxOutputTokens"],m);const _=h(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const E=h(e,["responseLogprobs"]);E!=null&&p(i,["responseLogprobs"],E);const T=h(e,["logprobs"]);T!=null&&p(i,["logprobs"],T);const w=h(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const N=h(e,["frequencyPenalty"]);N!=null&&p(i,["frequencyPenalty"],N);const k=h(e,["seed"]);k!=null&&p(i,["seed"],k);const V=h(e,["responseMimeType"]);V!=null&&p(i,["responseMimeType"],V);const $=h(e,["responseSchema"]);$!=null&&p(i,["responseSchema"],Fy($));const ne=h(e,["responseJsonSchema"]);if(ne!=null&&p(i,["responseJsonSchema"],ne),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=h(e,["safetySettings"]);if(t!==void 0&&Q!=null){let P=Q;Array.isArray(P)&&(P=P.map(Ve=>m2(Ve))),p(t,["safetySettings"],P)}const se=h(e,["tools"]);if(t!==void 0&&se!=null){let P=uu(se);Array.isArray(P)&&(P=P.map(Ve=>g2(lu(Ve)))),p(t,["tools"],P)}const z=h(e,["toolConfig"]);if(t!==void 0&&z!=null&&p(t,["toolConfig"],p2(z)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=h(e,["cachedContent"]);t!==void 0&&J!=null&&p(t,["cachedContent"],is(n,J));const R=h(e,["responseModalities"]);R!=null&&p(i,["responseModalities"],R);const D=h(e,["mediaResolution"]);D!=null&&p(i,["mediaResolution"],D);const M=h(e,["speechConfig"]);if(M!=null&&p(i,["speechConfig"],qy(M)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=h(e,["thinkingConfig"]);O!=null&&p(i,["thinkingConfig"],O);const L=h(e,["imageConfig"]);L!=null&&p(i,["imageConfig"],r2(L));const B=h(e,["enableEnhancedCivicAnswers"]);if(B!=null&&p(i,["enableEnhancedCivicAnswers"],B),h(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function ZM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>kM(m))),p(e,["candidates"],f)}const s=h(n,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const a=h(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=h(n,["responseId"]);u!=null&&p(e,["responseId"],u);const d=h(n,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function e2(n,e){const t={},i=h(e,["name"]);return i!=null&&p(t,["_url","name"],cu(n,i)),t}function t2(n,e){const t={},i=h(e,["name"]);return i!=null&&p(t,["_url","name"],cu(n,i)),t}function n2(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function i2(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function r2(n){const e={},t=h(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=h(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),h(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function s2(n,e){const t={},i=h(e,["model"]);i!=null&&p(t,["request","model"],tt(n,i));const s=h(e,["contents"]);if(s!=null){let d=Ri(s);Array.isArray(d)&&(d=d.map(f=>Gb(f))),p(t,["request","contents"],d)}const a=h(e,["metadata"]);a!=null&&p(t,["metadata"],a);const u=h(e,["config"]);return u!=null&&p(t,["request","generationConfig"],WM(n,u,h(t,["request"],{}))),t}function o2(n){const e={},t=h(n,["response"]);t!=null&&p(e,["response"],ZM(t));const i=h(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=h(n,["error"]);return s!=null&&p(e,["error"],s),e}function a2(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=h(n,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function l2(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=h(n,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const a=h(n,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),t}function u2(n){const e={},t=h(n,["config"]);return t!=null&&a2(t,e),e}function c2(n){const e={},t=h(n,["config"]);return t!=null&&l2(t,e),e}function d2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=h(n,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>rh(u))),p(e,["batchJobs"],a)}return e}function f2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=h(n,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Hg(u))),p(e,["batchJobs"],a)}return e}function h2(n){const e={},t=h(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=h(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const s=h(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const a=h(n,["fileData"]);a!=null&&p(e,["fileData"],jM(a));const u=h(n,["functionCall"]);u!=null&&p(e,["functionCall"],QM(u));const d=h(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const f=h(n,["inlineData"]);f!=null&&p(e,["inlineData"],MM(f));const m=h(n,["text"]);m!=null&&p(e,["text"],m);const _=h(n,["thought"]);_!=null&&p(e,["thought"],_);const E=h(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const T=h(n,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function m2(n){const e={},t=h(n,["category"]);if(t!=null&&p(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=h(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function p2(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=h(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],XM(i)),e}function g2(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=h(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const s=h(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=h(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],n2(u));const d=h(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],i2(d));const f=h(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const m=h(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Wr||(Wr={}));class Sa{constructor(e,t,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,s)}init(e,t,i){var s,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(s=u.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y2 extends ns{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Sa(Wr.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=lA(this.apiClient,e),i=t._url,s=_e("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,f=d.requests,m=[];for(const _ of f){const E=Object.assign({},_);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=T,E.request=w}m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(u)i.dest=`${u}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=FM(this.apiClient,e);return d=_e("batchPredictionJobs",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Hg(_))}else{const m=lA(this.apiClient,e);return d=_e("{model}:batchGenerateContent",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>rh(_))}}async createEmbeddingsInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BM(this.apiClient,e);return a=_e("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>rh(f))}}async get(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=t2(this.apiClient,e);return d=_e("batchPredictionJobs/{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Hg(_))}else{const m=e2(this.apiClient,e);return d=_e("batches/{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>rh(_))}}async cancel(e){var t,i,s,a;let u="",d={};if(this.apiClient.isVertexAI()){const f=VM(this.apiClient,e);u=_e("batchPredictionJobs/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=PM(this.apiClient,e);u=_e("batches/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=c2(e);return d=_e("batchPredictionJobs",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=f2(_),T=new rA;return Object.assign(T,E),T})}else{const m=u2(e);return d=_e("batches",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=d2(_),T=new rA;return Object.assign(T,E),T})}}async delete(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=zM(this.apiClient,e);return d=_e("batchPredictionJobs/{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>KM(_))}else{const m=GM(this.apiClient,e);return d=_e("batches/{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>HM(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _2(n){const e={},t=h(n,["data"]);if(t!=null&&p(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function uA(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>B2(a))),p(e,["parts"],s)}const i=h(n,["role"]);return i!=null&&p(e,["role"],i),e}function v2(n,e){const t={},i=h(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const s=h(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const a=h(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=h(n,["contents"]);if(e!==void 0&&u!=null){let _=Ri(u);Array.isArray(_)&&(_=_.map(E=>uA(E))),p(e,["contents"],_)}const d=h(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],uA(bn(d)));const f=h(n,["tools"]);if(e!==void 0&&f!=null){let _=f;Array.isArray(_)&&(_=_.map(E=>z2(E))),p(e,["tools"],_)}const m=h(n,["toolConfig"]);if(e!==void 0&&m!=null&&p(e,["toolConfig"],G2(m)),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function E2(n,e){const t={},i=h(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const s=h(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const a=h(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=h(n,["contents"]);if(e!==void 0&&u!=null){let E=Ri(u);Array.isArray(E)&&(E=E.map(T=>T)),p(e,["contents"],E)}const d=h(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],bn(d));const f=h(n,["tools"]);if(e!==void 0&&f!=null){let E=f;Array.isArray(E)&&(E=E.map(T=>H2(T))),p(e,["tools"],E)}const m=h(n,["toolConfig"]);e!==void 0&&m!=null&&p(e,["toolConfig"],m);const _=h(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function T2(n,e){const t={},i=h(e,["model"]);i!=null&&p(t,["model"],Nb(n,i));const s=h(e,["config"]);return s!=null&&v2(s,t),t}function S2(n,e){const t={},i=h(e,["model"]);i!=null&&p(t,["model"],Nb(n,i));const s=h(e,["config"]);return s!=null&&E2(s,t),t}function A2(n,e){const t={},i=h(e,["name"]);return i!=null&&p(t,["_url","name"],is(n,i)),t}function x2(n,e){const t={},i=h(e,["name"]);return i!=null&&p(t,["_url","name"],is(n,i)),t}function b2(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function w2(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function I2(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=h(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function C2(n){const e={},t=h(n,["id"]);t!=null&&p(e,["id"],t);const i=h(n,["args"]);i!=null&&p(e,["args"],i);const s=h(n,["name"]);if(s!=null&&p(e,["name"],s),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function R2(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=h(n,["mode"]);if(i!=null&&p(e,["mode"],i),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function N2(n){const e={},t=h(n,["description"]);t!=null&&p(e,["description"],t);const i=h(n,["name"]);i!=null&&p(e,["name"],i);const s=h(n,["parameters"]);s!=null&&p(e,["parameters"],s);const a=h(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=h(n,["response"]);u!=null&&p(e,["response"],u);const d=h(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function D2(n,e){const t={},i=h(e,["name"]);return i!=null&&p(t,["_url","name"],is(n,i)),t}function M2(n,e){const t={},i=h(e,["name"]);return i!=null&&p(t,["_url","name"],is(n,i)),t}function P2(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function V2(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function k2(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=h(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function U2(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=h(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function L2(n){const e={},t=h(n,["config"]);return t!=null&&k2(t,e),e}function O2(n){const e={},t=h(n,["config"]);return t!=null&&U2(t,e),e}function F2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=h(n,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function q2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=h(n,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function B2(n){const e={},t=h(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=h(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const s=h(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const a=h(n,["fileData"]);a!=null&&p(e,["fileData"],I2(a));const u=h(n,["functionCall"]);u!=null&&p(e,["functionCall"],C2(u));const d=h(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const f=h(n,["inlineData"]);f!=null&&p(e,["inlineData"],_2(f));const m=h(n,["text"]);m!=null&&p(e,["text"],m);const _=h(n,["thought"]);_!=null&&p(e,["thought"],_);const E=h(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const T=h(n,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function G2(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=h(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],R2(i)),e}function z2(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=h(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const s=h(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=h(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],P2(u));const d=h(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],V2(d));const f=h(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const m=h(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function H2(n){const e={},t=h(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=h(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=h(n,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const a=h(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=h(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>N2(T))),p(e,["functionDeclarations"],E)}const d=h(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const f=h(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],f);const m=h(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const _=h(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function K2(n,e){const t={},i=h(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const s=h(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function $2(n,e){const t={},i=h(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const s=h(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function Y2(n,e){const t={},i=h(e,["name"]);i!=null&&p(t,["_url","name"],is(n,i));const s=h(e,["config"]);return s!=null&&K2(s,t),t}function J2(n,e){const t={},i=h(e,["name"]);i!=null&&p(t,["_url","name"],is(n,i));const s=h(e,["config"]);return s!=null&&$2(s,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j2 extends ns{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Sa(Wr.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=S2(this.apiClient,e);return d=_e("cachedContents",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=T2(this.apiClient,e);return d=_e("cachedContents",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=M2(this.apiClient,e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=D2(this.apiClient,e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=x2(this.apiClient,e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=w2(_),T=new nA;return Object.assign(T,E),T})}else{const m=A2(this.apiClient,e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=b2(_),T=new nA;return Object.assign(T,E),T})}}async update(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=J2(this.apiClient,e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=Y2(this.apiClient,e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=O2(e);return d=_e("cachedContents",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=q2(_),T=new iA;return Object.assign(T,E),T})}else{const m=L2(e);return d=_e("cachedContents",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=F2(_),T=new iA;return Object.assign(T,E),T})}}}function Eh(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function cA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(n){return this instanceof Pe?(this.v=n,this):new Pe(n)}function Xi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(w){return function(N){return Promise.resolve(N).then(w,E)}}function d(w,N){i[w]&&(s[w]=function(k){return new Promise(function(V,$){a.push([w,k,V,$])>1||f(w,k)})},N&&(s[w]=N(s[w])))}function f(w,N){try{m(i[w](N))}catch(k){T(a[0][3],k)}}function m(w){w.value instanceof Pe?Promise.resolve(w.value.v).then(_,E):T(a[0][2],w)}function _(w){f("next",w)}function E(w){f("throw",w)}function T(w,N){w(N),a.shift(),a.length&&f(a[0][0],a[0][1])}}function Wi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof cA=="function"?cA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,f){u=n[a](u),s(d,f,u.done,u.value)})}}function s(a,u,d,f){Promise.resolve(f).then(function(m){a({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q2(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:zb(t)}function zb(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function X2(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function dA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const s=[];let a=!0;for(;i<t&&n[i].role==="model";)s.push(n[i]),a&&!zb(n[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class W2{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Z2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Z2{constructor(e,t,i,s={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),X2(a)}async sendMessage(e){var t;await this.sendPromise;const i=bn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const f=await s,m=(u=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=f.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];_!=null&&(T=(d=_.slice(E))!==null&&d!==void 0?d:[]);const w=m?[m]:[];this.recordHistory(i,w,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const i=bn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?dA(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Xi(this,arguments,function*(){var s,a,u,d,f,m;const _=[];try{for(var E=!0,T=Wi(e),w;w=yield Pe(T.next()),s=w.done,!s;E=!0){d=w.value,E=!1;const N=d;if(Q2(N)){const k=(m=(f=N.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content;k!==void 0&&_.push(k)}yield yield Pe(N)}}catch(N){a={error:N}}finally{try{!E&&!s&&(u=T.return)&&(yield Pe(u.call(T)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let s=[];t.length>0&&t.every(a=>a.role!==void 0)?s=t:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...dA(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hc extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Hc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eP(n){const e={},t=h(n,["file"]);return t!=null&&p(e,["file"],t),e}function tP(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function nP(n){const e={},t=h(n,["name"]);return t!=null&&p(e,["_url","file"],Ub(t)),e}function iP(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function rP(n){const e={},t=h(n,["name"]);return t!=null&&p(e,["_url","file"],Ub(t)),e}function sP(n){const e={},t=h(n,["uris"]);return t!=null&&p(e,["uris"],t),e}function oP(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=h(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function aP(n){const e={},t=h(n,["config"]);return t!=null&&oP(t,e),e}function lP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=h(n,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}function uP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),p(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cP extends ns{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Sa(Wr.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=aP(e);return a=_e("files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{const m=lP(f),_=new dM;return Object.assign(_,m),_})}}async createInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=eP(e);return a=_e("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const m=tP(f),_=new fM;return Object.assign(_,m),_})}}async get(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rP(e);return a=_e("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=nP(e);return a=_e("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{const m=iP(f),_=new hM;return Object.assign(_,m),_})}}async registerFilesInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sP(e);return a=_e("files:register",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const m=uP(f),_=new mM;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sh(n){const e={},t=h(n,["data"]);if(t!=null&&p(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function dP(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>IP(a))),p(e,["parts"],s)}const i=h(n,["role"]);return i!=null&&p(e,["role"],i),e}function fP(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=h(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function hP(n){const e={},t=h(n,["id"]);t!=null&&p(e,["id"],t);const i=h(n,["args"]);i!=null&&p(e,["args"],i);const s=h(n,["name"]);if(s!=null&&p(e,["name"],s),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mP(n){const e={},t=h(n,["description"]);t!=null&&p(e,["description"],t);const i=h(n,["name"]);i!=null&&p(e,["name"],i);const s=h(n,["parameters"]);s!=null&&p(e,["parameters"],s);const a=h(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=h(n,["response"]);u!=null&&p(e,["response"],u);const d=h(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function pP(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=h(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const s=h(n,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const a=h(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=h(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=h(n,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const f=h(n,["logprobs"]);f!=null&&p(e,["logprobs"],f);const m=h(n,["maxOutputTokens"]);m!=null&&p(e,["maxOutputTokens"],m);const _=h(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const E=h(n,["presencePenalty"]);E!=null&&p(e,["presencePenalty"],E);const T=h(n,["responseLogprobs"]);T!=null&&p(e,["responseLogprobs"],T);const w=h(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const N=h(n,["responseModalities"]);N!=null&&p(e,["responseModalities"],N);const k=h(n,["responseSchema"]);k!=null&&p(e,["responseSchema"],k);const V=h(n,["routingConfig"]);V!=null&&p(e,["routingConfig"],V);const $=h(n,["seed"]);$!=null&&p(e,["seed"],$);const ne=h(n,["speechConfig"]);ne!=null&&p(e,["speechConfig"],ne);const Q=h(n,["stopSequences"]);Q!=null&&p(e,["stopSequences"],Q);const se=h(n,["temperature"]);se!=null&&p(e,["temperature"],se);const z=h(n,["thinkingConfig"]);z!=null&&p(e,["thinkingConfig"],z);const J=h(n,["topK"]);J!=null&&p(e,["topK"],J);const R=h(n,["topP"]);if(R!=null&&p(e,["topP"],R),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function gP(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function yP(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function _P(n,e){const t={},i=h(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const s=h(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const a=h(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=h(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=h(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const f=h(n,["maxOutputTokens"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","maxOutputTokens"],f);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const _=h(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=h(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],By(E));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const w=h(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const N=h(n,["systemInstruction"]);e!==void 0&&N!=null&&p(e,["setup","systemInstruction"],dP(bn(N)));const k=h(n,["tools"]);if(e!==void 0&&k!=null){let J=uu(k);Array.isArray(J)&&(J=J.map(R=>RP(lu(R)))),p(e,["setup","tools"],J)}const V=h(n,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],CP(V));const $=h(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const ne=h(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const Q=h(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&p(e,["setup","realtimeInputConfig"],Q);const se=h(n,["contextWindowCompression"]);e!==void 0&&se!=null&&p(e,["setup","contextWindowCompression"],se);const z=h(n,["proactivity"]);if(e!==void 0&&z!=null&&p(e,["setup","proactivity"],z),h(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function vP(n,e){const t={},i=h(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],pP(i));const s=h(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const a=h(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=h(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=h(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const f=h(n,["maxOutputTokens"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","maxOutputTokens"],f);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const _=h(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=h(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],By(E));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const w=h(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const N=h(n,["systemInstruction"]);e!==void 0&&N!=null&&p(e,["setup","systemInstruction"],bn(N));const k=h(n,["tools"]);if(e!==void 0&&k!=null){let R=uu(k);Array.isArray(R)&&(R=R.map(D=>NP(lu(D)))),p(e,["setup","tools"],R)}const V=h(n,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],V);const $=h(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const ne=h(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const Q=h(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&p(e,["setup","realtimeInputConfig"],Q);const se=h(n,["contextWindowCompression"]);e!==void 0&&se!=null&&p(e,["setup","contextWindowCompression"],se);const z=h(n,["proactivity"]);e!==void 0&&z!=null&&p(e,["setup","proactivity"],z);const J=h(n,["explicitVadSignal"]);return e!==void 0&&J!=null&&p(e,["setup","explicitVadSignal"],J),t}function EP(n,e){const t={},i=h(e,["model"]);i!=null&&p(t,["setup","model"],tt(n,i));const s=h(e,["config"]);return s!=null&&p(t,["config"],_P(s,t)),t}function TP(n,e){const t={},i=h(e,["model"]);i!=null&&p(t,["setup","model"],tt(n,i));const s=h(e,["config"]);return s!=null&&p(t,["config"],vP(s,t)),t}function SP(n){const e={},t=h(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function AP(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>s)),p(e,["weightedPrompts"],i)}return e}function xP(n){const e={},t=h(n,["media"]);if(t!=null){let m=Db(t);Array.isArray(m)&&(m=m.map(_=>sh(_))),p(e,["mediaChunks"],m)}const i=h(n,["audio"]);i!=null&&p(e,["audio"],sh(Pb(i)));const s=h(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const a=h(n,["video"]);a!=null&&p(e,["video"],sh(Mb(a)));const u=h(n,["text"]);u!=null&&p(e,["text"],u);const d=h(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const f=h(n,["activityEnd"]);return f!=null&&p(e,["activityEnd"],f),e}function bP(n){const e={},t=h(n,["media"]);if(t!=null){let m=Db(t);Array.isArray(m)&&(m=m.map(_=>_)),p(e,["mediaChunks"],m)}const i=h(n,["audio"]);i!=null&&p(e,["audio"],Pb(i));const s=h(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const a=h(n,["video"]);a!=null&&p(e,["video"],Mb(a));const u=h(n,["text"]);u!=null&&p(e,["text"],u);const d=h(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const f=h(n,["activityEnd"]);return f!=null&&p(e,["activityEnd"],f),e}function wP(n){const e={},t=h(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=h(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const s=h(n,["toolCall"]);s!=null&&p(e,["toolCall"],s);const a=h(n,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=h(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],DP(u));const d=h(n,["goAway"]);d!=null&&p(e,["goAway"],d);const f=h(n,["sessionResumptionUpdate"]);f!=null&&p(e,["sessionResumptionUpdate"],f);const m=h(n,["voiceActivityDetectionSignal"]);m!=null&&p(e,["voiceActivityDetectionSignal"],m);const _=h(n,["voiceActivity"]);return _!=null&&p(e,["voiceActivity"],MP(_)),e}function IP(n){const e={},t=h(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=h(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const s=h(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const a=h(n,["fileData"]);a!=null&&p(e,["fileData"],fP(a));const u=h(n,["functionCall"]);u!=null&&p(e,["functionCall"],hP(u));const d=h(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const f=h(n,["inlineData"]);f!=null&&p(e,["inlineData"],sh(f));const m=h(n,["text"]);m!=null&&p(e,["text"],m);const _=h(n,["thought"]);_!=null&&p(e,["thought"],_);const E=h(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const T=h(n,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function CP(n){const e={},t=h(n,["handle"]);if(t!=null&&p(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function RP(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=h(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const s=h(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=h(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],gP(u));const d=h(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],yP(d));const f=h(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const m=h(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function NP(n){const e={},t=h(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=h(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=h(n,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const a=h(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=h(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>mP(T))),p(e,["functionDeclarations"],E)}const d=h(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const f=h(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],f);const m=h(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const _=h(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function DP(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=h(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const s=h(n,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const a=h(n,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=h(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=h(n,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const f=h(n,["promptTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(N=>N)),p(e,["promptTokensDetails"],w)}const m=h(n,["cacheTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(N=>N)),p(e,["cacheTokensDetails"],w)}const _=h(n,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(N=>N)),p(e,["responseTokensDetails"],w)}const E=h(n,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(N=>N)),p(e,["toolUsePromptTokensDetails"],w)}const T=h(n,["trafficType"]);return T!=null&&p(e,["trafficType"],T),e}function MP(n){const e={},t=h(n,["type"]);return t!=null&&p(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PP(n,e){const t={},i=h(n,["data"]);if(i!=null&&p(t,["data"],i),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function VP(n,e){const t={},i=h(n,["content"]);i!=null&&p(t,["content"],i);const s=h(n,["citationMetadata"]);s!=null&&p(t,["citationMetadata"],kP(s));const a=h(n,["tokenCount"]);a!=null&&p(t,["tokenCount"],a);const u=h(n,["finishReason"]);u!=null&&p(t,["finishReason"],u);const d=h(n,["avgLogprobs"]);d!=null&&p(t,["avgLogprobs"],d);const f=h(n,["groundingMetadata"]);f!=null&&p(t,["groundingMetadata"],f);const m=h(n,["index"]);m!=null&&p(t,["index"],m);const _=h(n,["logprobsResult"]);_!=null&&p(t,["logprobsResult"],_);const E=h(n,["safetyRatings"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(N=>N)),p(t,["safetyRatings"],w)}const T=h(n,["urlContextMetadata"]);return T!=null&&p(t,["urlContextMetadata"],T),t}function kP(n,e){const t={},i=h(n,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),p(t,["citations"],s)}return t}function UP(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["contents"]);if(a!=null){let u=Ri(a);Array.isArray(u)&&(u=u.map(d=>d)),p(i,["contents"],u)}return i}function LP(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),p(t,["tokensInfo"],a)}return t}function OP(n,e){const t={},i=h(n,["values"]);i!=null&&p(t,["values"],i);const s=h(n,["statistics"]);return s!=null&&p(t,["statistics"],FP(s)),t}function FP(n,e){const t={},i=h(n,["truncated"]);i!=null&&p(t,["truncated"],i);const s=h(n,["token_count"]);return s!=null&&p(t,["tokenCount"],s),t}function Hh(n,e){const t={},i=h(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>JV(u))),p(t,["parts"],a)}const s=h(n,["role"]);return s!=null&&p(t,["role"],s),t}function qP(n,e){const t={},i=h(n,["controlType"]);i!=null&&p(t,["controlType"],i);const s=h(n,["enableControlImageComputation"]);return s!=null&&p(t,["computeControl"],s),t}function BP(n,e){const t={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function GP(n,e,t){const i={},s=h(n,["systemInstruction"]);e!==void 0&&s!=null&&p(e,["systemInstruction"],bn(s));const a=h(n,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>Yb(f))),p(e,["tools"],d)}const u=h(n,["generationConfig"]);return e!==void 0&&u!=null&&p(e,["generationConfig"],PV(u)),i}function zP(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["contents"]);if(a!=null){let d=Ri(a);Array.isArray(d)&&(d=d.map(f=>Hh(f))),p(i,["contents"],d)}const u=h(e,["config"]);return u!=null&&BP(u),i}function HP(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["contents"]);if(a!=null){let d=Ri(a);Array.isArray(d)&&(d=d.map(f=>f)),p(i,["contents"],d)}const u=h(e,["config"]);return u!=null&&GP(u,i),i}function KP(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["totalTokens"]);s!=null&&p(t,["totalTokens"],s);const a=h(n,["cachedContentTokenCount"]);return a!=null&&p(t,["cachedContentTokenCount"],a),t}function $P(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["totalTokens"]);return s!=null&&p(t,["totalTokens"],s),t}function YP(n,e,t){const i={},s=h(e,["model"]);return s!=null&&p(i,["_url","name"],tt(n,s)),i}function JP(n,e,t){const i={},s=h(e,["model"]);return s!=null&&p(i,["_url","name"],tt(n,s)),i}function jP(n,e){const t={},i=h(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function QP(n,e){const t={},i=h(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function XP(n,e,t){const i={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const a=h(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=h(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=h(n,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const m=h(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const _=h(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&p(e,["parameters","safetySetting"],_);const E=h(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const T=h(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const w=h(n,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const N=h(n,["language"]);e!==void 0&&N!=null&&p(e,["parameters","language"],N);const k=h(n,["outputMimeType"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","mimeType"],k);const V=h(n,["outputCompressionQuality"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","compressionQuality"],V);const $=h(n,["addWatermark"]);e!==void 0&&$!=null&&p(e,["parameters","addWatermark"],$);const ne=h(n,["labels"]);e!==void 0&&ne!=null&&p(e,["labels"],ne);const Q=h(n,["editMode"]);e!==void 0&&Q!=null&&p(e,["parameters","editMode"],Q);const se=h(n,["baseSteps"]);return e!==void 0&&se!=null&&p(e,["parameters","editConfig","baseSteps"],se),i}function WP(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=h(e,["referenceImages"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(m=>ek(m))),p(i,["instances[0]","referenceImages"],f)}const d=h(e,["config"]);return d!=null&&XP(d,i),i}function ZP(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Kh(u))),p(t,["generatedImages"],a)}return t}function eV(n,e,t){const i={},s=h(n,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const a=h(n,["title"]);e!==void 0&&a!=null&&p(e,["requests[]","title"],a);const u=h(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function tV(n,e,t){const i={},s=h(n,["taskType"]);e!==void 0&&s!=null&&p(e,["instances[]","task_type"],s);const a=h(n,["title"]);e!==void 0&&a!=null&&p(e,["instances[]","title"],a);const u=h(n,["outputDimensionality"]);e!==void 0&&u!=null&&p(e,["parameters","outputDimensionality"],u);const d=h(n,["mimeType"]);e!==void 0&&d!=null&&p(e,["instances[]","mimeType"],d);const f=h(n,["autoTruncate"]);return e!==void 0&&f!=null&&p(e,["parameters","autoTruncate"],f),i}function nV(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["contents"]);if(a!=null){let f=Oy(n,a);Array.isArray(f)&&(f=f.map(m=>m)),p(i,["requests[]","content"],f)}const u=h(e,["config"]);u!=null&&eV(u,i);const d=h(e,["model"]);return d!==void 0&&p(i,["requests[]","model"],tt(n,d)),i}function iV(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["contents"]);if(a!=null){let d=Oy(n,a);Array.isArray(d)&&(d=d.map(f=>f)),p(i,["instances[]","content"],d)}const u=h(e,["config"]);return u!=null&&tV(u,i),i}function rV(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),p(t,["embeddings"],u)}const a=h(n,["metadata"]);return a!=null&&p(t,["metadata"],a),t}function sV(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["predictions[]","embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>OP(d))),p(t,["embeddings"],u)}const a=h(n,["metadata"]);return a!=null&&p(t,["metadata"],a),t}function oV(n,e){const t={},i=h(n,["endpoint"]);i!=null&&p(t,["name"],i);const s=h(n,["deployedModelId"]);return s!=null&&p(t,["deployedModelId"],s),t}function aV(n,e){const t={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["fileUri"]);i!=null&&p(t,["fileUri"],i);const s=h(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function lV(n,e){const t={},i=h(n,["id"]);i!=null&&p(t,["id"],i);const s=h(n,["args"]);s!=null&&p(t,["args"],s);const a=h(n,["name"]);if(a!=null&&p(t,["name"],a),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function uV(n,e){const t={},i=h(n,["allowedFunctionNames"]);i!=null&&p(t,["allowedFunctionNames"],i);const s=h(n,["mode"]);if(s!=null&&p(t,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function cV(n,e){const t={},i=h(n,["description"]);i!=null&&p(t,["description"],i);const s=h(n,["name"]);s!=null&&p(t,["name"],s);const a=h(n,["parameters"]);a!=null&&p(t,["parameters"],a);const u=h(n,["parametersJsonSchema"]);u!=null&&p(t,["parametersJsonSchema"],u);const d=h(n,["response"]);d!=null&&p(t,["response"],d);const f=h(n,["responseJsonSchema"]);if(f!=null&&p(t,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function dV(n,e,t,i){const s={},a=h(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],Hh(bn(a)));const u=h(e,["temperature"]);u!=null&&p(s,["temperature"],u);const d=h(e,["topP"]);d!=null&&p(s,["topP"],d);const f=h(e,["topK"]);f!=null&&p(s,["topK"],f);const m=h(e,["candidateCount"]);m!=null&&p(s,["candidateCount"],m);const _=h(e,["maxOutputTokens"]);_!=null&&p(s,["maxOutputTokens"],_);const E=h(e,["stopSequences"]);E!=null&&p(s,["stopSequences"],E);const T=h(e,["responseLogprobs"]);T!=null&&p(s,["responseLogprobs"],T);const w=h(e,["logprobs"]);w!=null&&p(s,["logprobs"],w);const N=h(e,["presencePenalty"]);N!=null&&p(s,["presencePenalty"],N);const k=h(e,["frequencyPenalty"]);k!=null&&p(s,["frequencyPenalty"],k);const V=h(e,["seed"]);V!=null&&p(s,["seed"],V);const $=h(e,["responseMimeType"]);$!=null&&p(s,["responseMimeType"],$);const ne=h(e,["responseSchema"]);ne!=null&&p(s,["responseSchema"],Fy(ne));const Q=h(e,["responseJsonSchema"]);if(Q!=null&&p(s,["responseJsonSchema"],Q),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const se=h(e,["safetySettings"]);if(t!==void 0&&se!=null){let Ve=se;Array.isArray(Ve)&&(Ve=Ve.map(ft=>tk(ft))),p(t,["safetySettings"],Ve)}const z=h(e,["tools"]);if(t!==void 0&&z!=null){let Ve=uu(z);Array.isArray(Ve)&&(Ve=Ve.map(ft=>lk(lu(ft)))),p(t,["tools"],Ve)}const J=h(e,["toolConfig"]);if(t!==void 0&&J!=null&&p(t,["toolConfig"],ak(J)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=h(e,["cachedContent"]);t!==void 0&&R!=null&&p(t,["cachedContent"],is(n,R));const D=h(e,["responseModalities"]);D!=null&&p(s,["responseModalities"],D);const M=h(e,["mediaResolution"]);M!=null&&p(s,["mediaResolution"],M);const O=h(e,["speechConfig"]);if(O!=null&&p(s,["speechConfig"],qy(O)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=h(e,["thinkingConfig"]);L!=null&&p(s,["thinkingConfig"],L);const B=h(e,["imageConfig"]);B!=null&&p(s,["imageConfig"],OV(B));const P=h(e,["enableEnhancedCivicAnswers"]);if(P!=null&&p(s,["enableEnhancedCivicAnswers"],P),h(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function fV(n,e,t,i){const s={},a=h(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],bn(a));const u=h(e,["temperature"]);u!=null&&p(s,["temperature"],u);const d=h(e,["topP"]);d!=null&&p(s,["topP"],d);const f=h(e,["topK"]);f!=null&&p(s,["topK"],f);const m=h(e,["candidateCount"]);m!=null&&p(s,["candidateCount"],m);const _=h(e,["maxOutputTokens"]);_!=null&&p(s,["maxOutputTokens"],_);const E=h(e,["stopSequences"]);E!=null&&p(s,["stopSequences"],E);const T=h(e,["responseLogprobs"]);T!=null&&p(s,["responseLogprobs"],T);const w=h(e,["logprobs"]);w!=null&&p(s,["logprobs"],w);const N=h(e,["presencePenalty"]);N!=null&&p(s,["presencePenalty"],N);const k=h(e,["frequencyPenalty"]);k!=null&&p(s,["frequencyPenalty"],k);const V=h(e,["seed"]);V!=null&&p(s,["seed"],V);const $=h(e,["responseMimeType"]);$!=null&&p(s,["responseMimeType"],$);const ne=h(e,["responseSchema"]);ne!=null&&p(s,["responseSchema"],Fy(ne));const Q=h(e,["responseJsonSchema"]);Q!=null&&p(s,["responseJsonSchema"],Q);const se=h(e,["routingConfig"]);se!=null&&p(s,["routingConfig"],se);const z=h(e,["modelSelectionConfig"]);z!=null&&p(s,["modelConfig"],z);const J=h(e,["safetySettings"]);if(t!==void 0&&J!=null){let Te=J;Array.isArray(Te)&&(Te=Te.map(qe=>qe)),p(t,["safetySettings"],Te)}const R=h(e,["tools"]);if(t!==void 0&&R!=null){let Te=uu(R);Array.isArray(Te)&&(Te=Te.map(qe=>Yb(lu(qe)))),p(t,["tools"],Te)}const D=h(e,["toolConfig"]);t!==void 0&&D!=null&&p(t,["toolConfig"],D);const M=h(e,["labels"]);t!==void 0&&M!=null&&p(t,["labels"],M);const O=h(e,["cachedContent"]);t!==void 0&&O!=null&&p(t,["cachedContent"],is(n,O));const L=h(e,["responseModalities"]);L!=null&&p(s,["responseModalities"],L);const B=h(e,["mediaResolution"]);B!=null&&p(s,["mediaResolution"],B);const P=h(e,["speechConfig"]);P!=null&&p(s,["speechConfig"],qy(P));const Ve=h(e,["audioTimestamp"]);Ve!=null&&p(s,["audioTimestamp"],Ve);const ft=h(e,["thinkingConfig"]);ft!=null&&p(s,["thinkingConfig"],ft);const te=h(e,["imageConfig"]);if(te!=null&&p(s,["imageConfig"],FV(te)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const me=h(e,["modelArmorConfig"]);return t!==void 0&&me!=null&&p(t,["modelArmorConfig"],me),s}function fA(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["contents"]);if(a!=null){let d=Ri(a);Array.isArray(d)&&(d=d.map(f=>Hh(f))),p(i,["contents"],d)}const u=h(e,["config"]);return u!=null&&p(i,["generationConfig"],dV(n,u,i)),i}function hA(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["contents"]);if(a!=null){let d=Ri(a);Array.isArray(d)&&(d=d.map(f=>f)),p(i,["contents"],d)}const u=h(e,["config"]);return u!=null&&p(i,["generationConfig"],fV(n,u,i)),i}function mA(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(_=>VP(_))),p(t,["candidates"],m)}const a=h(n,["modelVersion"]);a!=null&&p(t,["modelVersion"],a);const u=h(n,["promptFeedback"]);u!=null&&p(t,["promptFeedback"],u);const d=h(n,["responseId"]);d!=null&&p(t,["responseId"],d);const f=h(n,["usageMetadata"]);return f!=null&&p(t,["usageMetadata"],f),t}function pA(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["candidates"]);if(s!=null){let _=s;Array.isArray(_)&&(_=_.map(E=>E)),p(t,["candidates"],_)}const a=h(n,["createTime"]);a!=null&&p(t,["createTime"],a);const u=h(n,["modelVersion"]);u!=null&&p(t,["modelVersion"],u);const d=h(n,["promptFeedback"]);d!=null&&p(t,["promptFeedback"],d);const f=h(n,["responseId"]);f!=null&&p(t,["responseId"],f);const m=h(n,["usageMetadata"]);return m!=null&&p(t,["usageMetadata"],m),t}function hV(n,e,t){const i={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const a=h(n,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=h(n,["guidanceScale"]);if(e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=h(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const f=h(n,["personGeneration"]);e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f);const m=h(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const _=h(n,["includeRaiReason"]);e!==void 0&&_!=null&&p(e,["parameters","includeRaiReason"],_);const E=h(n,["language"]);e!==void 0&&E!=null&&p(e,["parameters","language"],E);const T=h(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const w=h(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&p(e,["parameters","outputOptions","compressionQuality"],w),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=h(n,["imageSize"]);if(e!==void 0&&N!=null&&p(e,["parameters","sampleImageSize"],N),h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function mV(n,e,t){const i={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const a=h(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=h(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=h(n,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const m=h(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const _=h(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&p(e,["parameters","safetySetting"],_);const E=h(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const T=h(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const w=h(n,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const N=h(n,["language"]);e!==void 0&&N!=null&&p(e,["parameters","language"],N);const k=h(n,["outputMimeType"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","mimeType"],k);const V=h(n,["outputCompressionQuality"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","compressionQuality"],V);const $=h(n,["addWatermark"]);e!==void 0&&$!=null&&p(e,["parameters","addWatermark"],$);const ne=h(n,["labels"]);e!==void 0&&ne!=null&&p(e,["labels"],ne);const Q=h(n,["imageSize"]);e!==void 0&&Q!=null&&p(e,["parameters","sampleImageSize"],Q);const se=h(n,["enhancePrompt"]);return e!==void 0&&se!=null&&p(e,["parameters","enhancePrompt"],se),i}function pV(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=h(e,["config"]);return u!=null&&hV(u,i),i}function gV(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=h(e,["config"]);return u!=null&&mV(u,i),i}function yV(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>RV(d))),p(t,["generatedImages"],u)}const a=h(n,["positivePromptSafetyAttributes"]);return a!=null&&p(t,["positivePromptSafetyAttributes"],Kb(a)),t}function _V(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Kh(d))),p(t,["generatedImages"],u)}const a=h(n,["positivePromptSafetyAttributes"]);return a!=null&&p(t,["positivePromptSafetyAttributes"],$b(a)),t}function vV(n,e,t){const i={},s=h(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=h(n,["durationSeconds"]);if(e!==void 0&&a!=null&&p(e,["parameters","durationSeconds"],a),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=h(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=h(n,["resolution"]);e!==void 0&&d!=null&&p(e,["parameters","resolution"],d);const f=h(n,["personGeneration"]);if(e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=h(n,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const _=h(n,["enhancePrompt"]);if(e!==void 0&&_!=null&&p(e,["parameters","enhancePrompt"],_),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=h(n,["lastFrame"]);e!==void 0&&E!=null&&p(e,["instances[0]","lastFrame"],$h(E));const T=h(n,["referenceImages"]);if(e!==void 0&&T!=null){let w=T;Array.isArray(w)&&(w=w.map(N=>Tk(N))),p(e,["instances[0]","referenceImages"],w)}if(h(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function EV(n,e,t){const i={},s=h(n,["numberOfVideos"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const a=h(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=h(n,["fps"]);e!==void 0&&u!=null&&p(e,["parameters","fps"],u);const d=h(n,["durationSeconds"]);e!==void 0&&d!=null&&p(e,["parameters","durationSeconds"],d);const f=h(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const m=h(n,["aspectRatio"]);e!==void 0&&m!=null&&p(e,["parameters","aspectRatio"],m);const _=h(n,["resolution"]);e!==void 0&&_!=null&&p(e,["parameters","resolution"],_);const E=h(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const T=h(n,["pubsubTopic"]);e!==void 0&&T!=null&&p(e,["parameters","pubsubTopic"],T);const w=h(n,["negativePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","negativePrompt"],w);const N=h(n,["enhancePrompt"]);e!==void 0&&N!=null&&p(e,["parameters","enhancePrompt"],N);const k=h(n,["generateAudio"]);e!==void 0&&k!=null&&p(e,["parameters","generateAudio"],k);const V=h(n,["lastFrame"]);e!==void 0&&V!=null&&p(e,["instances[0]","lastFrame"],ir(V));const $=h(n,["referenceImages"]);if(e!==void 0&&$!=null){let se=$;Array.isArray(se)&&(se=se.map(z=>Sk(z))),p(e,["instances[0]","referenceImages"],se)}const ne=h(n,["mask"]);e!==void 0&&ne!=null&&p(e,["instances[0]","mask"],Ek(ne));const Q=h(n,["compressionQuality"]);return e!==void 0&&Q!=null&&p(e,["parameters","compressionQuality"],Q),i}function TV(n,e){const t={},i=h(n,["name"]);i!=null&&p(t,["name"],i);const s=h(n,["metadata"]);s!=null&&p(t,["metadata"],s);const a=h(n,["done"]);a!=null&&p(t,["done"],a);const u=h(n,["error"]);u!=null&&p(t,["error"],u);const d=h(n,["response","generateVideoResponse"]);return d!=null&&p(t,["response"],bV(d)),t}function SV(n,e){const t={},i=h(n,["name"]);i!=null&&p(t,["name"],i);const s=h(n,["metadata"]);s!=null&&p(t,["metadata"],s);const a=h(n,["done"]);a!=null&&p(t,["done"],a);const u=h(n,["error"]);u!=null&&p(t,["error"],u);const d=h(n,["response"]);return d!=null&&p(t,["response"],wV(d)),t}function AV(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=h(e,["image"]);u!=null&&p(i,["instances[0]","image"],$h(u));const d=h(e,["video"]);d!=null&&p(i,["instances[0]","video"],Jb(d));const f=h(e,["source"]);f!=null&&IV(f,i);const m=h(e,["config"]);return m!=null&&vV(m,i),i}function xV(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=h(e,["image"]);u!=null&&p(i,["instances[0]","image"],ir(u));const d=h(e,["video"]);d!=null&&p(i,["instances[0]","video"],jb(d));const f=h(e,["source"]);f!=null&&CV(f,i);const m=h(e,["config"]);return m!=null&&EV(m,i),i}function bV(n,e){const t={},i=h(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>DV(d))),p(t,["generatedVideos"],u)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&p(t,["raiMediaFilteredCount"],s);const a=h(n,["raiMediaFilteredReasons"]);return a!=null&&p(t,["raiMediaFilteredReasons"],a),t}function wV(n,e){const t={},i=h(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>MV(d))),p(t,["generatedVideos"],u)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&p(t,["raiMediaFilteredCount"],s);const a=h(n,["raiMediaFilteredReasons"]);return a!=null&&p(t,["raiMediaFilteredReasons"],a),t}function IV(n,e,t){const i={},s=h(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const a=h(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],$h(a));const u=h(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],Jb(u)),i}function CV(n,e,t){const i={},s=h(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const a=h(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],ir(a));const u=h(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],jb(u)),i}function RV(n,e){const t={},i=h(n,["_self"]);i!=null&&p(t,["image"],qV(i));const s=h(n,["raiFilteredReason"]);s!=null&&p(t,["raiFilteredReason"],s);const a=h(n,["_self"]);return a!=null&&p(t,["safetyAttributes"],Kb(a)),t}function Kh(n,e){const t={},i=h(n,["_self"]);i!=null&&p(t,["image"],Hb(i));const s=h(n,["raiFilteredReason"]);s!=null&&p(t,["raiFilteredReason"],s);const a=h(n,["_self"]);a!=null&&p(t,["safetyAttributes"],$b(a));const u=h(n,["prompt"]);return u!=null&&p(t,["enhancedPrompt"],u),t}function NV(n,e){const t={},i=h(n,["_self"]);i!=null&&p(t,["mask"],Hb(i));const s=h(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),p(t,["labels"],a)}return t}function DV(n,e){const t={},i=h(n,["video"]);return i!=null&&p(t,["video"],_k(i)),t}function MV(n,e){const t={},i=h(n,["_self"]);return i!=null&&p(t,["video"],vk(i)),t}function PV(n,e){const t={},i=h(n,["modelSelectionConfig"]);i!=null&&p(t,["modelConfig"],i);const s=h(n,["responseJsonSchema"]);s!=null&&p(t,["responseJsonSchema"],s);const a=h(n,["audioTimestamp"]);a!=null&&p(t,["audioTimestamp"],a);const u=h(n,["candidateCount"]);u!=null&&p(t,["candidateCount"],u);const d=h(n,["enableAffectiveDialog"]);d!=null&&p(t,["enableAffectiveDialog"],d);const f=h(n,["frequencyPenalty"]);f!=null&&p(t,["frequencyPenalty"],f);const m=h(n,["logprobs"]);m!=null&&p(t,["logprobs"],m);const _=h(n,["maxOutputTokens"]);_!=null&&p(t,["maxOutputTokens"],_);const E=h(n,["mediaResolution"]);E!=null&&p(t,["mediaResolution"],E);const T=h(n,["presencePenalty"]);T!=null&&p(t,["presencePenalty"],T);const w=h(n,["responseLogprobs"]);w!=null&&p(t,["responseLogprobs"],w);const N=h(n,["responseMimeType"]);N!=null&&p(t,["responseMimeType"],N);const k=h(n,["responseModalities"]);k!=null&&p(t,["responseModalities"],k);const V=h(n,["responseSchema"]);V!=null&&p(t,["responseSchema"],V);const $=h(n,["routingConfig"]);$!=null&&p(t,["routingConfig"],$);const ne=h(n,["seed"]);ne!=null&&p(t,["seed"],ne);const Q=h(n,["speechConfig"]);Q!=null&&p(t,["speechConfig"],Q);const se=h(n,["stopSequences"]);se!=null&&p(t,["stopSequences"],se);const z=h(n,["temperature"]);z!=null&&p(t,["temperature"],z);const J=h(n,["thinkingConfig"]);J!=null&&p(t,["thinkingConfig"],J);const R=h(n,["topK"]);R!=null&&p(t,["topK"],R);const D=h(n,["topP"]);if(D!=null&&p(t,["topP"],D),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function VV(n,e,t){const i={},s=h(e,["model"]);return s!=null&&p(i,["_url","name"],tt(n,s)),i}function kV(n,e,t){const i={},s=h(e,["model"]);return s!=null&&p(i,["_url","name"],tt(n,s)),i}function UV(n,e){const t={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=h(n,["enableWidget"]);return i!=null&&p(t,["enableWidget"],i),t}function LV(n,e){const t={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=h(n,["timeRangeFilter"]);return i!=null&&p(t,["timeRangeFilter"],i),t}function OV(n,e){const t={},i=h(n,["aspectRatio"]);i!=null&&p(t,["aspectRatio"],i);const s=h(n,["imageSize"]);if(s!=null&&p(t,["imageSize"],s),h(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function FV(n,e){const t={},i=h(n,["aspectRatio"]);i!=null&&p(t,["aspectRatio"],i);const s=h(n,["imageSize"]);s!=null&&p(t,["imageSize"],s);const a=h(n,["personGeneration"]);a!=null&&p(t,["personGeneration"],a);const u=h(n,["outputMimeType"]);u!=null&&p(t,["imageOutputOptions","mimeType"],u);const d=h(n,["outputCompressionQuality"]);return d!=null&&p(t,["imageOutputOptions","compressionQuality"],d),t}function qV(n,e){const t={},i=h(n,["bytesBase64Encoded"]);i!=null&&p(t,["imageBytes"],co(i));const s=h(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function Hb(n,e){const t={},i=h(n,["gcsUri"]);i!=null&&p(t,["gcsUri"],i);const s=h(n,["bytesBase64Encoded"]);s!=null&&p(t,["imageBytes"],co(s));const a=h(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function $h(n,e){const t={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=h(n,["imageBytes"]);i!=null&&p(t,["bytesBase64Encoded"],co(i));const s=h(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function ir(n,e){const t={},i=h(n,["gcsUri"]);i!=null&&p(t,["gcsUri"],i);const s=h(n,["imageBytes"]);s!=null&&p(t,["bytesBase64Encoded"],co(s));const a=h(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function BV(n,e,t,i){const s={},a=h(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const u=h(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const d=h(e,["filter"]);t!==void 0&&d!=null&&p(t,["_query","filter"],d);const f=h(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],Lb(n,f)),s}function GV(n,e,t,i){const s={},a=h(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const u=h(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const d=h(e,["filter"]);t!==void 0&&d!=null&&p(t,["_query","filter"],d);const f=h(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],Lb(n,f)),s}function zV(n,e,t){const i={},s=h(e,["config"]);return s!=null&&BV(n,s,i),i}function HV(n,e,t){const i={},s=h(e,["config"]);return s!=null&&GV(n,s,i),i}function KV(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const a=h(n,["_self"]);if(a!=null){let u=Ob(a);Array.isArray(u)&&(u=u.map(d=>Kg(d))),p(t,["models"],u)}return t}function $V(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const a=h(n,["_self"]);if(a!=null){let u=Ob(a);Array.isArray(u)&&(u=u.map(d=>$g(d))),p(t,["models"],u)}return t}function YV(n,e){const t={},i=h(n,["maskMode"]);i!=null&&p(t,["maskMode"],i);const s=h(n,["segmentationClasses"]);s!=null&&p(t,["maskClasses"],s);const a=h(n,["maskDilation"]);return a!=null&&p(t,["dilation"],a),t}function Kg(n,e){const t={},i=h(n,["name"]);i!=null&&p(t,["name"],i);const s=h(n,["displayName"]);s!=null&&p(t,["displayName"],s);const a=h(n,["description"]);a!=null&&p(t,["description"],a);const u=h(n,["version"]);u!=null&&p(t,["version"],u);const d=h(n,["_self"]);d!=null&&p(t,["tunedModelInfo"],uk(d));const f=h(n,["inputTokenLimit"]);f!=null&&p(t,["inputTokenLimit"],f);const m=h(n,["outputTokenLimit"]);m!=null&&p(t,["outputTokenLimit"],m);const _=h(n,["supportedGenerationMethods"]);_!=null&&p(t,["supportedActions"],_);const E=h(n,["temperature"]);E!=null&&p(t,["temperature"],E);const T=h(n,["maxTemperature"]);T!=null&&p(t,["maxTemperature"],T);const w=h(n,["topP"]);w!=null&&p(t,["topP"],w);const N=h(n,["topK"]);N!=null&&p(t,["topK"],N);const k=h(n,["thinking"]);return k!=null&&p(t,["thinking"],k),t}function $g(n,e){const t={},i=h(n,["name"]);i!=null&&p(t,["name"],i);const s=h(n,["displayName"]);s!=null&&p(t,["displayName"],s);const a=h(n,["description"]);a!=null&&p(t,["description"],a);const u=h(n,["versionId"]);u!=null&&p(t,["version"],u);const d=h(n,["deployedModels"]);if(d!=null){let T=d;Array.isArray(T)&&(T=T.map(w=>oV(w))),p(t,["endpoints"],T)}const f=h(n,["labels"]);f!=null&&p(t,["labels"],f);const m=h(n,["_self"]);m!=null&&p(t,["tunedModelInfo"],ck(m));const _=h(n,["defaultCheckpointId"]);_!=null&&p(t,["defaultCheckpointId"],_);const E=h(n,["checkpoints"]);if(E!=null){let T=E;Array.isArray(T)&&(T=T.map(w=>w)),p(t,["checkpoints"],T)}return t}function JV(n,e){const t={},i=h(n,["mediaResolution"]);i!=null&&p(t,["mediaResolution"],i);const s=h(n,["codeExecutionResult"]);s!=null&&p(t,["codeExecutionResult"],s);const a=h(n,["executableCode"]);a!=null&&p(t,["executableCode"],a);const u=h(n,["fileData"]);u!=null&&p(t,["fileData"],aV(u));const d=h(n,["functionCall"]);d!=null&&p(t,["functionCall"],lV(d));const f=h(n,["functionResponse"]);f!=null&&p(t,["functionResponse"],f);const m=h(n,["inlineData"]);m!=null&&p(t,["inlineData"],PP(m));const _=h(n,["text"]);_!=null&&p(t,["text"],_);const E=h(n,["thought"]);E!=null&&p(t,["thought"],E);const T=h(n,["thoughtSignature"]);T!=null&&p(t,["thoughtSignature"],T);const w=h(n,["videoMetadata"]);return w!=null&&p(t,["videoMetadata"],w),t}function jV(n,e){const t={},i=h(n,["productImage"]);return i!=null&&p(t,["image"],ir(i)),t}function QV(n,e,t){const i={},s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const a=h(n,["baseSteps"]);e!==void 0&&a!=null&&p(e,["parameters","baseSteps"],a);const u=h(n,["outputGcsUri"]);e!==void 0&&u!=null&&p(e,["parameters","storageUri"],u);const d=h(n,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const f=h(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const m=h(n,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const _=h(n,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const E=h(n,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const T=h(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T);const w=h(n,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const N=h(n,["labels"]);return e!==void 0&&N!=null&&p(e,["labels"],N),i}function XV(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["source"]);a!=null&&ZV(a,i);const u=h(e,["config"]);return u!=null&&QV(u,i),i}function WV(n,e){const t={},i=h(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Kh(a))),p(t,["generatedImages"],s)}return t}function ZV(n,e,t){const i={},s=h(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const a=h(n,["personImage"]);e!==void 0&&a!=null&&p(e,["instances[0]","personImage","image"],ir(a));const u=h(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(f=>jV(f))),p(e,["instances[0]","productImages"],d)}return i}function ek(n,e){const t={},i=h(n,["referenceImage"]);i!=null&&p(t,["referenceImage"],ir(i));const s=h(n,["referenceId"]);s!=null&&p(t,["referenceId"],s);const a=h(n,["referenceType"]);a!=null&&p(t,["referenceType"],a);const u=h(n,["maskImageConfig"]);u!=null&&p(t,["maskImageConfig"],YV(u));const d=h(n,["controlImageConfig"]);d!=null&&p(t,["controlImageConfig"],qP(d));const f=h(n,["styleImageConfig"]);f!=null&&p(t,["styleImageConfig"],f);const m=h(n,["subjectImageConfig"]);return m!=null&&p(t,["subjectImageConfig"],m),t}function Kb(n,e){const t={},i=h(n,["safetyAttributes","categories"]);i!=null&&p(t,["categories"],i);const s=h(n,["safetyAttributes","scores"]);s!=null&&p(t,["scores"],s);const a=h(n,["contentType"]);return a!=null&&p(t,["contentType"],a),t}function $b(n,e){const t={},i=h(n,["safetyAttributes","categories"]);i!=null&&p(t,["categories"],i);const s=h(n,["safetyAttributes","scores"]);s!=null&&p(t,["scores"],s);const a=h(n,["contentType"]);return a!=null&&p(t,["contentType"],a),t}function tk(n,e){const t={},i=h(n,["category"]);if(i!=null&&p(t,["category"],i),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["threshold"]);return s!=null&&p(t,["threshold"],s),t}function nk(n,e){const t={},i=h(n,["image"]);return i!=null&&p(t,["image"],ir(i)),t}function ik(n,e,t){const i={},s=h(n,["mode"]);e!==void 0&&s!=null&&p(e,["parameters","mode"],s);const a=h(n,["maxPredictions"]);e!==void 0&&a!=null&&p(e,["parameters","maxPredictions"],a);const u=h(n,["confidenceThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","confidenceThreshold"],u);const d=h(n,["maskDilation"]);e!==void 0&&d!=null&&p(e,["parameters","maskDilation"],d);const f=h(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&p(e,["parameters","binaryColorThreshold"],f);const m=h(n,["labels"]);return e!==void 0&&m!=null&&p(e,["labels"],m),i}function rk(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["source"]);a!=null&&ok(a,i);const u=h(e,["config"]);return u!=null&&ik(u,i),i}function sk(n,e){const t={},i=h(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>NV(a))),p(t,["generatedMasks"],s)}return t}function ok(n,e,t){const i={},s=h(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const a=h(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],ir(a));const u=h(n,["scribbleImage"]);return e!==void 0&&u!=null&&p(e,["instances[0]","scribble"],nk(u)),i}function ak(n,e){const t={},i=h(n,["retrievalConfig"]);i!=null&&p(t,["retrievalConfig"],i);const s=h(n,["functionCallingConfig"]);return s!=null&&p(t,["functionCallingConfig"],uV(s)),t}function lk(n,e){const t={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(n,["computerUse"]);i!=null&&p(t,["computerUse"],i);const s=h(n,["fileSearch"]);s!=null&&p(t,["fileSearch"],s);const a=h(n,["codeExecution"]);if(a!=null&&p(t,["codeExecution"],a),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=h(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>T)),p(t,["functionDeclarations"],E)}const d=h(n,["googleMaps"]);d!=null&&p(t,["googleMaps"],UV(d));const f=h(n,["googleSearch"]);f!=null&&p(t,["googleSearch"],LV(f));const m=h(n,["googleSearchRetrieval"]);m!=null&&p(t,["googleSearchRetrieval"],m);const _=h(n,["urlContext"]);return _!=null&&p(t,["urlContext"],_),t}function Yb(n,e){const t={},i=h(n,["retrieval"]);i!=null&&p(t,["retrieval"],i);const s=h(n,["computerUse"]);if(s!=null&&p(t,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=h(n,["codeExecution"]);a!=null&&p(t,["codeExecution"],a);const u=h(n,["enterpriseWebSearch"]);u!=null&&p(t,["enterpriseWebSearch"],u);const d=h(n,["functionDeclarations"]);if(d!=null){let T=d;Array.isArray(T)&&(T=T.map(w=>cV(w))),p(t,["functionDeclarations"],T)}const f=h(n,["googleMaps"]);f!=null&&p(t,["googleMaps"],f);const m=h(n,["googleSearch"]);m!=null&&p(t,["googleSearch"],m);const _=h(n,["googleSearchRetrieval"]);_!=null&&p(t,["googleSearchRetrieval"],_);const E=h(n,["urlContext"]);return E!=null&&p(t,["urlContext"],E),t}function uk(n,e){const t={},i=h(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const s=h(n,["createTime"]);s!=null&&p(t,["createTime"],s);const a=h(n,["updateTime"]);return a!=null&&p(t,["updateTime"],a),t}function ck(n,e){const t={},i=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&p(t,["baseModel"],i);const s=h(n,["createTime"]);s!=null&&p(t,["createTime"],s);const a=h(n,["updateTime"]);return a!=null&&p(t,["updateTime"],a),t}function dk(n,e,t){const i={},s=h(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const a=h(n,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=h(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function fk(n,e,t){const i={},s=h(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const a=h(n,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=h(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function hk(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","name"],tt(n,s));const a=h(e,["config"]);return a!=null&&dk(a,i),i}function mk(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["config"]);return a!=null&&fk(a,i),i}function pk(n,e,t){const i={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const a=h(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const u=h(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const d=h(n,["includeRaiReason"]);e!==void 0&&d!=null&&p(e,["parameters","includeRaiReason"],d);const f=h(n,["outputMimeType"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","mimeType"],f);const m=h(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const _=h(n,["enhanceInputImage"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],_);const E=h(n,["imagePreservationFactor"]);e!==void 0&&E!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const T=h(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const w=h(n,["numberOfImages"]);e!==void 0&&w!=null&&p(e,["parameters","sampleCount"],w);const N=h(n,["mode"]);return e!==void 0&&N!=null&&p(e,["parameters","mode"],N),i}function gk(n,e,t){const i={},s=h(e,["model"]);s!=null&&p(i,["_url","model"],tt(n,s));const a=h(e,["image"]);a!=null&&p(i,["instances[0]","image"],ir(a));const u=h(e,["upscaleFactor"]);u!=null&&p(i,["parameters","upscaleConfig","upscaleFactor"],u);const d=h(e,["config"]);return d!=null&&pk(d,i),i}function yk(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Kh(u))),p(t,["generatedImages"],a)}return t}function _k(n,e){const t={},i=h(n,["uri"]);i!=null&&p(t,["uri"],i);const s=h(n,["encodedVideo"]);s!=null&&p(t,["videoBytes"],co(s));const a=h(n,["encoding"]);return a!=null&&p(t,["mimeType"],a),t}function vk(n,e){const t={},i=h(n,["gcsUri"]);i!=null&&p(t,["uri"],i);const s=h(n,["bytesBase64Encoded"]);s!=null&&p(t,["videoBytes"],co(s));const a=h(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function Ek(n,e){const t={},i=h(n,["image"]);i!=null&&p(t,["_self"],ir(i));const s=h(n,["maskMode"]);return s!=null&&p(t,["maskMode"],s),t}function Tk(n,e){const t={},i=h(n,["image"]);i!=null&&p(t,["image"],$h(i));const s=h(n,["referenceType"]);return s!=null&&p(t,["referenceType"],s),t}function Sk(n,e){const t={},i=h(n,["image"]);i!=null&&p(t,["image"],ir(i));const s=h(n,["referenceType"]);return s!=null&&p(t,["referenceType"],s),t}function Jb(n,e){const t={},i=h(n,["uri"]);i!=null&&p(t,["uri"],i);const s=h(n,["videoBytes"]);s!=null&&p(t,["encodedVideo"],co(s));const a=h(n,["mimeType"]);return a!=null&&p(t,["encoding"],a),t}function jb(n,e){const t={},i=h(n,["uri"]);i!=null&&p(t,["gcsUri"],i);const s=h(n,["videoBytes"]);s!=null&&p(t,["bytesBase64Encoded"],co(s));const a=h(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ak(n,e){const t={},i=h(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function xk(n){const e={},t=h(n,["config"]);return t!=null&&Ak(t,e),e}function bk(n,e){const t={},i=h(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function wk(n){const e={},t=h(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=h(n,["config"]);return i!=null&&bk(i,e),e}function Ik(n){const e={},t=h(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function Ck(n,e){const t={},i=h(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const s=h(n,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),t}function Rk(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const i=h(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const a=h(n,["error"]);a!=null&&p(e,["error"],a);const u=h(n,["response"]);return u!=null&&p(e,["response"],Dk(u)),e}function Nk(n){const e={},t=h(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=h(n,["fileName"]);i!=null&&p(e,["fileName"],i);const s=h(n,["config"]);return s!=null&&Ck(s,e),e}function Dk(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["parent"]);i!=null&&p(e,["parent"],i);const s=h(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function Mk(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=h(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function Pk(n){const e={},t=h(n,["config"]);return t!=null&&Mk(t,e),e}function Vk(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=h(n,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function Qb(n,e){const t={},i=h(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const s=h(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const a=h(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>f)),p(e,["customMetadata"],d)}const u=h(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function kk(n){const e={},t=h(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=h(n,["config"]);return i!=null&&Qb(i,e),e}function Uk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lk="Content-Type",Ok="X-Server-Timeout",Fk="User-Agent",Yg="x-goog-api-client",qk="1.41.0",Bk=`google-genai-sdk/${qk}`,Gk="v1beta1",zk="v1beta",Hk=5,Kk=[408,429,500,502,503,504];class $k{constructor(e){var t,i,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Gk}else{if(!this.clientOptions.apiKey)throw new Hc({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:zk,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const s=[this.getRequestUrlInternal(t)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Bg.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))s.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(t))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,s){if(t&&t.timeout||s){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&Yk(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await gA(s),new Gg(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await gA(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Xi(this,arguments,function*(){var i;const s=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let u="";const d="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:_}=yield Pe(s.read());if(m){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(_,{stream:!0});try{const N=JSON.parse(E);if("error"in N){const k=JSON.parse(JSON.stringify(N.error)),V=k.status,$=k.code,ne=`got status: ${V}. ${JSON.stringify(N)}`;if($>=400&&$<600)throw new Hc({message:ne,status:$})}}catch(N){if(N.name==="ApiError")throw N}u+=E;let T=-1,w=0;for(;;){T=-1,w=0;for(const V of f){const $=u.indexOf(V);$!==-1&&(T===-1||$<T)&&(T=$,w=V.length)}if(T===-1)break;const N=u.substring(0,T);u=u.substring(T+w);const k=N.trim();if(k.startsWith(d)){const V=k.substring(d.length).trim();try{const $=new Response(V,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Pe(new Gg($))}catch($){throw new Error(`exception parsing stream chunk ${V}. ${$}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,t){var i;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,t);const s=this.clientOptions.httpOptions.retryOptions;return UD(async()=>{const u=await fetch(e,t);if(u.ok)return u;throw Kk.includes(u.status)?new Error(`Retryable HTTP Error: ${u.statusText}`):new Cb(`Non-retryable exception ${u.statusText} sending request`)},{retries:((i=s.attempts)!==null&&i!==void 0?i:Hk)-1})}getDefaultHeaders(){const e={},t=Bk+" "+this.clientOptions.userAgentExtra;return e[Fk]=t,e[Yg]=t,e[Lk]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(Ok,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);s.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const f={file:s},m=this.getFileName(e),_=_e("upload/v1beta/files",f._url),E=await this.fetchUploadUrl(_,s.sizeBytes,s.mimeType,m,f,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var s;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),f=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),E={};i!=null&&Qb(i,E);const T=await this.fetchUploadUrl(m,d,f,_,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,s,a,u){var d;let f={};u?f=u:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:f});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function gA(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(i);throw t>=400&&t<600?new Hc({message:s,status:t}):new Error(s)}}function Yk(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f)){const m=u[f],_=d[f];m&&typeof m=="object"&&!Array.isArray(m)&&_&&typeof _=="object"&&!Array.isArray(_)?d[f]=i(_,m):(_&&m&&typeof _!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof _}, New type: ${typeof m}. Overwriting.`),d[f]=m)}return d}const s=i(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jk="mcp_used/unknown";let jk=!1;function Xb(n){for(const e of n)if(Qk(e)||typeof e=="object"&&"inputSchema"in e)return!0;return jk}function Wb(n){var e;const t=(e=n[Yg])!==null&&e!==void 0?e:"";n[Yg]=(t+` ${Jk}`).trimStart()}function Qk(n){return n!==null&&typeof n=="object"&&n instanceof Gy}function Xk(n){return Xi(this,arguments,function*(t,i=100){let s,a=0;for(;a<i;){const u=yield Pe(t.listTools({cursor:s}));for(const d of u.tools)yield yield Pe(d),a++;if(!u.nextCursor)break;s=u.nextCursor}})}class Gy{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Gy(e,t)}async initialize(){var e,t,i,s;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,f=(t=void 0,Wi(Xk(_))),m;m=await f.next(),e=m.done,!e;d=!0){s=m.value,d=!1;const E=s;u.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=_}}catch(E){t={error:E}}finally{try{!d&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),xM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await s.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Wk(n,e,t){const i=new gM;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(i,s),e(i)}class Zk{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=n4(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const _=new Promise(Q=>{m=Q}),E=e.callbacks,T=function(){m({})},w=this.apiClient,N={onopen:T,onmessage:Q=>{Wk(w,E.onmessage,Q)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(Q){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(Q){}},k=this.webSocketFactory.create(f,t4(u),N);k.connect(),await _;const ne={setup:{model:tt(this.apiClient,e.model)}};return k.send(JSON.stringify(ne)),new e4(k,this.apiClient)}}class e4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=AP(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=SP(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Rl.PLAY)}pause(){this.sendPlaybackControl(Rl.PAUSE)}stop(){this.sendPlaybackControl(Rl.STOP)}resetContext(){this.sendPlaybackControl(Rl.RESET_CONTEXT)}close(){this.conn.close()}}function t4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function n4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function r4(n,e,t){const i=new pM;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const a=JSON.parse(s);if(n.isVertexAI()){const u=wP(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class s4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new Zk(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,s,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&Xb(e.config.tools)&&Wb(E);const T=u4(E);if(this.apiClient.isVertexAI()){const M=this.apiClient.getProject(),O=this.apiClient.getLocation(),L=this.apiClient.getApiKey(),B=!!M&&!!O||!!L;this.apiClient.getCustomBaseUrl()&&!B?_=f:(_=`${f}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,_))}else{const M=this.apiClient.getApiKey();let O="BidiGenerateContent",L="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",L="access_token"),_=`${f}/ws/google.ai.generativelanguage.${m}.GenerativeService.${O}?${L}=${M}`}let w=()=>{};const N=new Promise(M=>{w=M}),k=e.callbacks,V=function(){var M;(M=k==null?void 0:k.onopen)===null||M===void 0||M.call(k),w({})},$=this.apiClient,ne={onopen:V,onmessage:M=>{r4($,k.onmessage,M)},onerror:(t=k==null?void 0:k.onerror)!==null&&t!==void 0?t:function(M){},onclose:(i=k==null?void 0:k.onclose)!==null&&i!==void 0?i:function(M){}},Q=this.webSocketFactory.create(_,l4(T),ne);Q.connect(),await N;let se=tt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const M=this.apiClient.getProject(),O=this.apiClient.getLocation();M&&O&&(se=`projects/${M}/locations/${O}/`+se)}let z={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[yh.AUDIO]}:e.config.responseModalities=[yh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],R=[];for(const M of J)if(this.isCallableTool(M)){const O=M;R.push(await O.tool())}else R.push(M);R.length>0&&(e.config.tools=R);const D={model:se,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=TP(this.apiClient,D):z=EP(this.apiClient,D),delete z.config,Q.send(JSON.stringify(z)),new a4(Q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const o4={turnComplete:!0};class a4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Ri(t.turns),e.isVertexAI()||(i=i.map(s=>Hh(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(i4)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},o4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:bP(e)}:t={realtimeInput:xP(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function l4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function u4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yA=10;function _A(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Vl(u)){s=!0;break}if(!s)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Vl(n){return"callTool"in n&&typeof n.callTool=="function"}function c4(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>Vl(s)))!==null&&i!==void 0?i:!1}function vA(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,s)=>{if(Vl(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(s)}),t}function EA(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d4 extends ns{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,s,a,u,d;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!c4(t)||_A(t.config))return await this.generateContentInternal(f);const m=vA(t);if(m.length>0){const k=m.map(V=>`tools[${V}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let _,E;const T=Ri(f.contents),w=(a=(s=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:yA;let N=0;for(;N<w&&(_=await this.generateContentInternal(f),!(!_.functionCalls||_.functionCalls.length===0));){const k=_.candidates[0].content,V=[];for(const $ of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Vl($)){const Q=await $.callTool(_.functionCalls);V.push(...Q)}N++,E={role:"user",parts:V},f.contents=Ri(f.contents),f.contents.push(k),f.contents.push(E),EA(f.config)&&(T.push(k),T.push(E))}return EA(f.config)&&(_.automaticFunctionCallingHistory=T),_},this.generateContentStream=async t=>{var i,s,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),_A(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const f=vA(t);if(f.length>0){const E=f.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(a=(s=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var s;let a;const u=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((s=f==null?void 0:f.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=f==null?void 0:f.safetyAttributes:u.push(f);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Sa(Wr.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var i,s,a,u,d,f;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((f=(d=t.source)===null||d===void 0?void 0:d.video)===null||f===void 0)&&f.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,s;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async f=>Vl(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&Xb(e.config.tools)){const f=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let m=Object.assign({},f);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Wb(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,i,s;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Vl(u)){const d=u,f=await d.tool();for(const m of(s=f.functionDeclarations)!==null&&s!==void 0?s:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,d)}}return a}async processAfcStream(e){var t,i,s;const a=(s=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:yA;let u=!1,d=0;const f=await this.initAfcToolsMap(e);return(function(m,_,E){return Xi(this,arguments,function*(){for(var T,w,N,k,V,$;d<a;){u&&(d++,u=!1);const z=yield Pe(m.processParamsMaybeAddMcpUsage(E)),J=yield Pe(m.generateContentStreamInternal(z)),R=[],D=[];try{for(var ne=!0,Q=(w=void 0,Wi(J)),se;se=yield Pe(Q.next()),T=se.done,!T;ne=!0){k=se.value,ne=!1;const M=k;if(yield yield Pe(M),M.candidates&&(!((V=M.candidates[0])===null||V===void 0)&&V.content)){D.push(M.candidates[0].content);for(const O of($=M.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(d<a&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(O.functionCall.name)){const L=yield Pe(_.get(O.functionCall.name).callTool([O.functionCall]));R.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(M){w={error:M}}finally{try{!ne&&!T&&(N=Q.return)&&(yield Pe(N.call(Q)))}finally{if(w)throw w.error}}if(R.length>0){u=!0;const M=new vc;M.candidates=[{content:{role:"user",parts:R}}],yield yield Pe(M);const O=[];O.push(...D),O.push({role:"user",parts:R});const L=Ri(E.contents).concat(O);E.contents=L}else break}})})(this,f,e)}async generateContentInternal(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=hA(this.apiClient,e);return d=_e("{model}:generateContent",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=pA(_),T=new vc;return Object.assign(T,E),T})}else{const m=fA(this.apiClient,e);return d=_e("{model}:generateContent",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=mA(_),T=new vc;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=hA(this.apiClient,e);return d=_e("{model}:streamGenerateContent?alt=sse",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return Xi(this,arguments,function*(){var T,w,N,k;try{for(var V=!0,$=Wi(E),ne;ne=yield Pe($.next()),T=ne.done,!T;V=!0){k=ne.value,V=!1;const Q=k,se=pA(yield Pe(Q.json()),e);se.sdkHttpResponse={headers:Q.headers};const z=new vc;Object.assign(z,se),yield yield Pe(z)}}catch(Q){w={error:Q}}finally{try{!V&&!T&&(N=$.return)&&(yield Pe(N.call($)))}finally{if(w)throw w.error}}})})}else{const m=fA(this.apiClient,e);return d=_e("{model}:streamGenerateContent?alt=sse",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return Xi(this,arguments,function*(){var T,w,N,k;try{for(var V=!0,$=Wi(E),ne;ne=yield Pe($.next()),T=ne.done,!T;V=!0){k=ne.value,V=!1;const Q=k,se=mA(yield Pe(Q.json()),e);se.sdkHttpResponse={headers:Q.headers};const z=new vc;Object.assign(z,se),yield yield Pe(z)}}catch(Q){w={error:Q}}finally{try{!V&&!T&&(N=$.return)&&(yield Pe(N.call($)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=iV(this.apiClient,e);return d=_e("{model}:predict",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=sV(_),T=new jS;return Object.assign(T,E),T})}else{const m=nV(this.apiClient,e);return d=_e("{model}:batchEmbedContents",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=rV(_),T=new jS;return Object.assign(T,E),T})}}async generateImagesInternal(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=gV(this.apiClient,e);return d=_e("{model}:predict",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=_V(_),T=new QS;return Object.assign(T,E),T})}else{const m=pV(this.apiClient,e);return d=_e("{model}:predict",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=yV(_),T=new QS;return Object.assign(T,E),T})}}async editImageInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=WP(this.apiClient,e);return a=_e("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{const m=ZP(f),_=new iM;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=gk(this.apiClient,e);return a=_e("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{const m=yk(f),_=new rM;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=XV(this.apiClient,e);return a=_e("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const m=WV(f),_=new sM;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=rk(this.apiClient,e);return a=_e("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const m=sk(f),_=new oM;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=kV(this.apiClient,e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>$g(_))}else{const m=VV(this.apiClient,e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Kg(_))}}async listInternal(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=HV(this.apiClient,e);return d=_e("{models_url}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=$V(_),T=new XS;return Object.assign(T,E),T})}else{const m=zV(this.apiClient,e);return d=_e("{models_url}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=KV(_),T=new XS;return Object.assign(T,E),T})}}async update(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=mk(this.apiClient,e);return d=_e("{model}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>$g(_))}else{const m=hk(this.apiClient,e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Kg(_))}}async delete(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=JP(this.apiClient,e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=QP(_),T=new WS;return Object.assign(T,E),T})}else{const m=YP(this.apiClient,e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=jP(_),T=new WS;return Object.assign(T,E),T})}}async countTokens(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=HP(this.apiClient,e);return d=_e("{model}:countTokens",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=$P(_),T=new ZS;return Object.assign(T,E),T})}else{const m=zP(this.apiClient,e);return d=_e("{model}:countTokens",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=KP(_),T=new ZS;return Object.assign(T,E),T})}}async computeTokens(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=UP(this.apiClient,e);return a=_e("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{const m=LP(f),_=new aM;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=xV(this.apiClient,e);return d=_e("{model}:predictLongRunning",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const E=SV(_),T=new _h;return Object.assign(T,E),T})}else{const m=AV(this.apiClient,e);return d=_e("{model}:predictLongRunning",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const E=TV(_),T=new _h;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f4 extends ns{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=XD(e);return d=_e("{operationName}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const m=QD(e);return d=_e("{operationName}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=zD(e);return a=_e("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h4(n){const e={},t=h(n,["data"]);if(t!=null&&p(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function m4(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>A4(a))),p(e,["parts"],s)}const i=h(n,["role"]);return i!=null&&p(e,["role"],i),e}function p4(n,e,t){const i={},s=h(e,["expireTime"]);t!==void 0&&s!=null&&p(t,["expireTime"],s);const a=h(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&p(t,["newSessionExpireTime"],a);const u=h(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const d=h(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&p(t,["bidiGenerateContentSetup"],S4(n,d));const f=h(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&p(t,["fieldMask"],f),i}function g4(n,e){const t={},i=h(e,["config"]);return i!=null&&p(t,["config"],p4(n,i,t)),t}function y4(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=h(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function _4(n){const e={},t=h(n,["id"]);t!=null&&p(e,["id"],t);const i=h(n,["args"]);i!=null&&p(e,["args"],i);const s=h(n,["name"]);if(s!=null&&p(e,["name"],s),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function v4(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function E4(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function T4(n,e){const t={},i=h(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const s=h(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const a=h(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=h(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=h(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const f=h(n,["maxOutputTokens"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","maxOutputTokens"],f);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const _=h(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=h(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],By(E));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const w=h(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const N=h(n,["systemInstruction"]);e!==void 0&&N!=null&&p(e,["setup","systemInstruction"],m4(bn(N)));const k=h(n,["tools"]);if(e!==void 0&&k!=null){let J=uu(k);Array.isArray(J)&&(J=J.map(R=>b4(lu(R)))),p(e,["setup","tools"],J)}const V=h(n,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],x4(V));const $=h(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const ne=h(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const Q=h(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&p(e,["setup","realtimeInputConfig"],Q);const se=h(n,["contextWindowCompression"]);e!==void 0&&se!=null&&p(e,["setup","contextWindowCompression"],se);const z=h(n,["proactivity"]);if(e!==void 0&&z!=null&&p(e,["setup","proactivity"],z),h(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function S4(n,e){const t={},i=h(e,["model"]);i!=null&&p(t,["setup","model"],tt(n,i));const s=h(e,["config"]);return s!=null&&p(t,["config"],T4(s,t)),t}function A4(n){const e={},t=h(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=h(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const s=h(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const a=h(n,["fileData"]);a!=null&&p(e,["fileData"],y4(a));const u=h(n,["functionCall"]);u!=null&&p(e,["functionCall"],_4(u));const d=h(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const f=h(n,["inlineData"]);f!=null&&p(e,["inlineData"],h4(f));const m=h(n,["text"]);m!=null&&p(e,["text"],m);const _=h(n,["thought"]);_!=null&&p(e,["thought"],_);const E=h(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const T=h(n,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function x4(n){const e={},t=h(n,["handle"]);if(t!=null&&p(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function b4(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=h(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const s=h(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=h(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],v4(u));const d=h(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],E4(d));const f=h(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const m=h(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${t}.${a}`);e.push(...s)}else e.push(t)}return e.join(",")}function I4(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const a=w4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(m=>u.includes(m)?`generationConfig.${m}`:m));const f=[];a&&f.push(a),d.length>0&&f.push(...d),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class C4 extends ns{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=g4(this.apiClient,e);a=_e("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=I4(d,e.config);return s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R4(n,e){const t={},i=h(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function N4(n){const e={},t=h(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=h(n,["config"]);return i!=null&&R4(i,e),e}function D4(n){const e={},t=h(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function M4(n,e){const t={},i=h(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=h(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function P4(n){const e={},t=h(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=h(n,["config"]);return i!=null&&M4(i,e),e}function V4(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=h(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=h(n,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k4 extends ns{constructor(e){super(),this.apiClient=e,this.list=async t=>new Sa(Wr.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=D4(e);return a=_e("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=N4(e);s=_e("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=P4(e);return a=_e("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const m=V4(f),_=new lM;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U4 extends ns{constructor(e,t=new k4(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Sa(Wr.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xk(e);return a=_e("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ik(e);return a=_e("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wk(e);s=_e("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Pk(e);return a=_e("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const m=Vk(f),_=new uM;return Object.assign(_,m),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kk(e);return a=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const m=Uk(f),_=new cM;return Object.assign(_,m),_})}}async importFile(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Nk(e);return a=_e("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const m=Rk(f),_=new Uy;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Zb=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return Zb=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const L4=()=>Zb();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jg(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const jg=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Di extends Error{}class Vn extends Di{constructor(e,t,i,s){super(`${Vn.makeMessage(e,t,i)}`),this.status=e,this.headers=s,this.error=t}static makeMessage(e,t,i){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,i,s){if(!e||!s)return new Yh({message:i,cause:jg(t)});const a=t;return e===400?new tw(e,a,i,s):e===401?new nw(e,a,i,s):e===403?new iw(e,a,i,s):e===404?new rw(e,a,i,s):e===409?new sw(e,a,i,s):e===422?new ow(e,a,i,s):e===429?new aw(e,a,i,s):e>=500?new lw(e,a,i,s):new Vn(e,a,i,s)}}class Qg extends Vn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Yh extends Vn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class ew extends Yh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class tw extends Vn{}class nw extends Vn{}class iw extends Vn{}class rw extends Vn{}class sw extends Vn{}class ow extends Vn{}class aw extends Vn{}class lw extends Vn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O4=/^[a-z][a-z0-9+.-]*:/i,F4=n=>O4.test(n);let Xg=n=>(Xg=Array.isArray,Xg(n));const q4=Xg;let B4=q4;const TA=B4;function G4(n){if(!n)return!0;for(const e in n)return!1;return!0}function z4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const H4=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Di(`${n} must be an integer`);if(e<0)throw new Di(`${n} must be a positive integer`);return e},K4=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $4=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Al="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const J4=()=>{var n,e,t,i,s;const a=Y4();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Al,"X-Stainless-OS":AA(Deno.build.os),"X-Stainless-Arch":SA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Al,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Al,"X-Stainless-OS":AA((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":SA((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const u=j4();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Al,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Al,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function j4(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const s=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${s}.${a}.${u}`}}}return null}const SA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",AA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let $f;const Q4=()=>$f??($f=J4());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function uw(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function W4(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return uw({start(){},async pull(t){const{done:i,value:s}=await e.next();i?t.close():t.enqueue(s)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function cw(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Z4(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),s=i.cancel();i.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eU=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dw=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Tg(n,e,t){return dw(),new File(n,e??"unknown_file",t)}function tU(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const nU=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fw=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",iU=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&fw(n),rU=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function sU(n,e,t){if(dw(),n=await n,iU(n))return n instanceof File?n:Tg([await n.arrayBuffer()],n.name);if(rU(n)){const s=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Tg(await Wg(s),e,t)}const i=await Wg(n);if(e||(e=tU(n)),!(t!=null&&t.type)){const s=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(t=Object.assign(Object.assign({},t),{type:s}))}return Tg(i,e,t)}async function Wg(n){var e,t,i,s,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(fw(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(nU(n))try{for(var d=!0,f=Wi(n),m;m=await f.next(),e=m.done,!e;d=!0){s=m.value,d=!1;const _=s;u.push(...await Wg(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${oU(n)}`)}return u}function oU(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hw{constructor(e){this._client=e}}hw._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mw(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const xA=Object.freeze(Object.create(null)),aU=(n=mw)=>(function(t,...i){if(t.length===1)return t[0];let s=!1;const a=[],u=t.reduce((_,E,T)=>{var w,N,k;/[?#]/.test(E)&&(s=!0);const V=i[T];let $=(s?encodeURIComponent:n)(""+V);return T!==i.length&&(V==null||typeof V=="object"&&V.toString===((k=Object.getPrototypeOf((N=Object.getPrototypeOf((w=V.hasOwnProperty)!==null&&w!==void 0?w:xA))!==null&&N!==void 0?N:xA))===null||k===void 0?void 0:k.toString))&&($=V+"",a.push({start:_.length+E.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(V).slice(8,-1)} is not a valid path parameter`})),_+E+(T===i.length?"":$)},""),d=u.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=f.exec(d))!==null;)a.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(a.sort((_,E)=>_.start-E.start),a.length>0){let _=0;const E=a.reduce((T,w)=>{const N=" ".repeat(w.start-_),k="^".repeat(w.length);return _=w.start+w.length,T+N+k},"");throw new Di(`Path parameters result in path with invalid segments:
${a.map(T=>T.error).join(`
`)}
${u}
${E}`)}return u}),Yf=aU(mw);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pw extends hw{create(e,t){var i;const{api_version:s=this._client.apiVersion}=e,a=Eh(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Di("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Di("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Yf`/${s}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:s=this._client.apiVersion}=t??{};return this._client.delete(Yf`/${s}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:s=this._client.apiVersion}=t??{};return this._client.post(Yf`/${s}/interactions/${e}/cancel`,i)}get(e,t={},i){var s;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=Eh(a,["api_version"]);return this._client.get(Yf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(s=t==null?void 0:t.stream)!==null&&s!==void 0?s:!1}))}}pw._key=Object.freeze(["interactions"]);class gw extends pw{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lU(n){let e=0;for(const s of n)e+=s.length;const t=new Uint8Array(e);let i=0;for(const s of n)t.set(s,i),i+=s.length;return t}let Jf;function zy(n){let e;return(Jf??(e=new globalThis.TextEncoder,Jf=e.encode.bind(e)))(n)}let jf;function bA(n){let e;return(jf??(e=new globalThis.TextDecoder,jf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?zy(e):e;this.buffer=lU([this.buffer,t]);const i=[];let s;for(;(s=uU(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){i.push(bA(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,u=bA(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Jh.NEWLINE_CHARS=new Set([`
`,"\r"]);Jh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function uU(n,e){for(let s=e??0;s<n.length;s++){if(n[s]===10)return{preceding:s,index:s+1,carriage:!1};if(n[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function cU(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Th={off:0,error:200,warn:300,info:400,debug:500},wA=(n,e,t)=>{if(n){if(z4(Th,n))return n;Nn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Th))}`)}};function Ic(){}function Qf(n,e,t){return!e||Th[n]>Th[t]?Ic:e[n].bind(e)}const dU={error:Ic,warn:Ic,info:Ic,debug:Ic};let IA=new WeakMap;function Nn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return dU;const s=IA.get(t);if(s&&s[0]===i)return s[1];const a={error:Qf("error",t,i),warn:Qf("warn",t,i),info:Qf("info",t,i),debug:Qf("debug",t,i)};return IA.set(t,[i,a]),a}const Xo=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nl{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let s=!1;const a=i?Nn(i):console;function u(){return Xi(this,arguments,function*(){var f,m,_,E;if(s)throw new Di("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let T=!1;try{try{for(var w=!0,N=Wi(fU(e,t)),k;k=yield Pe(N.next()),f=k.done,!f;w=!0){E=k.value,w=!1;const V=E;if(!T)if(V.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Pe(JSON.parse(V.data))}catch($){throw a.error("Could not parse message into JSON:",V.data),a.error("From chunk:",V.raw),$}}}catch(V){m={error:V}}finally{try{!w&&!f&&(_=N.return)&&(yield Pe(_.call(N)))}finally{if(m)throw m.error}}T=!0}catch(V){if(Jg(V))return yield Pe(void 0);throw V}finally{T||t.abort()}})}return new Nl(u,t,i)}static fromReadableStream(e,t,i){let s=!1;function a(){return Xi(this,arguments,function*(){var f,m,_,E;const T=new Jh,w=cw(e);try{for(var N=!0,k=Wi(w),V;V=yield Pe(k.next()),f=V.done,!f;N=!0){E=V.value,N=!1;const $=E;for(const ne of T.decode($))yield yield Pe(ne)}}catch($){m={error:$}}finally{try{!N&&!f&&(_=k.return)&&(yield Pe(_.call(k)))}finally{if(m)throw m.error}}for(const $ of T.flush())yield yield Pe($)})}function u(){return Xi(this,arguments,function*(){var f,m,_,E;if(s)throw new Di("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let T=!1;try{try{for(var w=!0,N=Wi(a()),k;k=yield Pe(N.next()),f=k.done,!f;w=!0){E=k.value,w=!1;const V=E;T||V&&(yield yield Pe(JSON.parse(V)))}}catch(V){m={error:V}}finally{try{!w&&!f&&(_=N.return)&&(yield Pe(_.call(N)))}finally{if(m)throw m.error}}T=!0}catch(V){if(Jg(V))return yield Pe(void 0);throw V}finally{T||t.abort()}})}return new Nl(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),s=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Nl(()=>s(e),this.controller,this.client),new Nl(()=>s(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return uw({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:a}=await t.next();if(a)return i.close();const u=zy(JSON.stringify(s)+`
`);i.enqueue(u)}catch(s){i.error(s)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function fU(n,e){return Xi(this,arguments,function*(){var i,s,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Di("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Di("Attempted to iterate over a response with no body");const d=new mU,f=new Jh,m=cw(n.body);try{for(var _=!0,E=Wi(hU(m)),T;T=yield Pe(E.next()),i=T.done,!i;_=!0){u=T.value,_=!1;const w=u;for(const N of f.decode(w)){const k=d.decode(N);k&&(yield yield Pe(k))}}}catch(w){s={error:w}}finally{try{!_&&!i&&(a=E.return)&&(yield Pe(a.call(E)))}finally{if(s)throw s.error}}for(const w of f.flush()){const N=d.decode(w);N&&(yield yield Pe(N))}})}function hU(n){return Xi(this,arguments,function*(){var t,i,s,a;let u=new Uint8Array;try{for(var d=!0,f=Wi(n),m;m=yield Pe(f.next()),t=m.done,!t;d=!0){a=m.value,d=!1;const _=a;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?zy(_):_;let T=new Uint8Array(u.length+E.length);T.set(u),T.set(E,u.length),u=T;let w;for(;(w=cU(u))!==-1;)yield yield Pe(u.slice(0,w)),u=u.slice(w)}}catch(_){i={error:_}}finally{try{!d&&!t&&(s=f.return)&&(yield Pe(s.call(f)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Pe(u))})}class mU{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,s]=pU(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function pU(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function gU(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:s,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return Nn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Nl.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const f=t.headers.get("content-type"),m=(d=f==null?void 0:f.split(";")[0])===null||d===void 0?void 0:d.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return Nn(n).debug(`[${i}] response parsed`,Xo({retryOfRequestLogID:s,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hy extends Promise{constructor(e,t,i=gU){super(s=>{s(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Hy(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yw=Symbol("brand.privateNullableHeaders");function*yU(n){if(!n)return;if(yw in n){const{values:i,nulls:s}=n;yield*i.entries();for(const a of s)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():TA(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const s=i[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=TA(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[s,null]),yield[s,d])}}const Ec=n=>{const e=new Headers,t=new Set;for(const i of n){const s=new Set;for(const[a,u]of yU(i)){const d=a.toLowerCase();s.has(d)||(e.delete(a),s.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[yw]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sg=n=>{var e,t,i,s,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=LD)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||a===void 0?void 0:a.call(s,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _w;class jh{constructor(e){var t,i,s,a,u,d,f,{baseURL:m=Sg("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Sg("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,T=Eh(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:_,apiVersion:E},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:jh.DEFAULT_TIMEOUT,this.logger=(s=w.logger)!==null&&s!==void 0?s:console;const N="warn";this.logLevel=N,this.logLevel=(u=(a=wA(w.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:wA(Sg("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:N,this.fetchOptions=w.fetchOptions,this.maxRetries=(d=w.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(f=w.fetch)!==null&&f!==void 0?f:X4(),this.encoder=eU,this._options=w,this.apiKey=_,this.apiVersion=E,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Ec([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Ec([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ec([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Di(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Al}`}defaultIdempotencyKey(){return`stainless-node-retry-${L4()}`}makeStatusError(e,t,i,s){return Vn.generate(e,t,i,s)}buildURL(e,t,i){const s=!this.baseURLOverridden()&&i||this.baseURL,a=F4(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return G4(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(s=>Object.assign({method:e,path:t},s)))}request(e,t=null){return new Hy(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var s,a,u;const d=await e,f=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;t==null&&(t=f),await this.prepareOptions(d);const{req:m,url:_,timeout:E}=await this.buildRequest(d,{retryCount:f-t});await this.prepareRequest(m,{url:_,options:d});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,N=Date.now();if(Nn(this).debug(`[${T}] sending request`,Xo({retryOfRequestLogID:i,method:d.method,url:_,options:d,headers:m.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new Qg;const k=new AbortController,V=await this.fetchWithTimeout(_,m,E,k).catch(jg),$=Date.now();if(V instanceof globalThis.Error){const Q=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Qg;const se=Jg(V)||/timed? ?out/i.test(String(V)+("cause"in V?String(V.cause):""));if(t)return Nn(this).info(`[${T}] connection ${se?"timed out":"failed"} - ${Q}`),Nn(this).debug(`[${T}] connection ${se?"timed out":"failed"} (${Q})`,Xo({retryOfRequestLogID:i,url:_,durationMs:$-N,message:V.message})),this.retryRequest(d,t,i??T);throw Nn(this).info(`[${T}] connection ${se?"timed out":"failed"} - error; no more retries left`),Nn(this).debug(`[${T}] connection ${se?"timed out":"failed"} (error; no more retries left)`,Xo({retryOfRequestLogID:i,url:_,durationMs:$-N,message:V.message})),se?new ew:new Yh({cause:V})}const ne=`[${T}${w}] ${m.method} ${_} ${V.ok?"succeeded":"failed"} with status ${V.status} in ${$-N}ms`;if(!V.ok){const Q=await this.shouldRetry(V);if(t&&Q){const M=`retrying, ${t} attempts remaining`;return await Z4(V.body),Nn(this).info(`${ne} - ${M}`),Nn(this).debug(`[${T}] response error (${M})`,Xo({retryOfRequestLogID:i,url:V.url,status:V.status,headers:V.headers,durationMs:$-N})),this.retryRequest(d,t,i??T,V.headers)}const se=Q?"error; no more retries left":"error; not retryable";Nn(this).info(`${ne} - ${se}`);const z=await V.text().catch(M=>jg(M).message),J=K4(z),R=J?void 0:z;throw Nn(this).debug(`[${T}] response error (${se})`,Xo({retryOfRequestLogID:i,url:V.url,status:V.status,headers:V.headers,message:R,durationMs:Date.now()-N})),this.makeStatusError(V.status,J,R,V.headers)}return Nn(this).info(ne),Nn(this).debug(`[${T}] response start`,Xo({retryOfRequestLogID:i,url:V.url,status:V.status,headers:V.headers,durationMs:$-N})),{response:V,options:d,controller:k,requestLogID:T,retryOfRequestLogID:i,startTime:N}}async fetchWithTimeout(e,t,i,s){const a=t||{},{signal:u,method:d}=a,f=Eh(a,["signal","method"]),m=this._makeAbort(s);u&&u.addEventListener("abort",m,{once:!0});const _=setTimeout(m,i),E=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,T=Object.assign(Object.assign(Object.assign({signal:s.signal},E?{duplex:"half"}:{}),{method:"GET"}),f);d&&(T.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(_)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,s){var a;let u;const d=s==null?void 0:s.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(u=m)}const f=s==null?void 0:s.get("retry-after");if(f&&!u){const m=parseFloat(f);Number.isNaN(m)?u=Date.parse(f)-Date.now():u=m*1e3}if(!(u&&0<=u&&u<60*1e3)){const m=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,m)}return await $4(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,s,a;const u=Object.assign({},e),{method:d,path:f,query:m,defaultBaseURL:_}=u,E=this.buildURL(f,m,_);"timeout"in u&&H4("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:T,body:w}=this.buildBody({options:u}),N=await this.buildHeaders({options:e,method:d,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:N},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:s}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Ec([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Q4()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Ec([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:W4(e)}:this.encoder({body:e,headers:i})}}jh.DEFAULT_TIMEOUT=6e4;class cn extends jh{constructor(){super(...arguments),this.interactions=new gw(this)}}_w=cn;cn.GeminiNextGenAPIClient=_w;cn.GeminiNextGenAPIClientError=Di;cn.APIError=Vn;cn.APIConnectionError=Yh;cn.APIConnectionTimeoutError=ew;cn.APIUserAbortError=Qg;cn.NotFoundError=rw;cn.ConflictError=sw;cn.RateLimitError=aw;cn.BadRequestError=tw;cn.AuthenticationError=nw;cn.InternalServerError=lw;cn.PermissionDeniedError=iw;cn.UnprocessableEntityError=ow;cn.toFile=sU;cn.Interactions=gw;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _U(n,e){const t={},i=h(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function vU(n,e){const t={},i=h(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function EU(n,e){const t={},i=h(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function TU(n,e){const t={},i=h(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function SU(n,e,t){const i={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=h(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=h(n,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=h(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(h(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(h(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=h(n,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const f=h(n,["learningRate"]);if(e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","learningRate"],f),h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(h(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(h(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(h(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(h(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(h(n,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return i}function AU(n,e,t){const i={};let s=h(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const J=h(n,["validationDataset"]);e!==void 0&&J!=null&&p(e,["supervisedTuningSpec"],Ag(J))}else if(s==="PREFERENCE_TUNING"){const J=h(n,["validationDataset"]);e!==void 0&&J!=null&&p(e,["preferenceOptimizationSpec"],Ag(J))}else if(s==="DISTILLATION"){const J=h(n,["validationDataset"]);e!==void 0&&J!=null&&p(e,["distillationSpec"],Ag(J))}const a=h(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=h(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=h(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const J=h(n,["epochCount"]);e!==void 0&&J!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],J)}else if(d==="PREFERENCE_TUNING"){const J=h(n,["epochCount"]);e!==void 0&&J!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],J)}else if(d==="DISTILLATION"){const J=h(n,["epochCount"]);e!==void 0&&J!=null&&p(e,["distillationSpec","hyperParameters","epochCount"],J)}let f=h(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const J=h(n,["learningRateMultiplier"]);e!==void 0&&J!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],J)}else if(f==="PREFERENCE_TUNING"){const J=h(n,["learningRateMultiplier"]);e!==void 0&&J!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],J)}else if(f==="DISTILLATION"){const J=h(n,["learningRateMultiplier"]);e!==void 0&&J!=null&&p(e,["distillationSpec","hyperParameters","learningRateMultiplier"],J)}let m=h(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const J=h(n,["exportLastCheckpointOnly"]);e!==void 0&&J!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],J)}else if(m==="PREFERENCE_TUNING"){const J=h(n,["exportLastCheckpointOnly"]);e!==void 0&&J!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],J)}else if(m==="DISTILLATION"){const J=h(n,["exportLastCheckpointOnly"]);e!==void 0&&J!=null&&p(e,["distillationSpec","exportLastCheckpointOnly"],J)}let _=h(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const J=h(n,["adapterSize"]);e!==void 0&&J!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],J)}else if(_==="PREFERENCE_TUNING"){const J=h(n,["adapterSize"]);e!==void 0&&J!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],J)}else if(_==="DISTILLATION"){const J=h(n,["adapterSize"]);e!==void 0&&J!=null&&p(e,["distillationSpec","hyperParameters","adapterSize"],J)}let E=h(t,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const J=h(n,["tuningMode"]);e!==void 0&&J!=null&&p(e,["supervisedTuningSpec","tuningMode"],J)}const T=h(n,["customBaseModel"]);e!==void 0&&T!=null&&p(e,["customBaseModel"],T);let w=h(t,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const J=h(n,["batchSize"]);e!==void 0&&J!=null&&p(e,["supervisedTuningSpec","hyperParameters","batchSize"],J)}let N=h(t,["config","method"]);if(N===void 0&&(N="SUPERVISED_FINE_TUNING"),N==="SUPERVISED_FINE_TUNING"){const J=h(n,["learningRate"]);e!==void 0&&J!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRate"],J)}const k=h(n,["labels"]);e!==void 0&&k!=null&&p(e,["labels"],k);const V=h(n,["beta"]);e!==void 0&&V!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],V);const $=h(n,["baseTeacherModel"]);e!==void 0&&$!=null&&p(e,["distillationSpec","baseTeacherModel"],$);const ne=h(n,["tunedTeacherModelSource"]);e!==void 0&&ne!=null&&p(e,["distillationSpec","tunedTeacherModelSource"],ne);const Q=h(n,["sftLossWeightMultiplier"]);e!==void 0&&Q!=null&&p(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],Q);const se=h(n,["outputUri"]);e!==void 0&&se!=null&&p(e,["outputUri"],se);const z=h(n,["encryptionSpec"]);return e!==void 0&&z!=null&&p(e,["encryptionSpec"],z),i}function xU(n,e){const t={},i=h(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const s=h(n,["preTunedModel"]);s!=null&&p(t,["preTunedModel"],s);const a=h(n,["trainingDataset"]);a!=null&&kU(a);const u=h(n,["config"]);return u!=null&&SU(u,t),t}function bU(n,e){const t={},i=h(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const s=h(n,["preTunedModel"]);s!=null&&p(t,["preTunedModel"],s);const a=h(n,["trainingDataset"]);a!=null&&UU(a,t,e);const u=h(n,["config"]);return u!=null&&AU(u,t,e),t}function wU(n,e){const t={},i=h(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function IU(n,e){const t={},i=h(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function CU(n,e,t){const i={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=h(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function RU(n,e,t){const i={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=h(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function NU(n,e){const t={},i=h(n,["config"]);return i!=null&&CU(i,t),t}function DU(n,e){const t={},i=h(n,["config"]);return i!=null&&RU(i,t),t}function MU(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const a=h(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>vw(d))),p(t,["tuningJobs"],u)}return t}function PU(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const a=h(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Zg(d))),p(t,["tuningJobs"],u)}return t}function VU(n,e){const t={},i=h(n,["name"]);i!=null&&p(t,["model"],i);const s=h(n,["name"]);return s!=null&&p(t,["endpoint"],s),t}function kU(n,e){const t={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=h(n,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),p(t,["examples","examples"],s)}return t}function UU(n,e,t){const i={};let s=h(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const u=h(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(s==="PREFERENCE_TUNING"){const u=h(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(s==="DISTILLATION"){const u=h(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}let a=h(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=h(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=h(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=h(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}if(h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function vw(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["name"]);s!=null&&p(t,["name"],s);const a=h(n,["state"]);a!=null&&p(t,["state"],kb(a));const u=h(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=h(n,["tuningTask","startTime"]);d!=null&&p(t,["startTime"],d);const f=h(n,["tuningTask","completeTime"]);f!=null&&p(t,["endTime"],f);const m=h(n,["updateTime"]);m!=null&&p(t,["updateTime"],m);const _=h(n,["description"]);_!=null&&p(t,["description"],_);const E=h(n,["baseModel"]);E!=null&&p(t,["baseModel"],E);const T=h(n,["_self"]);return T!=null&&p(t,["tunedModel"],VU(T)),t}function Zg(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["name"]);s!=null&&p(t,["name"],s);const a=h(n,["state"]);a!=null&&p(t,["state"],kb(a));const u=h(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=h(n,["startTime"]);d!=null&&p(t,["startTime"],d);const f=h(n,["endTime"]);f!=null&&p(t,["endTime"],f);const m=h(n,["updateTime"]);m!=null&&p(t,["updateTime"],m);const _=h(n,["error"]);_!=null&&p(t,["error"],_);const E=h(n,["description"]);E!=null&&p(t,["description"],E);const T=h(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const w=h(n,["tunedModel"]);w!=null&&p(t,["tunedModel"],w);const N=h(n,["preTunedModel"]);N!=null&&p(t,["preTunedModel"],N);const k=h(n,["supervisedTuningSpec"]);k!=null&&p(t,["supervisedTuningSpec"],k);const V=h(n,["preferenceOptimizationSpec"]);V!=null&&p(t,["preferenceOptimizationSpec"],V);const $=h(n,["distillationSpec"]);$!=null&&p(t,["distillationSpec"],$);const ne=h(n,["tuningDataStats"]);ne!=null&&p(t,["tuningDataStats"],ne);const Q=h(n,["encryptionSpec"]);Q!=null&&p(t,["encryptionSpec"],Q);const se=h(n,["partnerModelTuningSpec"]);se!=null&&p(t,["partnerModelTuningSpec"],se);const z=h(n,["customBaseModel"]);z!=null&&p(t,["customBaseModel"],z);const J=h(n,["experiment"]);J!=null&&p(t,["experiment"],J);const R=h(n,["labels"]);R!=null&&p(t,["labels"],R);const D=h(n,["outputUri"]);D!=null&&p(t,["outputUri"],D);const M=h(n,["pipelineJob"]);M!=null&&p(t,["pipelineJob"],M);const O=h(n,["serviceAccount"]);O!=null&&p(t,["serviceAccount"],O);const L=h(n,["tunedModelDisplayName"]);L!=null&&p(t,["tunedModelDisplayName"],L);const B=h(n,["veoTuningSpec"]);return B!=null&&p(t,["veoTuningSpec"],B),t}function LU(n,e){const t={},i=h(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=h(n,["name"]);s!=null&&p(t,["name"],s);const a=h(n,["metadata"]);a!=null&&p(t,["metadata"],a);const u=h(n,["done"]);u!=null&&p(t,["done"],u);const d=h(n,["error"]);return d!=null&&p(t,["error"],d),t}function Ag(n,e){const t={},i=h(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const s=h(n,["vertexDatasetResource"]);return s!=null&&p(t,["validationDatasetUri"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OU extends ns{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Sa(Wr.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),a=await this.tuneMldevInternal(s);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:qg.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=IU(e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>Zg(_))}else{const m=wU(e);return d=_e("{name}",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>vw(_))}}async listInternal(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=DU(e);return d=_e("tuningJobs",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=PU(_),T=new eA;return Object.assign(T,E),T})}else{const m=NU(e);return d=_e("tunedModels",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=MU(_),T=new eA;return Object.assign(T,E),T})}}async cancel(e){var t,i,s,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const m=vU(e);return d=_e("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=TU(_),T=new tA;return Object.assign(T,E),T})}else{const m=_U(e);return d=_e("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=EU(_),T=new tA;return Object.assign(T,E),T})}}async tuneInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=bU(e,e);return a=_e("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>Zg(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xU(e);return a=_e("tunedModels",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>LU(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const qU=1024*1024*8,BU=3,GU=1e3,zU=2,Sh="x-goog-upload-status";async function HU(n,e,t){var i;const s=await Ew(n,e,t),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[Sh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function KU(n,e,t){var i;const s=await Ew(n,e,t),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[Sh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=Rb(a),d=new Ly;return Object.assign(d,u),d}async function Ew(n,e,t){var i,s;let a=0,u=0,d=new Gg(new Response),f="upload";for(a=n.size;u<a;){const m=Math.min(qU,a-u),_=n.slice(u,u+m);u+m>=a&&(f+=", finalize");let E=0,T=GU;for(;E<BU&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Sh]));)E++,await YU(T),T=T*zU;if(u+=m,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[Sh])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function $U(n){return{size:n.size,type:n.type}}function YU(n){return new Promise(e=>setTimeout(e,n))}class JU{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await HU(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KU(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $U(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jU{create(e,t,i){return new QU(e,t,i)}}class QU{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CA="x-goog-api-key";class XU{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(CA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(CA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WU="gl-node/";class ZU{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new cn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout,maxRetries:(e=t==null?void 0:t.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=i.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=BD(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new XU(this.apiKey);this.apiClient=new $k({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:WU+"web",uploader:new JU,downloader:new FU}),this.models=new d4(this.apiClient),this.live=new s4(this.apiClient,s,new jU),this.batches=new y2(this.apiClient),this.chats=new W2(this.models,this.apiClient),this.caches=new j2(this.apiClient),this.files=new cP(this.apiClient),this.operations=new f4(this.apiClient),this.authTokens=new C4(this.apiClient),this.tunings=new OU(this.apiClient),this.fileSearchStores=new U4(this.apiClient)}}const Tw=[{id:"1",name:"Chilaquiles Rojos",description:"Totopos baados en salsa roja casera, con crema, queso fresco, cebolla y frijoles.",price:55,category:Zt.BREAKFAST,image:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Portada-chilaquiles-rojos.jpg/640px-Portada-chilaquiles-rojos.jpg",calories:600,prepTime:15,isPopular:!0},{id:"2",name:"Pizzeta",description:"Mini pizza individual con salsa de tomate, queso mozzarella y pepperoni.",price:35,category:Zt.LUNCH,image:"https://imgs.search.brave.com/1k_qDMgonIMohrZ5oN5_KdLIDUII8CrvarNYRZwzucw/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pLnBp/bmltZy5jb20vb3Jp/Z2luYWxzL2QyL2U2/L2ViL2QyZTZlYjA2/N2Y1M2NkNjY0ZmZi/YWZkZTEwNTlkMjk2/LmpwZw",calories:400,prepTime:12,isPopular:!0},{id:"6",name:"Torta de Adobada",description:"Bolillo crujiente con carne de cerdo adobada, aguacate, crema y vegetales frescos.",price:45,category:Zt.LUNCH,image:"https://imgs.search.brave.com/QgokHxwqmFbkBWuXvz0UZDlpD2P5SpAGmYmVRX0Ot_U/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9sYWdy/YW5kZW1leGljYW5h/ZGVsaXZlcnkuY29t/L3dwLWNvbnRlbnQv/dXBsb2Fkcy8yMDI1/LzA3L0FET0JBREEt/VE9SVEEtc2NhbGVk/LmpwZw",calories:550,prepTime:10,isPopular:!0},{id:"3",name:"Jugo de Naranja",description:"Recin exprimido, 500ml.",price:25,category:Zt.DRINKS,image:"https://imgs.search.brave.com/1PQjygHG1Z1nAebXr85AiQf8mhbqJpzmAuvtJXQCFPg/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWcu/ZnJlZXBpay5jb20v/Zm90b3MtcHJlbWl1/bS9qdWdvLW5hcmFu/amEtbmFyYW5qYS1z/b2JyZS1mb25kby1t/YWRlcmFfMjk0ODkt/NTMuanBnP3NlbXQ9/YWlzX2h5YnJpZCZ3/PTc0MCZxPTgw",calories:120,prepTime:2,isPopular:!0},{id:"4",name:"Agua de Pia",description:"Agua fresca natural de pia. 500ml.",price:20,category:Zt.DRINKS,image:"https://imgs.search.brave.com/oG-_ZOFiRhla_xUeSW5_QeWS4sD1lSl79q6e2xhD1UU/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbm1h/bWFtYWdnaWVza2l0/Y2hlbi5jb20vd3At/Y29udGVudC91cGxv/YWRzLzIwMjIvMDcv/UGluZWFwcGxlLUFn/dWEtRnJlc2NhLS03/NDV4MTAyNC5qcGc",calories:140,prepTime:1,isPopular:!0},{id:"5",name:"Agua de Jamaica",description:"Infusin refrescante de flor de jamaica natural. 500ml.",price:20,category:Zt.DRINKS,image:"https://imgs.search.brave.com/bClX_IbBLVS6jBrBVw_FB3cEoNQa7N9Kqm2UkFKlRZk/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9ibG9n/LnBpemNhZGVzYWJv/ci5jb20vd3AtY29u/dGVudC91cGxv/YWRzLzIwMTcvMDkv/QWd1YS1kZS1qYW1h/aWNhLTEuanBn",calories:110,prepTime:1,isPopular:!0}],RA=Object.values(Zt),eL="PLACEHOLDER_API_KEY",tL=async(n,e)=>{try{const t=new ZU({apiKey:eL}),s=`Eres "NutriBot", un asistente virtual amable y servicial para la cafetera de una escuela.
        Tu objetivo es ayudar a los estudiantes y maestros a elegir qu comer basndote en el men disponible.
        
        IMPORTANTE: La moneda de la escuela son los "Ucol Coins" (UC). No uses el signo de pesos ($), usa "UC" (ejemplo: 35 UC).
        
        MEN DISPONIBLE:
        ${Tw.map(d=>`- ${d.name} (${d.price} UC): ${d.description} [${d.category}, ${d.calories} cal]`).join(`
`)}
        
        REGLAS:
        1. Solo recomienda items que estn en el men.
        2. Si alguien pregunta por algo que no est (ej. Pizza), sugiere la alternativa ms cercana (ej. Mollete).
        3. S breve y amigable, estilo chat de app de delivery.
        4. Si te preguntan precios, dlos exactos en UC.
        5. Si te preguntan por opciones saludables, prioriza la categora 'Saludable' o items bajos en caloras.
        6. Puedes sugerir combos (ej. Mollete + Jugo).
        7. Habla en espaol mexicano informal pero respetuoso (usa "t", no "usted", amigable para estudiantes).
        `;return(await t.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:s}}).sendMessage({message:n})).text||"Lo siento, no entend bien."}catch(t){return console.error("Error fetching AI response:",t),"Tuve un problema pensando en una recomendacin. Podras intentar de nuevo?"}},nL=()=>{const[n,e]=xe.useState(!1),[t,i]=xe.useState(""),[s,a]=xe.useState([{role:"model",text:"Hola! Soy tu asistente de la cafetera. No sabes qu pedir? Pregntame por opciones saludables, baratas o lo ms rico del da."}]),[u,d]=xe.useState(!1),f=xe.useRef(null),m=()=>e(!n),_=()=>{var T;(T=f.current)==null||T.scrollIntoView({behavior:"smooth"})};xe.useEffect(()=>{n&&_()},[s,n]);const E=async()=>{if(!t.trim())return;const T={role:"user",text:t};a(N=>[...N,T]),i(""),d(!0),s.slice(-4).map(N=>`${N.role}: ${N.text}`);const w=await tL(T.text);a(N=>[...N,{role:"model",text:w}]),d(!1)};return S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:m,className:`fixed bottom-24 right-4 md:bottom-8 md:right-8 z-50 p-4 rounded-full shadow-lg transition-all duration-300 ${n?"bg-red-500 rotate-90 scale-0 opacity-0 hidden":"bg-gradient-to-r from-green-600 to-emerald-500 text-white hover:scale-105 animate-bounce-in"}`,children:S.jsx(wb,{className:"w-6 h-6"})}),n&&S.jsxs("div",{className:"fixed bottom-0 right-0 w-full md:w-96 h-[80vh] md:h-[600px] md:bottom-24 md:right-8 bg-white dark:bg-gray-900 shadow-2xl z-50 md:rounded-2xl overflow-hidden flex flex-col border border-gray-200 dark:border-gray-700 transition-colors animate-slide-up",children:[S.jsxs("div",{className:"bg-gradient-to-r from-green-700 to-emerald-600 p-4 flex justify-between items-center text-white",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(qN,{className:"w-6 h-6 animate-pulse"}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-bold",children:"NutriBot"}),S.jsx("p",{className:"text-xs opacity-90",children:"Asistente Inteligente"})]})]}),S.jsx("button",{onClick:m,className:"p-1 hover:bg-white/20 rounded-full transition",children:S.jsx(Ol,{className:"w-6 h-6"})})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-950 space-y-4 transition-colors",children:[s.map((T,w)=>S.jsx("div",{className:`flex ${T.role==="user"?"justify-end":"justify-start"} animate-fade-in`,children:S.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm shadow-sm ${T.role==="user"?"bg-green-600 text-white rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-700 rounded-bl-none"}`,children:T.text})},w)),u&&S.jsx("div",{className:"flex justify-start animate-fade-in",children:S.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-2xl rounded-bl-none border border-gray-200 dark:border-gray-700 shadow-sm flex items-center gap-2",children:[S.jsx(Ml,{className:"w-4 h-4 animate-spin text-green-600 dark:text-green-400"}),S.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Escribiendo..."})]})}),S.jsx("div",{ref:f})]}),S.jsx("div",{className:"p-4 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 transition-colors",children:S.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 rounded-full px-4 py-2 border border-transparent dark:border-gray-700",children:[S.jsx("input",{type:"text",value:t,onChange:T=>i(T.target.value),onKeyDown:T=>T.key==="Enter"&&E(),placeholder:"Pregunta por el men...",className:"flex-1 bg-transparent outline-none text-sm text-gray-700 dark:text-gray-200 placeholder-gray-400"}),S.jsx("button",{onClick:E,disabled:!t.trim()||u,className:`p-2 rounded-full transition ${t.trim()?"text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/30":"text-gray-400 dark:text-gray-600"}`,children:S.jsx(gD,{className:"w-5 h-5"})})]})})]})]})},iL=({orders:n,menuItems:e,adminTab:t,setAdminTab:i,adminRechargeCode:s,setAdminRechargeCode:a,adminFeedback:u,isAdminProcessing:d,isEditingItem:f,setIsEditingItem:m,editingItem:_,setEditingItem:E,setActiveScreen:T,handleAdminRecharge:w,handleUpdateOrderStatus:N,openEditItemModal:k,handleSaveItem:V,handleDeleteItem:$,handleLogout:ne})=>{const Q=n.filter(z=>z.status!==Qi.COMPLETED),se=n.filter(z=>z.status===Qi.COMPLETED);return S.jsxs("div",{className:"bg-[#0f1218] min-h-screen text-white p-6",children:[S.jsxs("div",{className:"bg-[#1e2330] p-6 rounded-[2.5rem] shadow-lg border border-gray-800 mb-8 flex flex-col md:flex-row items-center justify-between gap-4",children:[S.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto pl-2",children:[S.jsx("button",{onClick:()=>T("HOME"),className:"p-3 hover:bg-gray-700/50 rounded-2xl transition-colors text-gray-400 hover:text-white",children:S.jsx(vb,{className:"w-6 h-6"})}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:"Panel de Cocina"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Administracin de Cafetera"})]})]}),S.jsxs("div",{className:"flex bg-[#13161f] p-2 rounded-full overflow-x-auto w-full md:w-auto",children:[S.jsxs("button",{onClick:()=>i("ACTIVE"),className:`flex-1 md:flex-none px-6 py-2.5 rounded-full text-sm font-bold transition-all whitespace-nowrap flex items-center justify-center gap-2 ${t==="ACTIVE"?"bg-[#2f364a] text-white shadow-md":"text-gray-500 hover:text-gray-300"}`,children:[S.jsx(GT,{size:16})," Activos (",Q.length,")"]}),S.jsxs("button",{onClick:()=>i("HISTORY"),className:`flex-1 md:flex-none px-6 py-2.5 rounded-full text-sm font-bold transition-all whitespace-nowrap flex items-center justify-center gap-2 ${t==="HISTORY"?"bg-[#2f364a] text-white shadow-md":"text-gray-500 hover:text-gray-300"}`,children:[S.jsx(WN,{size:16})," Historial"]}),S.jsxs("button",{onClick:()=>i("RECHARGE"),className:`flex-1 md:flex-none px-6 py-2.5 rounded-full text-sm font-bold transition-all whitespace-nowrap flex items-center justify-center gap-2 ${t==="RECHARGE"?"bg-[#22c55e] text-black shadow-md shadow-green-900/20":"text-gray-500 hover:text-gray-300"}`,children:[S.jsx(zT,{size:16})," Recargas"]}),S.jsxs("button",{onClick:()=>i("MENU"),className:`flex-1 md:flex-none px-6 py-2.5 rounded-full text-sm font-bold transition-all whitespace-nowrap flex items-center justify-center gap-2 ${t==="MENU"?"bg-[#2f364a] text-white shadow-md":"text-gray-500 hover:text-gray-300"}`,children:[S.jsx(Og,{size:16})," Men"]})]})]}),S.jsxs("div",{className:"max-w-4xl mx-auto",children:[t==="MENU"&&S.jsxs("div",{className:"animate-slide-up",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h3",{className:"font-bold text-xl text-white",children:"Gestin de Platillos"}),S.jsxs("button",{onClick:()=>k(),className:"bg-green-600 hover:bg-green-700 text-white px-5 py-2.5 rounded-2xl font-bold flex items-center gap-2 shadow-lg transition-transform active:scale-95",children:[S.jsx(xb,{size:20})," Nuevo Platillo"]})]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(z=>S.jsxs("div",{className:"bg-[#1e2330] rounded-3xl p-5 shadow-sm border border-gray-800 flex flex-col group hover:border-gray-700 transition-colors",children:[S.jsxs("div",{className:"flex gap-4 mb-4",children:[S.jsx("img",{src:z.image,alt:z.name,className:"w-20 h-20 rounded-2xl object-cover bg-gray-900"}),S.jsxs("div",{className:"flex-1",children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsx("h4",{className:"font-bold text-white line-clamp-1",children:z.name}),S.jsxs("span",{className:"font-bold text-green-500 text-sm whitespace-nowrap",children:[z.price," UC"]})]}),S.jsx("p",{className:"text-xs text-gray-400 line-clamp-2 mt-1",children:z.description})]})]}),S.jsxs("div",{className:"mt-auto flex gap-2 pt-3 border-t border-gray-800",children:[S.jsxs("button",{onClick:()=>k(z),className:"flex-1 flex items-center justify-center gap-2 bg-[#2f364a] text-blue-400 py-2.5 rounded-2xl font-bold text-xs hover:bg-[#374151] transition-colors",children:[S.jsx(Ab,{size:14})," Editar"]}),S.jsxs("button",{onClick:()=>$(z.id),className:"flex-1 flex items-center justify-center gap-2 bg-[#2f364a] text-red-400 py-2.5 rounded-2xl font-bold text-xs hover:bg-[#374151] transition-colors",children:[S.jsx(Ib,{size:14})," Borrar"]})]})]},z.id))})]}),t==="ACTIVE"&&S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-slide-up",children:[Q.map(z=>S.jsxs("div",{className:"bg-[#1e2330] rounded-3xl shadow-lg border-l-4 border-l-green-500 overflow-hidden flex flex-col h-full hover:shadow-xl transition-shadow",children:[S.jsxs("div",{className:"p-5 border-b border-gray-800 bg-[#2f364a]/50 flex justify-between",children:[S.jsxs("div",{children:[S.jsxs("span",{className:"font-mono text-xl font-bold text-white",children:["#",z.pickupCode||z.id.slice(0,4)]}),S.jsx("p",{className:"text-xs text-gray-400",children:z.userId})]}),S.jsxs("div",{className:"text-right",children:[S.jsx("p",{className:"text-xs font-mono text-gray-300",children:z.pickupTime}),S.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full uppercase ${z.status==="Pendiente"?"bg-yellow-500/20 text-yellow-500":"bg-green-500/20 text-green-500"}`,children:z.status})]})]}),S.jsx("div",{className:"p-5 flex-1 space-y-2",children:z.items.map((J,R)=>S.jsxs("div",{className:"flex gap-2 text-sm text-gray-300",children:[S.jsxs("span",{className:"font-bold text-white",children:[J.quantity,"x"]})," ",S.jsx("span",{children:J.name})]},R))}),S.jsxs("div",{className:"p-4 bg-[#13161f] border-t border-gray-800 flex flex-col gap-2",children:[z.status===Qi.PENDING&&S.jsx("button",{onClick:()=>N(z.id,Qi.READY),className:"w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-2xl transition-colors",children:"Marcar Listo"}),z.status===Qi.READY&&S.jsx("button",{onClick:()=>N(z.id,Qi.COMPLETED),className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-2xl transition-colors",children:"Entregar"})]})]},z.id)),Q.length===0&&S.jsxs("div",{className:"col-span-full py-24 text-center text-gray-500 bg-[#1e2330] rounded-[2.5rem] border border-dashed border-gray-800",children:[S.jsx("div",{className:"bg-[#2f364a] w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 text-gray-400",children:S.jsx(GT,{size:40})}),S.jsx("p",{children:"No hay pedidos activos por el momento."})]})]}),t==="HISTORY"&&S.jsx("div",{className:"bg-[#1e2330] rounded-[2.5rem] shadow-lg border border-gray-800 overflow-hidden animate-fade-in p-2",children:S.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[S.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-[#13161f]",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-6 py-4 rounded-tl-2xl",children:"Cdigo"}),S.jsx("th",{className:"px-6 py-4",children:"Usuario"}),S.jsx("th",{className:"px-6 py-4",children:"Total"}),S.jsx("th",{className:"px-6 py-4 rounded-tr-2xl",children:"Estado"})]})}),S.jsx("tbody",{className:"divide-y divide-gray-800",children:se.map(z=>S.jsxs("tr",{className:"hover:bg-[#2f364a]/50 transition-colors",children:[S.jsx("td",{className:"px-6 py-4 font-bold text-white font-mono",children:z.pickupCode}),S.jsx("td",{className:"px-6 py-4",children:z.userId}),S.jsxs("td",{className:"px-6 py-4 text-green-500 font-bold",children:[z.total," UC"]}),S.jsx("td",{className:"px-6 py-4",children:S.jsx("span",{className:"bg-green-500/10 text-green-500 text-xs font-bold px-3 py-1 rounded-full border border-green-500/20",children:"Entregado"})})]},z.id))})]})}),t==="RECHARGE"&&S.jsxs("div",{className:"bg-[#1e2330] rounded-[2.5rem] p-8 shadow-2xl border border-gray-800 animate-scale-in max-w-3xl mx-auto",children:[S.jsx("h3",{className:"font-bold text-xl mb-6 text-white border-b border-gray-800 pb-4",children:"Validar Recarga"}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"relative",children:[S.jsx("input",{value:s,onChange:z=>a(z.target.value),className:"w-full bg-[#13161f] border border-gray-700 rounded-3xl pl-6 pr-32 py-5 text-white placeholder-gray-500 focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-all font-mono text-lg",placeholder:"Cdigo UCOL-..."}),S.jsx("button",{onClick:w,disabled:d||!s,className:"absolute right-2 top-2 bottom-2 bg-[#22c55e] hover:bg-green-600 disabled:bg-gray-700 disabled:text-gray-500 text-black px-8 rounded-2xl font-bold transition-all active:scale-95 shadow-lg shadow-green-900/20",children:d?S.jsx(Ml,{className:"animate-spin"}):"Validar"})]}),u&&S.jsxs("div",{className:`p-4 rounded-3xl border ${u.type==="success"?"bg-green-500/10 border-green-500/30 text-green-400":"bg-red-500/10 border-red-500/30 text-red-400"} flex items-center gap-3 animate-fade-in`,children:[u.type==="success"?S.jsx(GN,{size:20}):S.jsx(Eb,{size:20}),S.jsx("span",{className:"font-bold",children:u.msg})]}),S.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-800",children:[S.jsx("h4",{className:"text-gray-500 text-sm font-bold uppercase tracking-widest mb-4",children:"ltimas Recargas"}),S.jsx("div",{className:"space-y-3",children:S.jsxs("div",{className:"flex justify-between items-center p-4 rounded-3xl bg-[#13161f] border border-gray-800/50 hover:bg-[#1a1d29] transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"bg-green-500/20 p-2.5 rounded-2xl text-green-500",children:S.jsx(zT,{size:20})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-white text-sm font-bold font-mono",children:"UCOL-500-1234"}),S.jsx("p",{className:"text-gray-500 text-xs",children:"Hace 2 minutos"})]})]}),S.jsx("span",{className:"text-green-500 font-bold text-lg",children:"+500 UC"})]})})]})]})]})]}),f&&S.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[S.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>m(!1)}),S.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl p-6 w-full max-w-lg relative z-10 shadow-2xl overflow-y-auto max-h-[90vh] animate-scale-in",children:[S.jsx("h3",{className:"font-bold text-xl mb-4 text-gray-800 dark:text-white",children:_.id?"Editar Platillo":"Nuevo Platillo"}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Nombre"}),S.jsx("input",{type:"text",value:_.name||"",onChange:z=>E({..._,name:z.target.value}),className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-2 text-sm dark:text-white"})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Precio (UC)"}),S.jsx("input",{type:"number",value:_.price||"",onChange:z=>E({..._,price:Number(z.target.value)}),className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-2 text-sm dark:text-white"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Categora"}),S.jsx("select",{value:_.category,onChange:z=>E({..._,category:z.target.value}),className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-2 text-sm dark:text-white",children:Object.values(Zt).filter(z=>z!==Zt.ALL).map(z=>S.jsx("option",{value:z,children:z},z))})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Descripcin"}),S.jsx("textarea",{value:_.description||"",onChange:z=>E({..._,description:z.target.value}),className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-2 text-sm dark:text-white h-20 resize-none"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"URL Imagen"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"text",value:_.image||"",onChange:z=>E({..._,image:z.target.value}),placeholder:"https://...",className:"flex-1 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-2 text-sm dark:text-white"}),S.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden shrink-0",children:_.image&&S.jsx("img",{src:_.image,className:"w-full h-full object-cover"})})]})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Caloras"}),S.jsx("input",{type:"number",value:_.calories||"",onChange:z=>E({..._,calories:Number(z.target.value)}),className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-2 text-sm dark:text-white"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Tiempo Prep (min)"}),S.jsx("input",{type:"number",value:_.prepTime||"",onChange:z=>E({..._,prepTime:Number(z.target.value)}),className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-2 text-sm dark:text-white"})]})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("input",{type:"checkbox",checked:_.isPopular||!1,onChange:z=>E({..._,isPopular:z.target.checked}),className:"w-4 h-4 rounded text-green-600 focus:ring-green-500"}),S.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Marcar como Popular"})]})]}),S.jsxs("div",{className:"mt-6 flex gap-3",children:[S.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-3 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-bold rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700",children:"Cancelar"}),S.jsxs("button",{onClick:V,disabled:d,className:"flex-1 py-3 bg-green-600 text-white font-bold rounded-xl hover:bg-green-700 flex items-center justify-center gap-2",children:[d?S.jsx(Ml,{className:"animate-spin w-4 h-4"}):S.jsx(dD,{size:18})," Guardar"]})]})]})]})]})},rL=({showRechargeModal:n,setShowRechargeModal:e,rechargeStep:t,setRechargeStep:i,selectedRechargeAmount:s,handleSelectAmount:a,customRechargeInput:u,setCustomRechargeInput:d,handleFinishRecharge:f,rechargeCode:m})=>n?S.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4",children:[S.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>e(!1)}),S.jsxs("div",{className:"bg-[#1e2330] rounded-3xl p-6 w-full max-w-sm relative z-10 shadow-2xl animate-scale-in border border-gray-700/50 text-white overflow-hidden",children:[S.jsx("button",{onClick:()=>e(!1),className:"absolute top-4 right-4 p-1 text-gray-400 hover:text-white transition-colors z-50",children:S.jsx(Ol,{size:24})}),t==="SELECT_AMOUNT"?S.jsxs("div",{className:"flex flex-col items-center space-y-6 animate-fade-in pt-4",children:[S.jsxs("div",{className:"flex flex-col items-center gap-3",children:[S.jsx("div",{className:"w-14 h-14 bg-green-900/30 rounded-full flex items-center justify-center border border-green-500/20",children:S.jsx(Dl,{className:"w-7 h-7 text-green-500"})}),S.jsxs("div",{className:"text-center",children:[S.jsx("h3",{className:"text-xl font-bold text-white",children:"Elige la cantidad"}),S.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Cuntos Ucol Coins quieres recargar hoy?"})]})]}),S.jsx("div",{className:"grid grid-cols-2 gap-3 w-full",children:[20,50,100,200].map(_=>S.jsxs("button",{onClick:()=>a(_),className:"bg-[#2a3040] hover:bg-[#323a4d] border border-gray-700 hover:border-green-500/50 rounded-xl py-4 px-2 flex flex-col items-center gap-1 transition-all group",children:[S.jsxs("span",{className:"text-green-500 font-bold text-lg group-hover:scale-105 transition-transform",children:[_," UC"]}),S.jsxs("span",{className:"text-[10px] text-gray-400 font-medium",children:["$",_,".00 MXN"]})]},_))}),S.jsxs("button",{onClick:()=>a(500),className:"w-full bg-[#2a3040] hover:bg-[#323a4d] border border-gray-700 hover:border-green-500/50 rounded-xl py-4 flex flex-row items-center justify-center gap-3 transition-all group",children:[S.jsx("span",{className:"text-green-500 font-bold text-lg group-hover:scale-105 transition-transform",children:"500 UC"}),S.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"($500.00 MXN)"})]}),S.jsxs("div",{className:"w-full border-t border-gray-700 pt-4",children:[S.jsxs("div",{className:"flex justify-between items-center mb-2",children:[S.jsx("span",{className:"text-xs font-bold text-gray-400",children:"Monto Personalizado"}),S.jsx("span",{className:"text-[10px] bg-gray-700 px-2 py-0.5 rounded text-gray-300",children:"1 MXN = 1 UC"})]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsxs("div",{className:"relative flex-1",children:[S.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm font-bold",children:"UC"}),S.jsx("input",{type:"number",value:u,onChange:_=>d(_.target.value),placeholder:"0",className:"w-full bg-[#2a3040] border border-gray-600 rounded-lg pl-10 pr-3 py-2.5 text-sm font-bold text-white focus:outline-none focus:border-green-500/50 transition-colors"})]}),S.jsx("button",{onClick:()=>{const _=Math.floor(parseFloat(u));_>0&&a(_)},disabled:!u,className:"bg-gray-600 hover:bg-gray-500 disabled:opacity-50 text-white px-5 rounded-lg font-bold text-sm transition-colors",children:"Generar"})]})]})]}):S.jsxs("div",{className:"flex flex-col items-center space-y-6 animate-slide-up pt-4",children:[S.jsx("button",{onClick:()=>i("SELECT_AMOUNT"),className:"absolute top-4 left-4 p-1 text-gray-400 hover:text-white transition-colors",children:S.jsx(vb,{size:20})}),S.jsxs("div",{className:"flex flex-col items-center gap-3",children:[S.jsx("div",{className:"w-14 h-14 bg-green-900/30 rounded-full flex items-center justify-center border border-green-500/20",children:S.jsx(bb,{className:"w-7 h-7 text-green-500"})}),S.jsxs("div",{className:"text-center",children:[S.jsx("h3",{className:"text-xl font-bold text-white",children:"Cdigo de Recarga"}),S.jsxs("p",{className:"text-xs text-gray-400 mt-1 max-w-[200px]",children:["Muestra este cdigo en la ",S.jsx("span",{className:"font-bold text-white",children:"Direccin Escolar"}),"."]})]})]}),S.jsxs("div",{className:"w-full space-y-4",children:[S.jsxs("div",{className:"bg-[#153e24]/40 border border-green-800/50 rounded-xl p-4 text-center",children:[S.jsx("p",{className:"text-[10px] font-bold text-green-400 uppercase tracking-widest mb-1",children:"Monto a Pagar"}),S.jsxs("p",{className:"text-3xl font-bold text-green-500",children:["$",s,".00"]})]}),S.jsxs("div",{className:"bg-[#232936] border-2 border-dashed border-gray-600 rounded-xl p-6 text-center group relative overflow-hidden",children:[S.jsx("p",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Cdigo"}),S.jsx("p",{className:"text-xl font-mono font-bold text-white tracking-wider",children:m})]}),S.jsx("p",{className:"text-[10px] text-center text-gray-500",children:"Tu saldo se actualizar en cuanto pagues."})]}),S.jsx("button",{onClick:f,className:"w-full bg-black hover:bg-gray-900 text-white font-bold py-3.5 rounded-xl border border-gray-800 transition-all active:scale-95 shadow-lg",children:"Listo, Entendido"})]})]})]}):null,sL=()=>{};var NA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},oL=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Aw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let T=(d&15)<<2|m>>6,w=m&63;f||(w=64,u||(T=64)),i.push(t[_],t[E],t[T],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Sw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):oL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||E==null)throw new aL;const T=a<<2|d>>4;if(i.push(T),m!==64){const w=d<<4&240|m>>2;if(i.push(w),E!==64){const N=m<<6&192|E;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class aL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lL=function(n){const e=Sw(n);return Aw.encodeByteArray(e,!0)},Ah=function(n){return lL(n).replace(/\./g,"")},xw=function(n){try{return Aw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xh(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!uL(t)||(n[t]=xh(n[t],e[t]));return n}function uL(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=()=>Ky().__FIREBASE_DEFAULTS__,dL=()=>{if(typeof process>"u"||typeof NA>"u")return;const n=NA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&xw(n[1]);return e&&JSON.parse(e)},bw=()=>{try{return sL()||cL()||dL()||fL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$y=()=>{var n;return(n=bw())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mL(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ah(JSON.stringify(t)),Ah(JSON.stringify(u)),""].join(".")}const Vc={};function gL(){const n={prod:[],emulator:[]};for(const e of Object.keys(Vc))Vc[e]?n.emulator.push(e):n.prod.push(e);return n}function yL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let DA=!1;function _L(n,e){if(typeof window>"u"||typeof document>"u"||!Yy(window.location.host)||Vc[n]===e||Vc[n]||DA)return;Vc[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=gL().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,w){T.setAttribute("width","24"),T.setAttribute("id",w),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{DA=!0,u()},T}function _(T,w){T.setAttribute("id",w),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=yL(i),w=t("text"),N=document.getElementById(w)||document.createElement("span"),k=t("learnmore"),V=document.getElementById(k)||document.createElement("a"),$=t("preprendIcon"),ne=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Q=T.element;d(Q),_(V,k);const se=m();f(ne,$),Q.append(ne,N,V,se),document.body.appendChild(Q)}a?(N.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ww(){var e;const n=(e=bw())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vL(){return typeof window<"u"||Iw()}function Iw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Cw(){return!ww()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rw(){return!ww()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Nw(){try{return typeof indexedDB=="object"}catch{return!1}}function EL(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="FirebaseError";class Aa extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=TL,Object.setPrototypeOf(this,Aa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qh.prototype.create)}}class Qh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?SL(a,i):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Aa(s,d,i)}}function SL(n,e){return n.replace(AL,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const AL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Fl(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const a=n[s],u=e[s];if(PA(a)&&PA(u)){if(!Fl(a,u))return!1}else if(a!==u)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function PA(n){return n!==null&&typeof n=="object"}function xL(n,e){const t=new bL(n,e);return t.subscribe.bind(t)}class bL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");wL(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=xg),s.error===void 0&&(s.error=xg),s.complete===void 0&&(s.complete=xg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(n){return n&&n._delegate?n._delegate:n}class ca{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new hL;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RL(e))try{this.getOrInitializeService({instanceIdentifier:Wo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=Wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wo){return this.instances.has(e)}getOptions(e=Wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:CL(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Wo){return this.component?this.component.multipleInstances?e:Wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CL(n){return n===Wo?void 0:n}function RL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new IL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=[];var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const Mw={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},NL=Qe.INFO,DL={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},ML=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=DL[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jy{constructor(e){this.name=e,this._logLevel=NL,this._logHandler=ML,this._userLogHandler=null,Jy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}function PL(n){Jy.forEach(e=>{e.setLogLevel(n)})}function VL(n,e){for(const t of Jy){let i=null;e&&e.level&&(i=Mw[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(s,a,...u)=>{const d=u.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");a>=(i??s.logLevel)&&n({level:Qe[a].toLowerCase(),message:d,args:u,type:s.name})}}}const kL=(n,e)=>e.some(t=>n instanceof t);let VA,kA;function UL(){return VA||(VA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LL(){return kA||(kA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pw=new WeakMap,ey=new WeakMap,Vw=new WeakMap,bg=new WeakMap,Qy=new WeakMap;function OL(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Xs(n.result)),s()},u=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Pw.set(t,n)}).catch(()=>{}),Qy.set(e,n),e}function FL(n){if(ey.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});ey.set(n,e)}let ty={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ey.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Vw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function qL(n){ty=n(ty)}function BL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(wg(this),e,...t);return Vw.set(i,e.sort?e.sort():[e]),Xs(i)}:LL().includes(n)?function(...e){return n.apply(wg(this),e),Xs(Pw.get(this))}:function(...e){return Xs(n.apply(wg(this),e))}}function GL(n){return typeof n=="function"?BL(n):(n instanceof IDBTransaction&&FL(n),kL(n,UL())?new Proxy(n,ty):n)}function Xs(n){if(n instanceof IDBRequest)return OL(n);if(bg.has(n))return bg.get(n);const e=GL(n);return e!==n&&(bg.set(n,e),Qy.set(e,n)),e}const wg=n=>Qy.get(n);function zL(n,e,{blocked:t,upgrade:i,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),d=Xs(u);return i&&u.addEventListener("upgradeneeded",f=>{i(Xs(u.result),f.oldVersion,f.newVersion,Xs(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const HL=["get","getKey","getAll","getAllKeys","count"],KL=["put","add","delete","clear"],Ig=new Map;function UA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ig.get(e))return Ig.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=KL.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||HL.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return Ig.set(e,a),a}qL(n=>({...n,get:(e,t,i)=>UA(e,t)||n.get(e,t,i),has:(e,t)=>!!UA(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(YL(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function YL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wh="@firebase/app",ny="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new jy("@firebase/app"),JL="@firebase/app-compat",jL="@firebase/analytics-compat",QL="@firebase/analytics",XL="@firebase/app-check-compat",WL="@firebase/app-check",ZL="@firebase/auth",e6="@firebase/auth-compat",t6="@firebase/database",n6="@firebase/data-connect",i6="@firebase/database-compat",r6="@firebase/functions",s6="@firebase/functions-compat",o6="@firebase/installations",a6="@firebase/installations-compat",l6="@firebase/messaging",u6="@firebase/messaging-compat",c6="@firebase/performance",d6="@firebase/performance-compat",f6="@firebase/remote-config",h6="@firebase/remote-config-compat",m6="@firebase/storage",p6="@firebase/storage-compat",g6="@firebase/firestore",y6="@firebase/ai",_6="@firebase/firestore-compat",v6="firebase",E6="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="[DEFAULT]",T6={[wh]:"fire-core",[JL]:"fire-core-compat",[QL]:"fire-analytics",[jL]:"fire-analytics-compat",[WL]:"fire-app-check",[XL]:"fire-app-check-compat",[ZL]:"fire-auth",[e6]:"fire-auth-compat",[t6]:"fire-rtdb",[n6]:"fire-data-connect",[i6]:"fire-rtdb-compat",[r6]:"fire-fn",[s6]:"fire-fn-compat",[o6]:"fire-iid",[a6]:"fire-iid-compat",[l6]:"fire-fcm",[u6]:"fire-fcm-compat",[c6]:"fire-perf",[d6]:"fire-perf-compat",[f6]:"fire-rc",[h6]:"fire-rc-compat",[m6]:"fire-gcs",[p6]:"fire-gcs-compat",[g6]:"fire-fst",[_6]:"fire-fst-compat",[y6]:"fire-vertex","fire-js":"fire-js",[v6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Map,ql=new Map,Bl=new Map;function Kc(n,e){try{n.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function kw(n,e){n.container.addOrOverwriteComponent(e)}function Gl(n){const e=n.name;if(Bl.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;Bl.set(e,n);for(const t of no.values())Kc(t,n);for(const t of ql.values())Kc(t,n);return!0}function Uw(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function S6(n,e,t=to){Uw(n,e).clearInstance(t)}function Xy(n){return n.options!==void 0}function Lw(n){return Xy(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function Ow(n){return n==null?!1:n.settings!==void 0}function A6(){Bl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new Qh("app","Firebase",x6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fw=class{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(n,e){const t=xw(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(t).exp*1e3,a=new Date().getTime();s-a<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class b6 extends Fw{constructor(e,t,i,s){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,u={name:i,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,u,s);else{const d=e;super(d.options,u,s)}this._serverConfig={automaticDataCollectionEnabled:a,...t},this._serverConfig.authIdToken&&LA(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&LA(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Xr(wh,ny,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){e0(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ci.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=E6;function Zy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:to,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw ci.create("bad-app-name",{appName:String(s)});if(t||(t=$y()),!t)throw ci.create("no-options");const a=no.get(s);if(a){if(Fl(t,a.options)&&Fl(i,a.config))return a;throw ci.create("duplicate-app",{appName:s})}const u=new Dw(s);for(const f of Bl.values())u.addComponent(f);const d=new Fw(t,i,u);return no.set(s,d),d}function w6(n,e={}){if(vL()&&!Iw())throw ci.create("invalid-server-app-environment");let t,i=e||{};if(n&&(Xy(n)?t=n.options:Lw(n)?i=n:t=n),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),t||(t=$y()),!t)throw ci.create("no-options");const s={...i,...t};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const a=_=>[..._].reduce((E,T)=>Math.imul(31,E)+T.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ci.create("finalization-registry-not-supported",{});const u=""+a(JSON.stringify(s)),d=ql.get(u);if(d)return d.incRefCount(i.releaseOnDeref),d;const f=new Dw(u);for(const _ of Bl.values())f.addComponent(_);const m=new b6(t,i,u,f);return ql.set(u,m),m}function I6(n=to){const e=no.get(n);if(!e&&n===to&&$y())return Zy();if(!e)throw ci.create("no-app",{appName:n});return e}function C6(){return Array.from(no.values())}async function e0(n){let e=!1;const t=n.name;no.has(t)?(e=!0,no.delete(t)):ql.has(t)&&n.decRefCount()<=0&&(ql.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function Xr(n,e,t){let i=T6[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(u.join(" "));return}Gl(new ca(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function qw(n,e){if(n!==null&&typeof n!="function")throw ci.create("invalid-log-argument");VL(n,e)}function Bw(n){PL(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="firebase-heartbeat-database",N6=1,$c="firebase-heartbeat-store";let Cg=null;function Gw(){return Cg||(Cg=zL(R6,N6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($c)}catch(t){console.warn(t)}}}}).catch(n=>{throw ci.create("idb-open",{originalErrorMessage:n.message})})),Cg}async function D6(n){try{const t=(await Gw()).transaction($c),i=await t.objectStore($c).get(zw(n));return await t.done,i}catch(e){if(e instanceof Aa)Zr.warn(e.message);else{const t=ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zr.warn(t.message)}}}async function OA(n,e){try{const i=(await Gw()).transaction($c,"readwrite");await i.objectStore($c).put(e,zw(n)),await i.done}catch(t){if(t instanceof Aa)Zr.warn(t.message);else{const i=ci.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Zr.warn(i.message)}}}function zw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=1024,P6=30;class V6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new U6(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=FA();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>P6){const u=L6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Zr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=FA(),{heartbeatsToSend:i,unsentEntries:s}=k6(this._heartbeatsCache.heartbeats),a=Ah(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Zr.warn(t),""}}}function FA(){return new Date().toISOString().substring(0,10)}function k6(n,e=M6){const t=[];let i=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),qA(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),qA(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class U6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nw()?EL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await D6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return OA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return OA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qA(n){return Ah(JSON.stringify({version:2,heartbeats:n})).length}function L6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(n){Gl(new ca("platform-logger",e=>new $L(e),"PRIVATE")),Gl(new ca("heartbeat",e=>new V6(e),"PRIVATE")),Xr(wh,ny,n),Xr(wh,ny,"esm2020"),Xr("fire-js","")}O6("");const F6=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Aa,SDK_VERSION:Wy,_DEFAULT_ENTRY_NAME:to,_addComponent:Kc,_addOrOverwriteComponent:kw,_apps:no,_clearComponents:A6,_components:Bl,_getProvider:Uw,_isFirebaseApp:Xy,_isFirebaseServerApp:Ow,_isFirebaseServerAppSettings:Lw,_registerComponent:Gl,_removeServiceInstance:S6,_serverApps:ql,deleteApp:e0,getApp:I6,getApps:C6,initializeApp:Zy,initializeServerApp:w6,onLog:qw,registerVersion:Xr,setLogLevel:Bw},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,t){this._delegate=e,this.firebase=t,Kc(e,new ca("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),e0(this._delegate)))}_getService(e,t=to){var s;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((s=i.getComponent())==null?void 0:s.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=to){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Kc(this._delegate,e)}_addOrOverwriteComponent(e){kw(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},BA=new Qh("app-compat","Firebase",B6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(n){const e={},t={__esModule:!0,initializeApp:a,app:s,registerVersion:Xr,setLogLevel:Bw,onLog:qw,apps:null,SDK_VERSION:Wy,INTERNAL:{registerComponent:d,removeApp:i,useAsService:f,modularAPIs:F6}};t.default=t,Object.defineProperty(t,"apps",{get:u});function i(m){delete e[m]}function s(m){if(m=m||to,!MA(e,m))throw BA.create("no-app",{appName:m});return e[m]}s.App=n;function a(m,_={}){const E=Zy(m,_);if(MA(e,E.name))return e[E.name];const T=new n(E,t);return e[E.name]=T,T}function u(){return Object.keys(e).map(m=>e[m])}function d(m){const _=m.name,E=_.replace("-compat","");if(Gl(m)&&m.type==="PUBLIC"){const T=(w=s())=>{if(typeof w[E]!="function")throw BA.create("invalid-app-argument",{appName:_});return w[E]()};m.serviceProps!==void 0&&xh(T,m.serviceProps),t[E]=T,n.prototype[E]=function(...w){return this._getService.bind(this,_).apply(this,m.multipleInstances?w:[])}}return m.type==="PUBLIC"?t[E]:null}function f(m,_){return _==="serverAuth"?null:_}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(){const n=G6(q6);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:Hw,extendNamespace:e,createSubscribe:xL,ErrorFactory:Qh,deepExtend:xh};function e(t){xh(n,t)}return n}const z6=Hw();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=new jy("@firebase/app-compat"),H6="@firebase/app-compat",K6="0.5.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(n){Xr(H6,K6,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=Ky();if(n.firebase!==void 0){GA.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&GA.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const t0=z6;$6();var Y6="firebase",J6="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t0.registerVersion(Y6,J6,"app-compat");var zA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ws,Kw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,D){function M(){}M.prototype=D.prototype,R.F=D.prototype,R.prototype=new M,R.prototype.constructor=R,R.D=function(O,L,B){for(var P=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)P[Ve-2]=arguments[Ve];return D.prototype[L].apply(O,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,D,M){M||(M=0);const O=Array(16);if(typeof D=="string")for(var L=0;L<16;++L)O[L]=D.charCodeAt(M++)|D.charCodeAt(M++)<<8|D.charCodeAt(M++)<<16|D.charCodeAt(M++)<<24;else for(L=0;L<16;++L)O[L]=D[M++]|D[M++]<<8|D[M++]<<16|D[M++]<<24;D=R.g[0],M=R.g[1],L=R.g[2];let B=R.g[3],P;P=D+(B^M&(L^B))+O[0]+3614090360&4294967295,D=M+(P<<7&4294967295|P>>>25),P=B+(L^D&(M^L))+O[1]+3905402710&4294967295,B=D+(P<<12&4294967295|P>>>20),P=L+(M^B&(D^M))+O[2]+606105819&4294967295,L=B+(P<<17&4294967295|P>>>15),P=M+(D^L&(B^D))+O[3]+3250441966&4294967295,M=L+(P<<22&4294967295|P>>>10),P=D+(B^M&(L^B))+O[4]+4118548399&4294967295,D=M+(P<<7&4294967295|P>>>25),P=B+(L^D&(M^L))+O[5]+1200080426&4294967295,B=D+(P<<12&4294967295|P>>>20),P=L+(M^B&(D^M))+O[6]+2821735955&4294967295,L=B+(P<<17&4294967295|P>>>15),P=M+(D^L&(B^D))+O[7]+4249261313&4294967295,M=L+(P<<22&4294967295|P>>>10),P=D+(B^M&(L^B))+O[8]+1770035416&4294967295,D=M+(P<<7&4294967295|P>>>25),P=B+(L^D&(M^L))+O[9]+2336552879&4294967295,B=D+(P<<12&4294967295|P>>>20),P=L+(M^B&(D^M))+O[10]+4294925233&4294967295,L=B+(P<<17&4294967295|P>>>15),P=M+(D^L&(B^D))+O[11]+2304563134&4294967295,M=L+(P<<22&4294967295|P>>>10),P=D+(B^M&(L^B))+O[12]+1804603682&4294967295,D=M+(P<<7&4294967295|P>>>25),P=B+(L^D&(M^L))+O[13]+4254626195&4294967295,B=D+(P<<12&4294967295|P>>>20),P=L+(M^B&(D^M))+O[14]+2792965006&4294967295,L=B+(P<<17&4294967295|P>>>15),P=M+(D^L&(B^D))+O[15]+1236535329&4294967295,M=L+(P<<22&4294967295|P>>>10),P=D+(L^B&(M^L))+O[1]+4129170786&4294967295,D=M+(P<<5&4294967295|P>>>27),P=B+(M^L&(D^M))+O[6]+3225465664&4294967295,B=D+(P<<9&4294967295|P>>>23),P=L+(D^M&(B^D))+O[11]+643717713&4294967295,L=B+(P<<14&4294967295|P>>>18),P=M+(B^D&(L^B))+O[0]+3921069994&4294967295,M=L+(P<<20&4294967295|P>>>12),P=D+(L^B&(M^L))+O[5]+3593408605&4294967295,D=M+(P<<5&4294967295|P>>>27),P=B+(M^L&(D^M))+O[10]+38016083&4294967295,B=D+(P<<9&4294967295|P>>>23),P=L+(D^M&(B^D))+O[15]+3634488961&4294967295,L=B+(P<<14&4294967295|P>>>18),P=M+(B^D&(L^B))+O[4]+3889429448&4294967295,M=L+(P<<20&4294967295|P>>>12),P=D+(L^B&(M^L))+O[9]+568446438&4294967295,D=M+(P<<5&4294967295|P>>>27),P=B+(M^L&(D^M))+O[14]+3275163606&4294967295,B=D+(P<<9&4294967295|P>>>23),P=L+(D^M&(B^D))+O[3]+4107603335&4294967295,L=B+(P<<14&4294967295|P>>>18),P=M+(B^D&(L^B))+O[8]+1163531501&4294967295,M=L+(P<<20&4294967295|P>>>12),P=D+(L^B&(M^L))+O[13]+2850285829&4294967295,D=M+(P<<5&4294967295|P>>>27),P=B+(M^L&(D^M))+O[2]+4243563512&4294967295,B=D+(P<<9&4294967295|P>>>23),P=L+(D^M&(B^D))+O[7]+1735328473&4294967295,L=B+(P<<14&4294967295|P>>>18),P=M+(B^D&(L^B))+O[12]+2368359562&4294967295,M=L+(P<<20&4294967295|P>>>12),P=D+(M^L^B)+O[5]+4294588738&4294967295,D=M+(P<<4&4294967295|P>>>28),P=B+(D^M^L)+O[8]+2272392833&4294967295,B=D+(P<<11&4294967295|P>>>21),P=L+(B^D^M)+O[11]+1839030562&4294967295,L=B+(P<<16&4294967295|P>>>16),P=M+(L^B^D)+O[14]+4259657740&4294967295,M=L+(P<<23&4294967295|P>>>9),P=D+(M^L^B)+O[1]+2763975236&4294967295,D=M+(P<<4&4294967295|P>>>28),P=B+(D^M^L)+O[4]+1272893353&4294967295,B=D+(P<<11&4294967295|P>>>21),P=L+(B^D^M)+O[7]+4139469664&4294967295,L=B+(P<<16&4294967295|P>>>16),P=M+(L^B^D)+O[10]+3200236656&4294967295,M=L+(P<<23&4294967295|P>>>9),P=D+(M^L^B)+O[13]+681279174&4294967295,D=M+(P<<4&4294967295|P>>>28),P=B+(D^M^L)+O[0]+3936430074&4294967295,B=D+(P<<11&4294967295|P>>>21),P=L+(B^D^M)+O[3]+3572445317&4294967295,L=B+(P<<16&4294967295|P>>>16),P=M+(L^B^D)+O[6]+76029189&4294967295,M=L+(P<<23&4294967295|P>>>9),P=D+(M^L^B)+O[9]+3654602809&4294967295,D=M+(P<<4&4294967295|P>>>28),P=B+(D^M^L)+O[12]+3873151461&4294967295,B=D+(P<<11&4294967295|P>>>21),P=L+(B^D^M)+O[15]+530742520&4294967295,L=B+(P<<16&4294967295|P>>>16),P=M+(L^B^D)+O[2]+3299628645&4294967295,M=L+(P<<23&4294967295|P>>>9),P=D+(L^(M|~B))+O[0]+4096336452&4294967295,D=M+(P<<6&4294967295|P>>>26),P=B+(M^(D|~L))+O[7]+1126891415&4294967295,B=D+(P<<10&4294967295|P>>>22),P=L+(D^(B|~M))+O[14]+2878612391&4294967295,L=B+(P<<15&4294967295|P>>>17),P=M+(B^(L|~D))+O[5]+4237533241&4294967295,M=L+(P<<21&4294967295|P>>>11),P=D+(L^(M|~B))+O[12]+1700485571&4294967295,D=M+(P<<6&4294967295|P>>>26),P=B+(M^(D|~L))+O[3]+2399980690&4294967295,B=D+(P<<10&4294967295|P>>>22),P=L+(D^(B|~M))+O[10]+4293915773&4294967295,L=B+(P<<15&4294967295|P>>>17),P=M+(B^(L|~D))+O[1]+2240044497&4294967295,M=L+(P<<21&4294967295|P>>>11),P=D+(L^(M|~B))+O[8]+1873313359&4294967295,D=M+(P<<6&4294967295|P>>>26),P=B+(M^(D|~L))+O[15]+4264355552&4294967295,B=D+(P<<10&4294967295|P>>>22),P=L+(D^(B|~M))+O[6]+2734768916&4294967295,L=B+(P<<15&4294967295|P>>>17),P=M+(B^(L|~D))+O[13]+1309151649&4294967295,M=L+(P<<21&4294967295|P>>>11),P=D+(L^(M|~B))+O[4]+4149444226&4294967295,D=M+(P<<6&4294967295|P>>>26),P=B+(M^(D|~L))+O[11]+3174756917&4294967295,B=D+(P<<10&4294967295|P>>>22),P=L+(D^(B|~M))+O[2]+718787259&4294967295,L=B+(P<<15&4294967295|P>>>17),P=M+(B^(L|~D))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+D&4294967295,R.g[1]=R.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+B&4294967295}i.prototype.v=function(R,D){D===void 0&&(D=R.length);const M=D-this.blockSize,O=this.C;let L=this.h,B=0;for(;B<D;){if(L==0)for(;B<=M;)s(this,R,B),B+=this.blockSize;if(typeof R=="string"){for(;B<D;)if(O[L++]=R.charCodeAt(B++),L==this.blockSize){s(this,O),L=0;break}}else for(;B<D;)if(O[L++]=R[B++],L==this.blockSize){s(this,O),L=0;break}}this.h=L,this.o+=D},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var D=1;D<R.length-8;++D)R[D]=0;D=this.o*8;for(var M=R.length-8;M<R.length;++M)R[M]=D&255,D/=256;for(this.v(R),R=Array(16),D=0,M=0;M<4;++M)for(let O=0;O<32;O+=8)R[D++]=this.g[M]>>>O&255;return R};function a(R,D){var M=d;return Object.prototype.hasOwnProperty.call(M,R)?M[R]:M[R]=D(R)}function u(R,D){this.h=D;const M=[];let O=!0;for(let L=R.length-1;L>=0;L--){const B=R[L]|0;O&&B==D||(M[L]=B,O=!1)}this.g=M}var d={};function f(R){return-128<=R&&R<128?a(R,function(D){return new u([D|0],D<0?-1:0)}):new u([R|0],R<0?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return V(m(-R));const D=[];let M=1;for(let O=0;R>=M;O++)D[O]=R/M|0,M*=4294967296;return new u(D,0)}function _(R,D){if(R.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(R.charAt(0)=="-")return V(_(R.substring(1),D));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=m(Math.pow(D,8));let O=E;for(let B=0;B<R.length;B+=8){var L=Math.min(8,R.length-B);const P=parseInt(R.substring(B,B+L),D);L<8?(L=m(Math.pow(D,L)),O=O.j(L).add(m(P))):(O=O.j(M),O=O.add(m(P)))}return O}var E=f(0),T=f(1),w=f(16777216);n=u.prototype,n.m=function(){if(k(this))return-V(this).m();let R=0,D=1;for(let M=0;M<this.g.length;M++){const O=this.i(M);R+=(O>=0?O:4294967296+O)*D,D*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(k(this))return"-"+V(this).toString(R);const D=m(Math.pow(R,6));var M=this;let O="";for(;;){const L=se(M,D).g;M=$(M,L.j(D));let B=((M.g.length>0?M.g[0]:M.h)>>>0).toString(R);if(M=L,N(M))return B+O;for(;B.length<6;)B="0"+B;O=B+O}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(let D=0;D<R.g.length;D++)if(R.g[D]!=0)return!1;return!0}function k(R){return R.h==-1}n.l=function(R){return R=$(this,R),k(R)?-1:N(R)?0:1};function V(R){const D=R.g.length,M=[];for(let O=0;O<D;O++)M[O]=~R.g[O];return new u(M,~R.h).add(T)}n.abs=function(){return k(this)?V(this):this},n.add=function(R){const D=Math.max(this.g.length,R.g.length),M=[];let O=0;for(let L=0;L<=D;L++){let B=O+(this.i(L)&65535)+(R.i(L)&65535),P=(B>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);O=P>>>16,B&=65535,P&=65535,M[L]=P<<16|B}return new u(M,M[M.length-1]&-2147483648?-1:0)};function $(R,D){return R.add(V(D))}n.j=function(R){if(N(this)||N(R))return E;if(k(this))return k(R)?V(this).j(V(R)):V(V(this).j(R));if(k(R))return V(this.j(V(R)));if(this.l(w)<0&&R.l(w)<0)return m(this.m()*R.m());const D=this.g.length+R.g.length,M=[];for(var O=0;O<2*D;O++)M[O]=0;for(O=0;O<this.g.length;O++)for(let L=0;L<R.g.length;L++){const B=this.i(O)>>>16,P=this.i(O)&65535,Ve=R.i(L)>>>16,ft=R.i(L)&65535;M[2*O+2*L]+=P*ft,ne(M,2*O+2*L),M[2*O+2*L+1]+=B*ft,ne(M,2*O+2*L+1),M[2*O+2*L+1]+=P*Ve,ne(M,2*O+2*L+1),M[2*O+2*L+2]+=B*Ve,ne(M,2*O+2*L+2)}for(R=0;R<D;R++)M[R]=M[2*R+1]<<16|M[2*R];for(R=D;R<2*D;R++)M[R]=0;return new u(M,0)};function ne(R,D){for(;(R[D]&65535)!=R[D];)R[D+1]+=R[D]>>>16,R[D]&=65535,D++}function Q(R,D){this.g=R,this.h=D}function se(R,D){if(N(D))throw Error("division by zero");if(N(R))return new Q(E,E);if(k(R))return D=se(V(R),D),new Q(V(D.g),V(D.h));if(k(D))return D=se(R,V(D)),new Q(V(D.g),D.h);if(R.g.length>30){if(k(R)||k(D))throw Error("slowDivide_ only works with positive integers.");for(var M=T,O=D;O.l(R)<=0;)M=z(M),O=z(O);var L=J(M,1),B=J(O,1);for(O=J(O,2),M=J(M,2);!N(O);){var P=B.add(O);P.l(R)<=0&&(L=L.add(M),B=P),O=J(O,1),M=J(M,1)}return D=$(R,L.j(D)),new Q(L,D)}for(L=E;R.l(D)>=0;){for(M=Math.max(1,Math.floor(R.m()/D.m())),O=Math.ceil(Math.log(M)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),B=m(M),P=B.j(D);k(P)||P.l(R)>0;)M-=O,B=m(M),P=B.j(D);N(B)&&(B=T),L=L.add(B),R=$(R,P)}return new Q(L,R)}n.B=function(R){return se(this,R).h},n.and=function(R){const D=Math.max(this.g.length,R.g.length),M=[];for(let O=0;O<D;O++)M[O]=this.i(O)&R.i(O);return new u(M,this.h&R.h)},n.or=function(R){const D=Math.max(this.g.length,R.g.length),M=[];for(let O=0;O<D;O++)M[O]=this.i(O)|R.i(O);return new u(M,this.h|R.h)},n.xor=function(R){const D=Math.max(this.g.length,R.g.length),M=[];for(let O=0;O<D;O++)M[O]=this.i(O)^R.i(O);return new u(M,this.h^R.h)};function z(R){const D=R.g.length+1,M=[];for(let O=0;O<D;O++)M[O]=R.i(O)<<1|R.i(O-1)>>>31;return new u(M,R.h)}function J(R,D){const M=D>>5;D%=32;const O=R.g.length-M,L=[];for(let B=0;B<O;B++)L[B]=D>0?R.i(B+M)>>>D|R.i(B+M+1)<<32-D:R.i(B+M);return new u(L,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Kw=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,Ws=u}).apply(typeof zA<"u"?zA:typeof self<"u"?self:typeof window<"u"?window:{});var Xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $w,Cc,Yw,oh,iy,Jw,jw,Qw;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xf=="object"&&Xf];for(var A=0;A<g.length;++A){var b=g[A];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function s(g,A){if(A)e:{var b=i;g=g.split(".");for(var C=0;C<g.length-1;C++){var K=g[C];if(!(K in b))break e;b=b[K]}g=g[g.length-1],C=b[g],A=A(C),A!=C&&A!=null&&e(b,g,{configurable:!0,writable:!0,value:A})}}s("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(g){return g||function(A){var b=[],C;for(C in A)Object.prototype.hasOwnProperty.call(A,C)&&b.push([C,A[C]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function f(g,A,b){return g.call.apply(g.bind,arguments)}function m(g,A,b){return m=f,m.apply(null,arguments)}function _(g,A){var b=Array.prototype.slice.call(arguments,1);return function(){var C=b.slice();return C.push.apply(C,arguments),g.apply(this,C)}}function E(g,A){function b(){}b.prototype=A.prototype,g.Z=A.prototype,g.prototype=new b,g.prototype.constructor=g,g.Ob=function(C,K,Z){for(var fe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)fe[Ue-2]=arguments[Ue];return A.prototype[K].apply(C,fe)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function w(g){const A=g.length;if(A>0){const b=Array(A);for(let C=0;C<A;C++)b[C]=g[C];return b}return[]}function N(g,A){for(let C=1;C<arguments.length;C++){const K=arguments[C];var b=typeof K;if(b=b!="object"?b:K?Array.isArray(K)?"array":b:"null",b=="array"||b=="object"&&typeof K.length=="number"){b=g.length||0;const Z=K.length||0;g.length=b+Z;for(let fe=0;fe<Z;fe++)g[b+fe]=K[fe]}else g.push(K)}}class k{constructor(A,b){this.i=A,this.j=b,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function V(g){u.setTimeout(()=>{throw g},0)}function $(){var g=R;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class ne{constructor(){this.h=this.g=null}add(A,b){const C=Q.get();C.set(A,b),this.h?this.h.next=C:this.g=C,this.h=C}}var Q=new k(()=>new se,g=>g.reset());class se{constructor(){this.next=this.g=this.h=null}set(A,b){this.h=A,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let z,J=!1,R=new ne,D=()=>{const g=Promise.resolve(void 0);z=()=>{g.then(M)}};function M(){for(var g;g=$();){try{g.h.call(g.g)}catch(b){V(b)}var A=Q;A.j(g),A.h<100&&(A.h++,g.next=A.g,A.g=g)}J=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const b=()=>{};u.addEventListener("test",b,A),u.removeEventListener("test",b,A)}catch{}return g})();function P(g){return/^[\s\xa0]*$/.test(g)}function Ve(g,A){L.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,A)}E(Ve,L),Ve.prototype.init=function(g,A){const b=this.type=g.type,C=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget,A||(b=="mouseover"?A=g.fromElement:b=="mouseout"&&(A=g.toElement)),this.relatedTarget=A,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),te=0;function me(g,A,b,C,K){this.listener=g,this.proxy=null,this.src=A,this.type=b,this.capture=!!C,this.ha=K,this.key=++te,this.da=this.fa=!1}function Te(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function qe(g,A,b){for(const C in g)A.call(b,g[C],C,g)}function st(g,A){for(const b in g)A.call(void 0,g[b],b,g)}function q(g){const A={};for(const b in g)A[b]=g[b];return A}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(g,A){let b,C;for(let K=1;K<arguments.length;K++){C=arguments[K];for(b in C)g[b]=C[b];for(let Z=0;Z<oe.length;Z++)b=oe[Z],Object.prototype.hasOwnProperty.call(C,b)&&(g[b]=C[b])}}function ve(g){this.src=g,this.g={},this.h=0}ve.prototype.add=function(g,A,b,C,K){const Z=g.toString();g=this.g[Z],g||(g=this.g[Z]=[],this.h++);const fe=Ne(g,A,C,K);return fe>-1?(A=g[fe],b||(A.fa=!1)):(A=new me(A,this.src,Z,!!C,K),A.fa=b,g.push(A)),A};function De(g,A){const b=A.type;if(b in g.g){var C=g.g[b],K=Array.prototype.indexOf.call(C,A,void 0),Z;(Z=K>=0)&&Array.prototype.splice.call(C,K,1),Z&&(Te(A),g.g[b].length==0&&(delete g.g[b],g.h--))}}function Ne(g,A,b,C){for(let K=0;K<g.length;++K){const Z=g[K];if(!Z.da&&Z.listener==A&&Z.capture==!!b&&Z.ha==C)return K}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),Lt={};function vt(g,A,b,C,K){if(Array.isArray(A)){for(let Z=0;Z<A.length;Z++)vt(g,A[Z],b,C,K);return null}return b=xr(b),g&&g[ft]?g.J(A,b,d(C)?!!C.capture:!1,K):Mi(g,A,b,!1,C,K)}function Mi(g,A,b,C,K,Z){if(!A)throw Error("Invalid event type");const fe=d(K)?!!K.capture:!!K;let Ue=ki(g);if(Ue||(g[Ke]=Ue=new ve(g)),b=Ue.add(A,b,C,fe,Z),b.proxy)return b;if(C=Pi(),b.proxy=C,C.src=g,C.listener=b,g.addEventListener)B||(K=fe),K===void 0&&(K=!1),g.addEventListener(A.toString(),C,K);else if(g.attachEvent)g.attachEvent(Jn(A.toString()),C);else if(g.addListener&&g.removeListener)g.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Pi(){function g(b){return A.call(g.src,g.listener,b)}const A=yo;return g}function Vi(g,A,b,C,K){if(Array.isArray(A))for(var Z=0;Z<A.length;Z++)Vi(g,A[Z],b,C,K);else C=d(C)?!!C.capture:!!C,b=xr(b),g&&g[ft]?(g=g.i,Z=String(A).toString(),Z in g.g&&(A=g.g[Z],b=Ne(A,b,C,K),b>-1&&(Te(A[b]),Array.prototype.splice.call(A,b,1),A.length==0&&(delete g.g[Z],g.h--)))):g&&(g=ki(g))&&(A=g.g[A.toString()],g=-1,A&&(g=Ne(A,b,C,K)),(b=g>-1?A[g]:null)&&ls(b))}function ls(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[ft])De(A.i,g);else{var b=g.type,C=g.proxy;A.removeEventListener?A.removeEventListener(b,C,g.capture):A.detachEvent?A.detachEvent(Jn(b),C):A.addListener&&A.removeListener&&A.removeListener(C),(b=ki(A))?(De(b,g),b.h==0&&(b.src=null,A[Ke]=null)):Te(g)}}}function Jn(g){return g in Lt?Lt[g]:Lt[g]="on"+g}function yo(g,A){if(g.da)g=!0;else{A=new Ve(A,this);const b=g.listener,C=g.ha||g.src;g.fa&&ls(g),g=b.call(C,A)}return g}function ki(g){return g=g[Ke],g instanceof ve?g:null}var Ui="__closure_events_fn_"+(Math.random()*1e9>>>0);function xr(g){return typeof g=="function"?g:(g[Ui]||(g[Ui]=function(A){return g.handleEvent(A)}),g[Ui])}function bt(){O.call(this),this.i=new ve(this),this.M=this,this.G=null}E(bt,O),bt.prototype[ft]=!0,bt.prototype.removeEventListener=function(g,A,b,C){Vi(this,g,A,b,C)};function Mt(g,A){var b,C=g.G;if(C)for(b=[];C;C=C.G)b.push(C);if(g=g.M,C=A.type||A,typeof A=="string")A=new L(A,g);else if(A instanceof L)A.target=A.target||g;else{var K=A;A=new L(C,g),pe(A,K)}K=!0;let Z,fe;if(b)for(fe=b.length-1;fe>=0;fe--)Z=A.g=b[fe],K=fi(Z,C,!0,A)&&K;if(Z=A.g=g,K=fi(Z,C,!0,A)&&K,K=fi(Z,C,!1,A)&&K,b)for(fe=0;fe<b.length;fe++)Z=A.g=b[fe],K=fi(Z,C,!1,A)&&K}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var g=this.i;for(const A in g.g){const b=g.g[A];for(let C=0;C<b.length;C++)Te(b[C]);delete g.g[A],g.h--}}this.G=null},bt.prototype.J=function(g,A,b,C){return this.i.add(String(g),A,!1,b,C)},bt.prototype.K=function(g,A,b,C){return this.i.add(String(g),A,!0,b,C)};function fi(g,A,b,C){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();let K=!0;for(let Z=0;Z<A.length;++Z){const fe=A[Z];if(fe&&!fe.da&&fe.capture==b){const Ue=fe.listener,Ft=fe.ha||fe.src;fe.fa&&De(g.i,fe),K=Ue.call(Ft,C)!==!1&&K}}return K&&!C.defaultPrevented}function Ca(g,A){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=m(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:u.setTimeout(g,A||0)}function Li(g){g.g=Ca(()=>{g.g=null,g.i&&(g.i=!1,Li(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class sn extends O{constructor(A,b){super(),this.m=A,this.l=b,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Li(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(g){O.call(this),this.h=g,this.g={}}E(Oi,O);var br=[];function wr(g){qe(g.g,function(A,b){this.g.hasOwnProperty(b)&&ls(A)},g),g.g={}}Oi.prototype.N=function(){Oi.Z.N.call(this),wr(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fi=u.JSON.stringify,_o=u.JSON.parse,vo=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function us(){}function Eo(){}var Un={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ht(){L.call(this,"d")}E(ht,L);function dn(){L.call(this,"c")}E(dn,L);var nt={},To=null;function cs(){return To=To||new bt}nt.Ia="serverreachability";function Ra(g){L.call(this,nt.Ia,g)}E(Ra,L);function jn(g){const A=cs();Mt(A,new Ra(A))}nt.STAT_EVENT="statevent";function Ir(g,A){L.call(this,nt.STAT_EVENT,g),this.stat=A}E(Ir,L);function Pt(g){const A=cs();Mt(A,new Ir(A,g))}nt.Ja="timingevent";function hi(g,A){L.call(this,nt.Ja,g),this.size=A}E(hi,L);function mi(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},A)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function Na(g,A,b,C,K,Z){g.info(function(){if(g.g)if(Z){var fe="",Ue=Z.split("&");for(let it=0;it<Ue.length;it++){var Ft=Ue[it].split("=");if(Ft.length>1){const wt=Ft[0];Ft=Ft[1];const vi=wt.split("_");fe=vi.length>=2&&vi[1]=="type"?fe+(wt+"="+Ft+"&"):fe+(wt+"=redacted&")}}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+C+") [attempt "+K+"]: "+A+`
`+b+`
`+fe})}function So(g,A,b,C,K,Z,fe){g.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+K+"]: "+A+`
`+b+`
`+Z+" "+fe})}function pi(g,A,b,C){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+vu(g,b)+(C?" "+C:"")})}function Cr(g,A){g.info(function(){return"TIMEOUT: "+A})}Qn.prototype.info=function(){};function vu(g,A){if(!g.g)return A;if(!A)return null;try{const Z=JSON.parse(A);if(Z){for(g=0;g<Z.length;g++)if(Array.isArray(Z[g])){var b=Z[g];if(!(b.length<2)){var C=b[1];if(Array.isArray(C)&&!(C.length<1)){var K=C[0];if(K!="noop"&&K!="stop"&&K!="close")for(let fe=1;fe<C.length;fe++)C[fe]=""}}}}return Fi(Z)}catch{return A}}var Rr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ao={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xo;function Nr(){}E(Nr,us),Nr.prototype.g=function(){return new XMLHttpRequest},xo=new Nr;function qi(g){return encodeURIComponent(String(g))}function Da(g){var A=1;g=g.split(":");const b=[];for(;A>0&&g.length;)b.push(g.shift()),A--;return g.length&&b.push(g.join(":")),b}function Xn(g,A,b,C){this.j=g,this.i=A,this.l=b,this.S=C||1,this.V=new Oi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ue}function ue(){this.i=null,this.g="",this.h=!1}var ge={},we={};function de(g,A,b){g.M=1,g.A=bo(Yt(A)),g.u=b,g.R=!0,Kt(g,null)}function Kt(g,A){g.F=Date.now(),ei(g),g.B=Yt(g.A);var b=g.B,C=g.S;Array.isArray(C)||(C=[String(C)]),Va(b.i,"t",C),g.C=0,b=g.j.L,g.h=new ue,g.g=Ud(g.j,b?A:null,!g.u),g.P>0&&(g.O=new sn(m(g.Y,g,g.g),g.P)),A=g.V,b=g.g,C=g.ba;var K="readystatechange";Array.isArray(K)||(K&&(br[0]=K.toString()),K=br);for(let Z=0;Z<K.length;Z++){const fe=vt(b,K[Z],C||A.handleEvent,!1,A.h||A);if(!fe)break;A.g[fe.key]=fe}A=g.J?q(g.J):{},g.u?(g.v||(g.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,A)):(g.v="GET",g.g.ea(g.B,g.v,null,A)),jn(),Na(g.i,g.v,g.B,g.l,g.S,g.u)}Xn.prototype.ba=function(g){g=g.target;const A=this.O;A&&zi(g)==3?A.j():this.Y(g)},Xn.prototype.Y=function(g){try{if(g==this.g)e:{const Ue=zi(this.g),Ft=this.g.ya(),it=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||fn(this.g)))){this.K||Ue!=4||Ft==7||(Ft==8||it<=0?jn(3):jn(2)),gi(this);var A=this.g.ca();this.X=A;var b=Wn(this);if(this.o=A==200,So(this.i,this.v,this.B,this.l,this.S,Ue,A),this.o){if(this.U&&!this.L){t:{if(this.g){var C,K=this.g;if((C=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(C)){var Z=C;break t}}Z=null}if(g=Z)pi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,En(this,g);else{this.o=!1,this.m=3,Pt(12),$t(this),Ln(this);break e}}if(this.R){g=!0;let wt;for(;!this.K&&this.C<b.length;)if(wt=ds(this,b),wt==we){Ue==4&&(this.m=4,Pt(14),g=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==ge){this.m=4,Pt(15),pi(this.i,this.l,b,"[Invalid Chunk]"),g=!1;break}else pi(this.i,this.l,wt,null),En(this,wt);if(Zn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||b.length!=0||this.h.h||(this.m=1,Pt(16),g=!1),this.o=this.o&&g,!g)pi(this.i,this.l,b,"[Invalid Chunked Response]"),$t(this),Ln(this);else if(b.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Vu(fe),fe.P=!0,Pt(11))}}else pi(this.i,this.l,b,null),En(this,b);Ue==4&&$t(this),this.o&&!this.K&&(Ue==4?Md(this.j,this):(this.o=!1,ei(this)))}else Pr(this.g),A==400&&b.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),$t(this),Ln(this)}}}catch{}finally{}};function Wn(g){if(!Zn(g))return g.g.la();const A=fn(g.g);if(A==="")return"";let b="";const C=A.length,K=zi(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return $t(g),Ln(g),"";g.h.i=new u.TextDecoder}for(let Z=0;Z<C;Z++)g.h.h=!0,b+=g.h.i.decode(A[Z],{stream:!(K&&Z==C-1)});return A.length=0,g.h.g+=b,g.C=0,g.h.g}function Zn(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function ds(g,A){var b=g.C,C=A.indexOf(`
`,b);return C==-1?we:(b=Number(A.substring(b,C)),isNaN(b)?ge:(C+=1,C+b>A.length?we:(A=A.slice(C,C+b),g.C=C+b,A)))}Xn.prototype.cancel=function(){this.K=!0,$t(this)};function ei(g){g.T=Date.now()+g.H,Dr(g,g.H)}function Dr(g,A){if(g.D!=null)throw Error("WatchDog timer not null");g.D=mi(m(g.aa,g),A)}function gi(g){g.D&&(u.clearTimeout(g.D),g.D=null)}Xn.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Cr(this.i,this.B),this.M!=2&&(jn(),Pt(17)),$t(this),this.m=2,Ln(this)):Dr(this,this.T-g)};function Ln(g){g.j.I==0||g.K||Md(g.j,g)}function $t(g){gi(g);var A=g.O;A&&typeof A.dispose=="function"&&A.dispose(),g.O=null,wr(g.V),g.g&&(A=g.g,g.g=null,A.abort(),A.dispose())}function En(g,A){try{var b=g.j;if(b.I!=0&&(b.g==g||sr(b.h,g))){if(!g.L&&sr(b.h,g)&&b.I==3){try{var C=b.Ba.g.parse(A)}catch{C=null}if(Array.isArray(C)&&C.length==3){var K=C;if(K[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<g.F)Fa(b),vs(b);else break e;Mo(b),Pt(18)}}else b.xa=K[1],0<b.xa-b.K&&K[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=mi(m(b.Va,b),6e3));rr(b.h)<=1&&b.ta&&(b.ta=void 0)}else dr(b,11)}else if((g.L||b.g==g)&&Fa(b),!P(A))for(K=b.Ba.g.parse(A),A=0;A<K.length;A++){let it=K[A];const wt=it[0];if(!(wt<=b.K))if(b.K=wt,it=it[1],b.I==2)if(it[0]=="c"){b.M=it[1],b.ba=it[2];const vi=it[3];vi!=null&&(b.ka=vi,b.j.info("VER="+b.ka));const fr=it[4];fr!=null&&(b.za=fr,b.j.info("SVER="+b.za));const Hi=it[5];Hi!=null&&typeof Hi=="number"&&Hi>0&&(C=1.5*Hi,b.O=C,b.j.info("backChannelRequestTimeoutMs_="+C)),C=b;const Ki=g.g;if(Ki){const Po=Ki.g?Ki.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Po){var Z=C.h;Z.g||Po.indexOf("spdy")==-1&&Po.indexOf("quic")==-1&&Po.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Su(Z,Z.h),Z.h=null))}if(C.G){const qa=Ki.g?Ki.g.getResponseHeader("X-HTTP-Session-Id"):null;qa&&(C.wa=qa,at(C.J,C.G,qa))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-g.F,b.j.info("Handshake RTT: "+b.T+"ms")),C=b;var fe=g;if(C.na=kd(C,C.L?C.ba:null,C.W),fe.L){Au(C.h,fe);var Ue=fe,Ft=C.O;Ft&&(Ue.H=Ft),Ue.D&&(gi(Ue),ei(Ue)),C.g=fe}else Nd(C);b.i.length>0&&cr(b)}else it[0]!="stop"&&it[0]!="close"||dr(b,7);else b.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?dr(b,7):Mu(b):it[0]!="noop"&&b.l&&b.l.qa(it),b.A=0)}}jn(4)}catch{}}var Ot=class{constructor(g,A){this.g=g,this.map=A}};function Eu(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Tu(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function rr(g){return g.h?1:g.g?g.g.size:0}function sr(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function Su(g,A){g.g?g.g.add(A):g.h=A}function Au(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}Eu.prototype.cancel=function(){if(this.i=xu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function xu(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const b of g.g.values())A=A.concat(b.G);return A}return w(g.i)}var xd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ma(g,A){if(g){g=g.split("&");for(let b=0;b<g.length;b++){const C=g[b].indexOf("=");let K,Z=null;C>=0?(K=g[b].substring(0,C),Z=g[b].substring(C+1)):K=g[b],A(K,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function ti(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;g instanceof ti?(this.l=g.l,on(this,g.j),this.o=g.o,this.g=g.g,fs(this,g.u),this.h=g.h,bu(this,Cd(g.i)),this.m=g.m):g&&(A=String(g).match(xd))?(this.l=!1,on(this,A[1]||"",!0),this.o=or(A[2]||""),this.g=or(A[3]||"",!0),fs(this,A[4]),this.h=or(A[5]||"",!0),bu(this,A[6]||"",!0),this.m=or(A[7]||"")):(this.l=!1,this.i=new ms(null,this.l))}ti.prototype.toString=function(){const g=[];var A=this.j;A&&g.push(wo(A,Pa,!0),":");var b=this.g;return(b||A=="file")&&(g.push("//"),(A=this.o)&&g.push(wo(A,Pa,!0),"@"),g.push(qi(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&g.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&g.push("/"),g.push(wo(b,b.charAt(0)=="/"?wu:bd,!0))),(b=this.i.toString())&&g.push("?",b),(b=this.m)&&g.push("#",wo(b,wd)),g.join("")},ti.prototype.resolve=function(g){const A=Yt(this);let b=!!g.j;b?on(A,g.j):b=!!g.o,b?A.o=g.o:b=!!g.g,b?A.g=g.g:b=g.u!=null;var C=g.h;if(b)fs(A,g.u);else if(b=!!g.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var K=A.h.lastIndexOf("/");K!=-1&&(C=A.h.slice(0,K+1)+C)}if(K=C,K==".."||K==".")C="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){C=K.lastIndexOf("/",0)==0,K=K.split("/");const Z=[];for(let fe=0;fe<K.length;){const Ue=K[fe++];Ue=="."?C&&fe==K.length&&Z.push(""):Ue==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),C&&fe==K.length&&Z.push("")):(Z.push(Ue),C=!0)}C=Z.join("/")}else C=K}return b?A.h=C:b=g.i.toString()!=="",b?bu(A,Cd(g.i)):b=!!g.m,b&&(A.m=g.m),A};function Yt(g){return new ti(g)}function on(g,A,b){g.j=b?or(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function fs(g,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);g.u=A}else g.u=null}function bu(g,A,b){A instanceof ms?(g.i=A,ka(g.i,g.l)):(b||(A=wo(A,hs)),g.i=new ms(A,g.l))}function at(g,A,b){g.i.set(A,b)}function bo(g){return at(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function or(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function wo(g,A,b){return typeof g=="string"?(g=encodeURI(g).replace(A,On),b&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function On(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Pa=/[#\/\?@]/g,bd=/[#\?:]/g,wu=/[#\?]/g,hs=/[#\?@]/g,wd=/#/g;function ms(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function Fn(g){g.g||(g.g=new Map,g.h=0,g.i&&Ma(g.i,function(A,b){g.add(decodeURIComponent(A.replace(/\+/g," ")),b)}))}n=ms.prototype,n.add=function(g,A){Fn(this),this.i=null,g=ps(this,g);let b=this.g.get(g);return b||this.g.set(g,b=[]),b.push(A),this.h+=1,this};function Id(g,A){Fn(g),A=ps(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function Iu(g,A){return Fn(g),A=ps(g,A),g.g.has(A)}n.forEach=function(g,A){Fn(this),this.g.forEach(function(b,C){b.forEach(function(K){g.call(A,K,C,this)},this)},this)};function Cu(g,A){Fn(g);let b=[];if(typeof A=="string")Iu(g,A)&&(b=b.concat(g.g.get(ps(g,A))));else for(g=Array.from(g.g.values()),A=0;A<g.length;A++)b=b.concat(g[A]);return b}n.set=function(g,A){return Fn(this),this.i=null,g=ps(this,g),Iu(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},n.get=function(g,A){return g?(g=Cu(this,g),g.length>0?String(g[0]):A):A};function Va(g,A,b){Id(g,A),b.length>0&&(g.i=null,g.g.set(ps(g,A),w(b)),g.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(let C=0;C<A.length;C++){var b=A[C];const K=qi(b);b=Cu(this,b);for(let Z=0;Z<b.length;Z++){let fe=K;b[Z]!==""&&(fe+="="+qi(b[Z])),g.push(fe)}}return this.i=g.join("&")};function Cd(g){const A=new ms;return A.i=g.i,g.g&&(A.g=new Map(g.g),A.h=g.h),A}function ps(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function ka(g,A){A&&!g.j&&(Fn(g),g.i=null,g.g.forEach(function(b,C){const K=C.toLowerCase();C!=K&&(Id(this,C),Va(this,K,b))},g)),g.j=A}function Bi(g,A){const b=new Qn;if(u.Image){const C=new Image;C.onload=_(yi,b,"TestLoadImage: loaded",!0,A,C),C.onerror=_(yi,b,"TestLoadImage: error",!1,A,C),C.onabort=_(yi,b,"TestLoadImage: abort",!1,A,C),C.ontimeout=_(yi,b,"TestLoadImage: timeout",!1,A,C),u.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=g}else A(!1)}function Ru(g,A){const b=new Qn,C=new AbortController,K=setTimeout(()=>{C.abort(),yi(b,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:C.signal}).then(Z=>{clearTimeout(K),Z.ok?yi(b,"TestPingServer: ok",!0,A):yi(b,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(K),yi(b,"TestPingServer: error",!1,A)})}function yi(g,A,b,C,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),C(b)}catch{}}function gs(){this.g=new vo}function ar(g){this.i=g.Sb||null,this.h=g.ab||!1}E(ar,us),ar.prototype.g=function(){return new Io(this.i,this.h)};function Io(g,A){bt.call(this),this.H=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Io,bt),n=Io.prototype,n.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=A,this.readyState=1,Gi(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(A.body=g),(this.H||u).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ua(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ua(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?ys(this):Gi(this),this.readyState==3&&Ua(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,ys(this))},n.Na=function(g){this.g&&(this.response=g,ys(this))},n.ga=function(){this.g&&ys(this)};function ys(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Gi(g)}n.setRequestHeader=function(g,A){this.A.append(g,A)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var b=A.next();!b.done;)b=b.value,g.push(b[0]+": "+b[1]),b=A.next();return g.join(`\r
`)};function Gi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Io.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function _i(g){let A="";return qe(g,function(b,C){A+=C,A+=":",A+=b,A+=`\r
`}),A}function Co(g,A,b){e:{for(C in b){var C=!1;break e}C=!0}C||(b=_i(b),typeof g=="string"?b!=null&&qi(b):at(g,A,b))}function mt(g){bt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(mt,bt);var lr=/^https?$/i,Nu=["POST","PUT"];n=mt.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,A,b,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xo.g(),this.g.onreadystatechange=T(m(this.Ca,this));try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(Z){Ro(this,Z);return}if(g=b||"",b=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var K in C)b.set(K,C[K]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Z of C.keys())b.set(Z,C.get(Z));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(b.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(Nu,A,void 0)>=0)||C||K||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of b)this.g.setRequestHeader(Z,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(Z){Ro(this,Z)}};function Ro(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.o=5,Du(g),Mr(g)}function Du(g){g.A||(g.A=!0,Mt(g,"complete"),Mt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Mt(this,"complete"),Mt(this,"abort"),Mr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),mt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?No(this):this.Xa())},n.Xa=function(){No(this)};function No(g){if(g.h&&typeof a<"u"){if(g.v&&zi(g)==4)setTimeout(g.Ca.bind(g),0);else if(Mt(g,"readystatechange"),zi(g)==4){g.h=!1;try{const Z=g.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var b;if(!(b=A)){var C;if(C=Z===0){let fe=String(g.D).match(xd)[1]||null;!fe&&u.self&&u.self.location&&(fe=u.self.location.protocol.slice(0,-1)),C=!lr.test(fe?fe.toLowerCase():"")}b=C}if(b)Mt(g,"complete"),Mt(g,"success");else{g.o=6;try{var K=zi(g)>2?g.g.statusText:""}catch{K=""}g.l=K+" ["+g.ca()+"]",Du(g)}}finally{Mr(g)}}}}function Mr(g,A){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const b=g.g;g.g=null,A||Mt(g,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function zi(g){return g.g?g.g.readyState:0}n.ca=function(){try{return zi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),_o(A)}};function fn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Pr(g){const A={};g=(g.g&&zi(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<g.length;C++){if(P(g[C]))continue;var b=Da(g[C]);const K=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Z=A[K]||[];A[K]=Z,Z.push(b)}st(A,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ur(g,A,b){return b&&b.internalChannelParams&&b.internalChannelParams[g]||A}function _s(g){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ur("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ur("baseRetryDelayMs",5e3,g),this.Za=ur("retryDelaySeedMs",1e4,g),this.Ta=ur("forwardChannelMaxRetries",2,g),this.va=ur("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Eu(g&&g.concurrentRequestLimit),this.Ba=new gs,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_s.prototype,n.ka=8,n.I=1,n.connect=function(g,A,b,C){Pt(0),this.W=g,this.H=A||{},b&&C!==void 0&&(this.H.OSID=b,this.H.OAID=C),this.F=this.X,this.J=kd(this,null,this.W),cr(this)};function Mu(g){if(La(g),g.I==3){var A=g.V++,b=Yt(g.J);if(at(b,"SID",g.M),at(b,"RID",A),at(b,"TYPE","terminate"),Do(g,b),A=new Xn(g,g.j,A),A.M=2,A.A=bo(Yt(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(A.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=A.A,b=!0),b||(A.g=Ud(A.j,null),A.g.ea(A.A)),A.F=Date.now(),ei(A)}Vd(g)}function vs(g){g.g&&(Vu(g),g.g.cancel(),g.g=null)}function La(g){vs(g),g.v&&(u.clearTimeout(g.v),g.v=null),Fa(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function cr(g){if(!Tu(g.h)&&!g.m){g.m=!0;var A=g.Ea;z||D(),J||(z(),J=!0),R.add(A,g),g.D=0}}function Oa(g,A){return rr(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=A.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=mi(m(g.Ea,g,A),Pd(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const K=new Xn(this,this.j,g);let Z=this.o;if(this.U&&(Z?(Z=q(Z),pe(Z,this.U)):Z=this.U),this.u!==null||this.R||(K.J=Z,Z=null),this.S)e:{for(var A=0,b=0;b<this.i.length;b++){t:{var C=this.i[b];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(A+=C,A>4096){A=b;break e}if(A===4096||b===this.i.length-1){A=b+1;break e}}A=1e3}else A=1e3;A=Rd(this,K,A),b=Yt(this.J),at(b,"RID",g),at(b,"CVER",22),this.G&&at(b,"X-HTTP-Session-Id",this.G),Do(this,b),Z&&(this.R?A="headers="+qi(_i(Z))+"&"+A:this.u&&Co(b,this.u,Z)),Su(this.h,K),this.Ra&&at(b,"TYPE","init"),this.S?(at(b,"$req",A),at(b,"SID","null"),K.U=!0,de(K,b,null)):de(K,b,A),this.I=2}}else this.I==3&&(g?Pu(this,g):this.i.length==0||Tu(this.h)||Pu(this))};function Pu(g,A){var b;A?b=A.l:b=g.V++;const C=Yt(g.J);at(C,"SID",g.M),at(C,"RID",b),at(C,"AID",g.K),Do(g,C),g.u&&g.o&&Co(C,g.u,g.o),b=new Xn(g,g.j,b,g.D+1),g.u===null&&(b.J=g.o),A&&(g.i=A.G.concat(g.i)),A=Rd(g,b,1e3),b.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Su(g.h,b),de(b,C,A)}function Do(g,A){g.H&&qe(g.H,function(b,C){at(A,C,b)}),g.l&&qe({},function(b,C){at(A,C,b)})}function Rd(g,A,b){b=Math.min(g.i.length,b);const C=g.l?m(g.l.Ka,g.l,g):null;e:{var K=g.i;let Ue=-1;for(;;){const Ft=["count="+b];Ue==-1?b>0?(Ue=K[0].g,Ft.push("ofs="+Ue)):Ue=0:Ft.push("ofs="+Ue);let it=!0;for(let wt=0;wt<b;wt++){var Z=K[wt].g;const vi=K[wt].map;if(Z-=Ue,Z<0)Ue=Math.max(0,K[wt].g-100),it=!1;else try{Z="req"+Z+"_"||"";try{var fe=vi instanceof Map?vi:Object.entries(vi);for(const[fr,Hi]of fe){let Ki=Hi;d(Hi)&&(Ki=Fi(Hi)),Ft.push(Z+fr+"="+encodeURIComponent(Ki))}}catch(fr){throw Ft.push(Z+"type="+encodeURIComponent("_badmap")),fr}}catch{C&&C(vi)}}if(it){fe=Ft.join("&");break e}}fe=void 0}return g=g.i.splice(0,b),A.G=g,fe}function Nd(g){if(!g.g&&!g.v){g.Y=1;var A=g.Da;z||D(),J||(z(),J=!0),R.add(A,g),g.A=0}}function Mo(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=mi(m(g.Da,g),Pd(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Dd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=mi(m(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),vs(this),Dd(this))};function Vu(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function Dd(g){g.g=new Xn(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var A=Yt(g.na);at(A,"RID","rpc"),at(A,"SID",g.M),at(A,"AID",g.K),at(A,"CI",g.F?"0":"1"),!g.F&&g.ia&&at(A,"TO",g.ia),at(A,"TYPE","xmlhttp"),Do(g,A),g.u&&g.o&&Co(A,g.u,g.o),g.O&&(g.g.H=g.O);var b=g.g;g=g.ba,b.M=1,b.A=bo(Yt(A)),b.u=null,b.R=!0,Kt(b,g)}n.Va=function(){this.C!=null&&(this.C=null,vs(this),Mo(this),Pt(19))};function Fa(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function Md(g,A){var b=null;if(g.g==A){Fa(g),Vu(g),g.g=null;var C=2}else if(sr(g.h,A))b=A.G,Au(g.h,A),C=1;else return;if(g.I!=0){if(A.o)if(C==1){b=A.u?A.u.length:0,A=Date.now()-A.F;var K=g.D;C=cs(),Mt(C,new hi(C,b)),cr(g)}else Nd(g);else if(K=A.m,K==3||K==0&&A.X>0||!(C==1&&Oa(g,A)||C==2&&Mo(g)))switch(b&&b.length>0&&(A=g.h,A.i=A.i.concat(b)),K){case 1:dr(g,5);break;case 4:dr(g,10);break;case 3:dr(g,6);break;default:dr(g,2)}}}function Pd(g,A){let b=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(b*=2),b*A}function dr(g,A){if(g.j.info("Error code "+A),A==2){var b=m(g.bb,g),C=g.Ua;const K=!C;C=new ti(C||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||on(C,"https"),bo(C),K?Bi(C.toString(),b):Ru(C.toString(),b)}else Pt(2);g.I=0,g.l&&g.l.pa(A),Vd(g),La(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Vd(g){if(g.I=0,g.ja=[],g.l){const A=xu(g.h);(A.length!=0||g.i.length!=0)&&(N(g.ja,A),N(g.ja,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.oa()}}function kd(g,A,b){var C=b instanceof ti?Yt(b):new ti(b);if(C.g!="")A&&(C.g=A+"."+C.g),fs(C,C.u);else{var K=u.location;C=K.protocol,A=A?A+"."+K.hostname:K.hostname,K=+K.port;const Z=new ti(null);C&&on(Z,C),A&&(Z.g=A),K&&fs(Z,K),b&&(Z.h=b),C=Z}return b=g.G,A=g.wa,b&&A&&at(C,b,A),at(C,"VER",g.ka),Do(g,C),C}function Ud(g,A,b){if(A&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Aa&&!g.ma?new mt(new ar({ab:b})):new mt(g.ma),A.Fa(g.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ld(){}n=Ld.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Es(){}Es.prototype.g=function(g,A){return new Cn(g,A)};function Cn(g,A){bt.call(this),this.g=new _s(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(g?g["X-WebChannel-Client-Profile"]=A.sa:g={"X-WebChannel-Client-Profile":A.sa}),this.g.U=g,(g=A&&A.Qb)&&!P(g)&&(this.g.u=g),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!P(A)&&(this.g.G=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new Vr(this)}E(Cn,bt),Cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Mu(this.g)},Cn.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var b={};b.__data__=g,g=b}else this.v&&(b={},b.__data__=Fi(g),g=b);A.i.push(new Ot(A.Ya++,g)),A.I==3&&cr(A)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Mu(this.g),delete this.g,Cn.Z.N.call(this)};function Od(g){ht.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){e:{for(const b in A){g=b;break e}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}E(Od,ht);function Fd(){dn.call(this),this.status=1}E(Fd,dn);function Vr(g){this.g=g}E(Vr,Ld),Vr.prototype.ra=function(){Mt(this.g,"a")},Vr.prototype.qa=function(g){Mt(this.g,new Od(g))},Vr.prototype.pa=function(g){Mt(this.g,new Fd)},Vr.prototype.oa=function(){Mt(this.g,"b")},Es.prototype.createWebChannel=Es.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,Qw=function(){return new Es},jw=function(){return cs()},Jw=nt,iy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Rr.NO_ERROR=0,Rr.TIMEOUT=8,Rr.HTTP_ERROR=6,oh=Rr,Ao.COMPLETE="complete",Yw=Ao,Eo.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Cc=Eo,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,$w=mt}).apply(typeof Xf<"u"?Xf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du="12.9.0";function j6(n){du=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new jy("@firebase/firestore");function xl(){return io.logLevel}function Q6(n){io.setLogLevel(n)}function ce(n,...e){if(io.logLevel<=Qe.DEBUG){const t=e.map(n0);io.debug(`Firestore (${du}): ${n}`,...t)}}function Gt(n,...e){if(io.logLevel<=Qe.ERROR){const t=e.map(n0);io.error(`Firestore (${du}): ${n}`,...t)}}function nr(n,...e){if(io.logLevel<=Qe.WARN){const t=e.map(n0);io.warn(`Firestore (${du}): ${n}`,...t)}}function n0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Xw(n,i,t)}function Xw(n,e,t){let i=`FIRESTORE (${du}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Gt(i),new Error(i)}function Ae(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||Xw(e,s,i)}function X6(n,e){n||Ee(57014,e)}function ye(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Aa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class Z6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class e5{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let i=this.i;const s=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vn,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vn)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ae(typeof i.accessToken=="string",31837,{l:i}),new Ww(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class t5{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class n5{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new t5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class HA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ow(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);const i=a=>{a.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ce("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new HA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new HA(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=r5(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<t&&(i+=e.charAt(s[a]%62))}return i}}function Me(n,e){return n<e?-1:n>e?1:0}function ry(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),a=e.charAt(i);if(s!==a)return Rg(s)===Rg(a)?Me(s,a):Rg(s)?1:-1}return Me(n.length,e.length)}const s5=55296,o5=57343;function Rg(n){const e=n.charCodeAt(0);return e>=s5&&e<=o5}function zl(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}function Zw(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="__name__";class yr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ee(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return yr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const a=yr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Me(e.length,t.length)}static compareSegments(e,t){const i=yr.isNumericId(e),s=yr.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?yr.extractNumericId(e).compare(yr.extractNumericId(t)):ry(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ws.fromString(e.substring(4,e.length-2))}}class He extends yr{construct(e,t,i){return new He(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new He(t)}static emptyPath(){return new He([])}}const a5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends yr{construct(e,t,i){return new Rt(e,t,i)}static isValidIdentifier(e){return a5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===KA}static keyField(){return new Rt([KA])}static fromServerFormat(e){const t=[];let i="",s=0;const a=()=>{if(i.length===0)throw new le(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new le(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new le(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(i+=d,s++):(a(),s++)}if(a(),u)throw new le(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(t)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(He.fromString(e))}static fromName(e){return new he(He.fromString(e).popFirst(5))}static empty(){return new he(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n,e,t){if(!t)throw new le(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eI(n,e,t,i){if(e===!0&&i===!0)throw new le(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $A(n){if(!he.isDocumentKey(n))throw new le(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function YA(n){if(he.isDocumentKey(n))throw new le(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function et(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xh(n);throw new le(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nI(n,e){if(e<=0)throw new le(W.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(n,e){const t={typeString:n};return e&&(t.value=e),t}function ud(n,e){if(!tI(n))throw new le(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(s&&typeof u!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new le(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=-62135596800,jA=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*jA);return new ot(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<JA)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jA}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ud(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-JA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:en("string",ot._jsonSchemaVersion),seconds:en("number"),nanoseconds:en("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new ot(0,0))}static max(){return new Ie(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=-1;class Ih{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function sy(n){return n.fields.find((e=>e.kind===2))}function Zo(n){return n.fields.filter((e=>e.kind!==2))}Ih.UNKNOWN_ID=-1;class ah{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yc(0,di.min())}}function iI(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(i===1e9?new ot(t+1,0):new ot(t,i));return new di(s,he.empty(),e)}function rI(n){return new di(n.readTime,n.key,Hl)}class di{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new di(Ie.min(),he.empty(),Hl)}static max(){return new di(Ie.max(),he.empty(),Hl)}}function s0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:Me(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(n){if(n.code!==W.FAILED_PRECONDITION||n.message!==sI)throw n;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,i)=>{t(e)}))}static reject(e){return new H(((t,i)=>{i(e)}))}static waitFor(e){return new H(((t,i)=>{let s=0,a=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++a,u&&a===s&&t()}),(f=>i(f)))})),u=!0,a===s&&t()}))}static or(e){let t=H.resolve(!1);for(const i of e)t=t.next((s=>s?H.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,a)=>{i.push(t.call(this,s,a))})),this.waitFor(i)}static mapArray(e,t){return new H(((i,s)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{u[m]=_,++d,d===a&&i(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new H(((i,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):i()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="SimpleDb";class Wh{static open(e,t,i,s){try{return new Wh(t,e.transaction(s,i))}catch(a){throw new kc(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new vn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new kc(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=o0(i.target.error);this.S.reject(new kc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(ui,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new u5(t)}}class Tr{static delete(e){return ce(ui,"Removing database:",e),ta(Ky().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Nw())return!1;if(Tr.F())return!0;const e=bh(),t=Tr.M(e),i=0<t&&t<10,s=aI(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,Tr.M(bh())===12.2&&Gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ce(ui,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const u=a.target.result;t(u)},s.onblocked=()=>{i(new kc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const u=a.target.error;u.name==="VersionError"?i(new le(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?i(new le(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):i(new kc(e,u))},s.onupgradeneeded=a=>{ce(ui,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;this.N.k(u,s.transaction,a.oldVersion,this.version).next((()=>{ce(ui,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,s){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const d=Wh.open(this.db,e,a?"readonly":"readwrite",i),f=s(d).next((m=>(d.C(),m))).catch((m=>(d.abort(m),H.reject(m)))).toPromise();return f.catch((()=>{})),await d.D,f}catch(d){const f=d,m=f.name!=="FirebaseError"&&u<3;if(ce(ui,"Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class l5{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return ta(this.U.delete())}}class kc extends le{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ho(n){return n.name==="IndexedDbTransactionError"}class u5{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ce(ui,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ce(ui,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ta(i)}add(e){return ce(ui,"ADD",this.store.name,e,e),ta(this.store.add(e))}get(e){return ta(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(ui,"GET",this.store.name,e,t),t)))}delete(e){return ce(ui,"DELETE",this.store.name,e),ta(this.store.delete(e))}count(){return ce(ui,"COUNT",this.store.name),ta(this.store.count())}H(e,t){const i=this.options(e,t),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(i.range);return new H(((u,d)=>{a.onerror=f=>{d(f.target.error)},a.onsuccess=f=>{u(f.target.result)}}))}{const a=this.cursor(i),u=[];return this.J(a,((d,f)=>{u.push(f)})).next((()=>u))}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new H(((s,a)=>{i.onerror=u=>{a(u.target.error)},i.onsuccess=u=>{s(u.target.result)}}))}X(e,t){ce(ui,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const s=this.cursor(i);return this.J(s,((a,u,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.J(s,t)}te(e){const t=this.cursor({});return new H(((i,s)=>{t.onerror=a=>{const u=o0(a.target.error);s(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next((d=>{d?u.continue():i()})):i()}}))}J(e,t){const i=[];return new H(((s,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void s();const f=new l5(d),m=t(d.primaryKey,d.value,f);if(m instanceof H){const _=m.catch((E=>(f.done(),H.reject(E))));i.push(_)}f.isDone?s():f.G===null?d.continue():d.continue(f.G)}})).next((()=>H.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ta(n){return new H(((e,t)=>{n.onsuccess=i=>{const s=i.target.result;e(s)},n.onerror=i=>{const s=o0(i.target.error);t(s)}}))}let QA=!1;function o0(n){const e=Tr.M(bh());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QA||(QA=!0,setTimeout((()=>{throw i}),0)),i}}return n}const Uc="IndexBackfiller";class c5{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ce(Uc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ce(Uc,`Documents written: ${t}`)}catch(t){ho(t)?ce(Uc,"Ignoring IndexedDB error during index backfill: ",t):await fo(t)}await this.re(6e4)}))}}class d5{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let s=t,a=!0;return H.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!i.has(u))return ce(Uc,`Processing collection: ${u}`),this.oe(e,u,s).next((d=>{s-=d,i.add(u)}));a=!1})))).next((()=>t-s))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next((a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(s,a))).next((d=>(ce(Uc,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>u.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((s,a)=>{const u=rI(a);s0(u,i)>0&&(i=u)})),new di(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=-1;function cd(n){return n==null}function Jc(n){return n===0&&1/n==-1/0}function lI(n){return typeof n=="number"&&Number.isInteger(n)&&!Jc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch="";function wn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=XA(e)),e=f5(n.get(t),e);return XA(e)}function f5(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case Ch:t+="";break;default:t+=a}}return t}function XA(n){return n+Ch+""}function vr(n){const e=n.length;if(Ae(e>=2,64408,{path:n}),e===2)return Ae(n.charAt(0)===Ch&&n.charAt(1)==="",56145,{path:n}),He.emptyPath();const t=e-2,i=[];let s="";for(let a=0;a<e;){const u=n.indexOf(Ch,a);switch((u<0||u>t)&&Ee(50515,{path:n}),n.charAt(u+1)){case"":const d=n.substring(a,u);let f;s.length===0?f=d:(s+=d,f=s,s=""),i.push(f);break;case"":s+=n.substring(a,u),s+="\0";break;case"":s+=n.substring(a,u+1);break;default:Ee(61167,{path:n})}a=u+2}return new He(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="remoteDocuments",dd="owner",yl="owner",jc="mutationQueues",h5="userId",ji="mutations",WA="batchId",oa="userMutationsIndex",ZA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(n,e){return[n,wn(e)]}function uI(n,e,t){return[n,wn(e),t]}const m5={},Kl="documentMutations",Rh="remoteDocumentsV14",p5=["prefixPath","collectionGroup","readTime","documentId"],uh="documentKeyIndex",g5=["prefixPath","collectionGroup","documentId"],cI="collectionGroupIndex",y5=["collectionGroup","readTime","prefixPath","documentId"],Qc="remoteDocumentGlobal",oy="remoteDocumentGlobalKey",$l="targets",dI="queryTargetsIndex",_5=["canonicalId","targetId"],Yl="targetDocuments",v5=["targetId","path"],a0="documentTargetsIndex",E5=["path","targetId"],Nh="targetGlobalKey",ua="targetGlobal",Xc="collectionParents",T5=["collectionId","parent"],Jl="clientMetadata",S5="clientId",Zh="bundles",A5="bundleId",em="namedQueries",x5="name",l0="indexConfiguration",b5="indexId",ay="collectionGroupIndex",w5="collectionGroup",Lc="indexState",I5=["indexId","uid"],fI="sequenceNumberIndex",C5=["uid","sequenceNumber"],Oc="indexEntries",R5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hI="documentKeyIndex",N5=["indexId","uid","orderedDocumentKey"],tm="documentOverlays",D5=["userId","collectionPath","documentId"],ly="collectionPathOverlayIndex",M5=["userId","collectionPath","largestBatchId"],mI="collectionGroupOverlayIndex",P5=["userId","collectionGroup","largestBatchId"],u0="globals",V5="name",pI=[jc,ji,Kl,ea,$l,dd,ua,Yl,Jl,Qc,Xc,Zh,em],k5=[...pI,tm],gI=[jc,ji,Kl,Rh,$l,dd,ua,Yl,Jl,Qc,Xc,Zh,em,tm],yI=gI,c0=[...yI,l0,Lc,Oc],U5=c0,_I=[...c0,u0],L5=_I;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy extends oI{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function rn(n,e){const t=ye(n);return Tr.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){this.comparator=e,this.root=t||yn.EMPTY}insert(e,t){return new Tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wf(this.root,e,this.comparator,!0)}}class Wf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??yn.RED,this.left=s??yn.EMPTY,this.right=a??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,a){return new yn(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return yn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,i,s,a){return this}insert(e,t,i){return new yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tx(this.data.getIterator())}getIteratorFrom(e){return new tx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new dt(this.comparator);return t.data=e,t}}class tx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _l(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new $n([])}unionWith(e){let t=new dt(Rt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new $n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new EI("Invalid base64 string: "+a):a}})(e);return new Ut(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const F5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(n){if(Ae(!!n,39018),typeof n=="string"){let e=0;const t=F5.exec(n);if(Ae(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ts(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="server_timestamp",SI="__type__",AI="__previous_value__",xI="__local_write_time__";function nm(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[SI])==null?void 0:i.stringValue)===TI}function im(n){const e=n.mapValue.fields[AI];return nm(e)?im(e):e}function Wc(n){const e=es(n.mapValue.fields[xI].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,t,i,s,a,u,d,f,m,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=_,this.apiKey=E}}const cy="(default)";class ro{constructor(e,t){this.projectId=e,this.database=t||cy}static empty(){return new ro("","")}get isDefaultDatabase(){return this.database===cy}isEqual(e){return e instanceof ro&&e.projectId===this.projectId&&e.database===this.database}}function B5(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new le(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ro(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="__type__",bI="__max__",js={mapValue:{fields:{__type__:{stringValue:bI}}}},f0="__vector__",jl="value",ch={nullValue:"NULL_VALUE"};function so(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nm(n)?4:wI(n)?9007199254740991:rm(n)?10:11:Ee(28295,{value:n})}function Ar(n,e){if(n===e)return!0;const t=so(n);if(t!==so(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wc(n).isEqual(Wc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=es(s.timestampValue),d=es(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return ts(s.bytesValue).isEqual(ts(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Ct(s.geoPointValue.latitude)===Ct(a.geoPointValue.latitude)&&Ct(s.geoPointValue.longitude)===Ct(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Ct(s.integerValue)===Ct(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Ct(s.doubleValue),d=Ct(a.doubleValue);return u===d?Jc(u)===Jc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return zl(n.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(ex(u)!==ex(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Ar(u[f],d[f])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function Zc(n,e){return(n.values||[]).find((t=>Ar(t,e)))!==void 0}function oo(n,e){if(n===e)return 0;const t=so(n),i=so(e);if(t!==i)return Me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Ct(a.integerValue||a.doubleValue),f=Ct(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return nx(n.timestampValue,e.timestampValue);case 4:return nx(Wc(n),Wc(e));case 5:return ry(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=ts(a),f=ts(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const _=Me(d[m],f[m]);if(_!==0)return _}return Me(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Me(Ct(a.latitude),Ct(u.latitude));return d!==0?d:Me(Ct(a.longitude),Ct(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ix(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var T,w,N,k;const d=a.fields||{},f=u.fields||{},m=(T=d[jl])==null?void 0:T.arrayValue,_=(w=f[jl])==null?void 0:w.arrayValue,E=Me(((N=m==null?void 0:m.values)==null?void 0:N.length)||0,((k=_==null?void 0:_.values)==null?void 0:k.length)||0);return E!==0?E:ix(m,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===js.mapValue&&u===js.mapValue)return 0;if(a===js.mapValue)return 1;if(u===js.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let E=0;E<f.length&&E<_.length;++E){const T=ry(f[E],_[E]);if(T!==0)return T;const w=oo(d[f[E]],m[_[E]]);if(w!==0)return w}return Me(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function nx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Me(n,e);const t=es(n),i=es(e),s=Me(t.seconds,i.seconds);return s!==0?s:Me(t.nanos,i.nanos)}function ix(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const a=oo(t[s],i[s]);if(a)return a}return Me(t.length,i.length)}function Ql(n){return dy(n)}function dy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=es(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ts(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return he.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const a of t.values||[])s?s=!1:i+=",",i+=dy(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of i)a?a=!1:s+=",",s+=`${u}:${dy(t.fields[u])}`;return s+"}"})(n.mapValue):Ee(61005,{value:n})}function dh(n){switch(so(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=im(n);return e?16+dh(e):16;case 5:return 2*n.stringValue.length;case 6:return ts(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+dh(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return mo(i.fields,((a,u)=>{s+=a.length+dh(u)})),s})(n.mapValue);default:throw Ee(13486,{value:n})}}function da(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fy(n){return!!n&&"integerValue"in n}function ed(n){return!!n&&"arrayValue"in n}function rx(n){return!!n&&"nullValue"in n}function sx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fh(n){return!!n&&"mapValue"in n}function rm(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[d0])==null?void 0:i.stringValue)===f0}function Fc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return mo(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Fc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fc(n.arrayValue.values[t]);return e}return{...n}}function wI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===bI}const II={mapValue:{fields:{[d0]:{stringValue:f0},[jl]:{arrayValue:{}}}}};function G5(n){return"nullValue"in n?ch:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?da(ro.empty(),he.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?rm(n)?II:{mapValue:{}}:Ee(35942,{value:n})}function z5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?da(ro.empty(),he.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?II:"mapValue"in n?rm(n)?{mapValue:{}}:js:Ee(61959,{value:n})}function ox(n,e){const t=oo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ax(n,e){const t=oo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!fh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fc(t)}setAll(e){let t=Rt.emptyPath(),i={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,s),i={},s=[],t=d.popLast()}u?i[d.lastSegment()]=Fc(u):s.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,s)}delete(e){const t=this.field(e.popLast());fh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];fh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){mo(t,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new _n(Fc(this.value))}}function CI(n){const e=[];return mo(n.fields,((t,i)=>{const s=new Rt([t]);if(fh(i)){const a=CI(i.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t,i,s,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new xt(e,0,Ie.min(),Ie.min(),Ie.min(),_n.empty(),0)}static newFoundDocument(e,t,i,s){return new xt(e,1,t,Ie.min(),i,s,0)}static newNoDocument(e,t){return new xt(e,2,t,Ie.min(),Ie.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new xt(e,3,t,Ie.min(),Ie.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t){this.position=e,this.inclusive=t}}function lx(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?i=he.comparator(he.fromName(u.referenceValue),t.key):i=oo(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function ux(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ar(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t="asc"){this.field=e,this.dir=t}}function H5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{}class Je extends RI{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new K5(e,t,i):t==="array-contains"?new J5(e,i):t==="in"?new kI(e,i):t==="not-in"?new j5(e,i):t==="array-contains-any"?new Q5(e,i):new Je(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new $5(e,i):new Y5(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(oo(t,this.value)):t!==null&&so(this.value)===so(t)&&this.matchesComparison(oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ct extends RI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ct(e,t)}matches(e){return Xl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xl(n){return n.op==="and"}function hy(n){return n.op==="or"}function h0(n){return NI(n)&&Xl(n)}function NI(n){for(const e of n.filters)if(e instanceof ct)return!1;return!0}function my(n){if(n instanceof Je)return n.field.canonicalString()+n.op.toString()+Ql(n.value);if(h0(n))return n.filters.map((e=>my(e))).join(",");{const e=n.filters.map((t=>my(t))).join(",");return`${n.op}(${e})`}}function DI(n,e){return n instanceof Je?(function(i,s){return s instanceof Je&&i.op===s.op&&i.field.isEqual(s.field)&&Ar(i.value,s.value)})(n,e):n instanceof ct?(function(i,s){return s instanceof ct&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,u,d)=>a&&DI(u,s.filters[d])),!0):!1})(n,e):void Ee(19439)}function MI(n,e){const t=n.filters.concat(e);return ct.create(t,n.op)}function PI(n){return n instanceof Je?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ql(t.value)}`})(n):n instanceof ct?(function(t){return t.op.toString()+" {"+t.getFilters().map(PI).join(" ,")+"}"})(n):"Filter"}class K5 extends Je{constructor(e,t,i){super(e,t,i),this.key=he.fromName(i.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class $5 extends Je{constructor(e,t){super(e,"in",t),this.keys=VI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Y5 extends Je{constructor(e,t){super(e,"not-in",t),this.keys=VI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function VI(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>he.fromName(i.referenceValue)))}class J5 extends Je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ed(t)&&Zc(t.arrayValue,this.value)}}class kI extends Je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zc(this.value.arrayValue,t)}}class j5 extends Je{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zc(this.value.arrayValue,t)}}class Q5 extends Je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ed(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Zc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,t=null,i=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function py(n,e=null,t=[],i=[],s=null,a=null,u=null){return new X5(n,e,t,i,s,a,u)}function fa(n){const e=ye(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>my(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),cd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ql(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ql(i))).join(",")),e.Te=t}return e.Te}function fd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!H5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ux(n.startAt,e.startAt)&&ux(n.endAt,e.endAt)}function Dh(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Mh(n,e){return n.filters.filter((t=>t instanceof Je&&t.field.isEqual(e)))}function cx(n,e,t){let i=ch,s=!0;for(const a of Mh(n,e)){let u=ch,d=!0;switch(a.op){case"<":case"<=":u=G5(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,d=!1;break;case"!=":case"not-in":u=ch}ox({value:i,inclusive:s},{value:u,inclusive:d})<0&&(i=u,s=d)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];ox({value:i,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(i=u,s=t.inclusive);break}}return{value:i,inclusive:s}}function dx(n,e,t){let i=js,s=!0;for(const a of Mh(n,e)){let u=js,d=!0;switch(a.op){case">=":case">":u=z5(a.value),d=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,d=!1;break;case"!=":case"not-in":u=js}ax({value:i,inclusive:s},{value:u,inclusive:d})>0&&(i=u,s=d)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];ax({value:i,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(i=u,s=t.inclusive);break}}return{value:i,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,t=null,i=[],s=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function UI(n,e,t,i,s,a,u,d){return new rs(n,e,t,i,s,a,u,d)}function fu(n){return new rs(n)}function fx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function W5(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function m0(n){return n.collectionGroup!==null}function kl(n){const e=ye(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new dt(Rt.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new td(a,i))})),t.has(Rt.keyField().canonicalString())||e.Ie.push(new td(Rt.keyField(),i))}return e.Ie}function Pn(n){const e=ye(n);return e.Ee||(e.Ee=Z5(e,kl(n))),e.Ee}function Z5(n,e){if(n.limitType==="F")return py(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new td(s.field,a)}));const t=n.endAt?new ao(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ao(n.startAt.position,n.startAt.inclusive):null;return py(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function gy(n,e){const t=n.filters.concat([e]);return new rs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function e3(n,e){const t=n.explicitOrderBy.concat([e]);return new rs(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Ph(n,e,t){return new rs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function t3(n,e){return new rs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,e,n.endAt)}function n3(n,e){return new rs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,e)}function hd(n,e){return fd(Pn(n),Pn(e))&&n.limitType===e.limitType}function LI(n){return`${fa(Pn(n))}|lt:${n.limitType}`}function bl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>PI(s))).join(", ")}]`),cd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>Ql(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>Ql(s))).join(",")),`Target(${i})`})(Pn(n))}; limitType=${n.limitType})`}function md(n,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):he.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,s){for(const a of kl(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(u,d,f){const m=lx(u,d,f);return u.inclusive?m<=0:m<0})(i.startAt,kl(i),s)||i.endAt&&!(function(u,d,f){const m=lx(u,d,f);return u.inclusive?m>=0:m>0})(i.endAt,kl(i),s))})(n,e)}function OI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FI(n){return(e,t)=>{let i=!1;for(const s of kl(n)){const a=i3(s,e,t);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function i3(n,e,t){const i=n.field.isKeyField()?he.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?oo(f,m):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,((t,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return vI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=new Tt(he.comparator);function Yn(){return r3}const qI=new Tt(he.comparator);function Rc(...n){let e=qI;for(const t of n)e=e.insert(t.key,t);return e}function BI(n){let e=qI;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Er(){return qc()}function GI(){return qc()}function qc(){return new ss((n=>n.toString()),((n,e)=>n.isEqual(e)))}const s3=new Tt(he.comparator),o3=new dt(he.comparator);function Oe(...n){let e=o3;for(const t of n)e=e.add(t);return e}const a3=new dt(Me);function p0(){return a3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function zI(n){return{integerValue:""+n}}function HI(n,e){return lI(e)?zI(e):g0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(){this._=void 0}}function l3(n,e,t){return n instanceof Wl?(function(s,a){const u={fields:{[SI]:{stringValue:TI},[xI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&nm(a)&&(a=im(a)),a&&(u.fields[AI]=a),{mapValue:u}})(t,e):n instanceof ha?$I(n,e):n instanceof ma?YI(n,e):(function(s,a){const u=KI(s,a),d=hx(u)+hx(s.Ae);return fy(u)&&fy(s.Ae)?zI(d):g0(s.serializer,d)})(n,e)}function u3(n,e,t){return n instanceof ha?$I(n,e):n instanceof ma?YI(n,e):t}function KI(n,e){return n instanceof Zl?(function(i){return fy(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Wl extends sm{}class ha extends sm{constructor(e){super(),this.elements=e}}function $I(n,e){const t=JI(e);for(const i of n.elements)t.some((s=>Ar(s,i)))||t.push(i);return{arrayValue:{values:t}}}class ma extends sm{constructor(e){super(),this.elements=e}}function YI(n,e){let t=JI(e);for(const i of n.elements)t=t.filter((s=>!Ar(s,i)));return{arrayValue:{values:t}}}class Zl extends sm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function hx(n){return Ct(n.integerValue||n.doubleValue)}function JI(n){return ed(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t){this.field=e,this.transform=t}}function c3(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof ha&&s instanceof ha||i instanceof ma&&s instanceof ma?zl(i.elements,s.elements,Ar):i instanceof Zl&&s instanceof Zl?Ar(i.Ae,s.Ae):i instanceof Wl&&s instanceof Wl})(n.transform,e.transform)}class d3{constructor(e,t){this.version=e,this.transformResults=t}}class Nt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nt}static exists(e){return new Nt(void 0,e)}static updateTime(e){return new Nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class om{}function jI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new mu(n.key,Nt.none()):new hu(n.key,n.data,Nt.none());{const t=n.data,i=_n.empty();let s=new dt(Rt.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),s=s.add(a)}return new os(n.key,i,new $n(s.toArray()),Nt.none())}}function f3(n,e,t){n instanceof hu?(function(s,a,u){const d=s.value.clone(),f=px(s.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof os?(function(s,a,u){if(!hh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=px(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(QI(s)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Bc(n,e,t,i){return n instanceof hu?(function(a,u,d,f){if(!hh(a.precondition,u))return d;const m=a.value.clone(),_=gx(a.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,i):n instanceof os?(function(a,u,d,f){if(!hh(a.precondition,u))return d;const m=gx(a.fieldTransforms,f,u),_=u.data;return _.setAll(QI(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return hh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function h3(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),a=KI(i.transform,s||null);a!=null&&(t===null&&(t=_n.empty()),t.set(i.field,a))}return t||null}function mx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&zl(i,s,((a,u)=>c3(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class hu extends om{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class os extends om{constructor(e,t,i,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function QI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function px(n,e,t){const i=new Map;Ae(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,d=e.data.field(a.field);i.set(a.field,u3(u,d,t[s]))}return i}function gx(n,e,t){const i=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);i.set(s.field,l3(a,u,e))}return i}class mu extends om{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y0 extends om{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&f3(a,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Bc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Bc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=GI();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(s.key)?null:d;const f=jI(u,d);f!==null&&i.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Ie.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&zl(this.mutations,e.mutations,((t,i)=>mx(t,i)))&&zl(this.baseMutations,e.baseMutations,((t,i)=>mx(t,i)))}}class v0{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Ae(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return s3})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,i[u].version);return new v0(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,Xe;function XI(n){switch(n){case W.OK:return Ee(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function WI(n){if(n===void 0)return Gt("GRPC error has no .code"),W.UNKNOWN;switch(n){case Wt.OK:return W.OK;case Wt.CANCELLED:return W.CANCELLED;case Wt.UNKNOWN:return W.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return W.INTERNAL;case Wt.UNAVAILABLE:return W.UNAVAILABLE;case Wt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Wt.NOT_FOUND:return W.NOT_FOUND;case Wt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Wt.ABORTED:return W.ABORTED;case Wt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Wt.DATA_LOSS:return W.DATA_LOSS;default:return Ee(39323,{code:n})}}(Xe=Wt||(Wt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=new Ws([4294967295,4294967295],0);function yx(n){const e=ZI().encode(n),t=new Kw;return t.update(e),new Uint8Array(t.digest())}function _x(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ws([t,i],0),new Ws([s,a],0)]}class T0{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Nc(`Invalid padding: ${t}`);if(i<0)throw new Nc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Nc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Nc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ws.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(Ws.fromNumber(i)));return s.compare(p3)===1&&(s=new Ws([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=yx(e),[i,s]=_x(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,s,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new T0(a,s,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=yx(e),[i,s]=_x(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,s,a);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t,i,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,yd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new gd(Ie.min(),s,new Tt(Me),Yn(),Oe())}}class yd{constructor(e,t,i,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new yd(i,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,i,s){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=s}}class eC{constructor(e,t){this.targetId=e,this.Ce=t}}class tC{constructor(e,t,i=Ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class vx{constructor(){this.ve=0,this.Fe=Ex(),this.Me=Ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),i=Oe();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Ee(38017,{changeType:a})}})),new yd(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=Ex()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class g3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yn(),this.He=Zf(),this.Je=Zf(),this.Ze=new Tt(Me)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Dh(a))if(i===0){const u=new he(a.path);this.et(t,u,xt.newNoDocument(u,Ie.min()))}else Ae(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),f=d?this.ct(d,e,u):1;if(f!==0){this.it(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=t;let u,d;try{u=ts(i).toUint8Array()}catch(f){if(f instanceof EI)return nr("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new T0(u,s,a)}catch(f){return nr(f instanceof Nc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&Dh(d.target)){const f=new he(d.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,xt.newNoDocument(f,e))}a.Be&&(t.set(u,a.ke()),a.Ke())}}));let i=Oe();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const s=new gd(e,t,this.Ze,this.je,i);return this.je=Yn(),this.He=Zf(),this.Je=Zf(),this.Ze=new Tt(Me),s}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new vx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new dt(Me),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new dt(Me),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zf(){return new Tt(he.comparator)}function Ex(){return new Tt(he.comparator)}const y3={asc:"ASCENDING",desc:"DESCENDING"},_3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v3={and:"AND",or:"OR"};class E3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yy(n,e){return n.useProto3Json||cd(e)?e:{value:e}}function eu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function T3(n,e){return eu(n,e.toTimestamp())}function zt(n){return Ae(!!n,49232),Ie.fromTimestamp((function(t){const i=es(t);return new ot(i.seconds,i.nanos)})(n))}function S0(n,e){return _y(n,e).canonicalString()}function _y(n,e){const t=(function(s){return new He(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function iC(n){const e=He.fromString(n);return Ae(hC(e),10190,{key:e.toString()}),e}function nd(n,e){return S0(n.databaseId,e.path)}function Sr(n,e){const t=iC(e);if(t.get(1)!==n.databaseId.projectId)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(oC(t))}function rC(n,e){return S0(n.databaseId,e)}function sC(n){const e=iC(n);return e.length===4?He.emptyPath():oC(e)}function vy(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oC(n){return Ae(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Tx(n,e,t){return{name:nd(n,e),fields:t.value.mapValue.fields}}function aC(n,e,t){const i=Sr(n,e.name),s=zt(e.updateTime),a=e.createTime?zt(e.createTime):Ie.min(),u=new _n({mapValue:{fields:e.fields}}),d=xt.newFoundDocument(i,s,a,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function S3(n,e){return"found"in e?(function(i,s){Ae(!!s.found,43571),s.found.name,s.found.updateTime;const a=Sr(i,s.found.name),u=zt(s.found.updateTime),d=s.found.createTime?zt(s.found.createTime):Ie.min(),f=new _n({mapValue:{fields:s.found.fields}});return xt.newFoundDocument(a,u,d,f)})(n,e):"missing"in e?(function(i,s){Ae(!!s.missing,3894),Ae(!!s.readTime,22933);const a=Sr(i,s.missing),u=zt(s.readTime);return xt.newNoDocument(a,u)})(n,e):Ee(7234,{result:e})}function A3(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ee(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(Ae(_===void 0||typeof _=="string",58123),Ut.fromBase64String(_||"")):(Ae(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Ut.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const _=m.code===void 0?W.UNKNOWN:WI(m.code);return new le(_,m.message||"")})(u);t=new tC(i,s,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Sr(n,i.document.name),a=zt(i.document.updateTime),u=i.document.createTime?zt(i.document.createTime):Ie.min(),d=new _n({mapValue:{fields:i.document.fields}}),f=xt.newFoundDocument(s,a,u,d),m=i.targetIds||[],_=i.removedTargetIds||[];t=new mh(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Sr(n,i.document),a=i.readTime?zt(i.readTime):Ie.min(),u=xt.newNoDocument(s,a),d=i.removedTargetIds||[];t=new mh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Sr(n,i.document),a=i.removedTargetIds||[];t=new mh([],a,s,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,u=new m3(s,a),d=i.targetId;t=new eC(d,u)}}return t}function id(n,e){let t;if(e instanceof hu)t={update:Tx(n,e.key,e.value)};else if(e instanceof mu)t={delete:nd(n,e.key)};else if(e instanceof os)t={update:Tx(n,e.key,e.data),updateMask:R3(e.fieldMask)};else{if(!(e instanceof y0))return Ee(16599,{dt:e.type});t={verify:nd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Wl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ha)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ma)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Zl)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ee(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:T3(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ee(27497)})(n,e.precondition)),t}function Ey(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Nt.updateTime(zt(a.updateTime)):a.exists!==void 0?Nt.exists(a.exists):Nt.none()})(e.currentDocument):Nt.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(u,d){let f=null;if("setToServerValue"in d)Ae(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),f=new Wl;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];f=new ha(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];f=new ma(_)}else"increment"in d?f=new Zl(u,d.increment):Ee(16584,{proto:d});const m=Rt.fromServerFormat(d.fieldPath);return new pd(m,f)})(n,s))):[];if(e.update){e.update.name;const s=Sr(n,e.update.name),a=new _n({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(f){const m=f.fieldPaths||[];return new $n(m.map((_=>Rt.fromServerFormat(_))))})(e.updateMask);return new os(s,a,u,t,i)}return new hu(s,a,t,i)}if(e.delete){const s=Sr(n,e.delete);return new mu(s,t)}if(e.verify){const s=Sr(n,e.verify);return new y0(s,t)}return Ee(1463,{proto:e})}function x3(n,e){return n&&n.length>0?(Ae(e!==void 0,14353),n.map((t=>(function(s,a){let u=s.updateTime?zt(s.updateTime):zt(a);return u.isEqual(Ie.min())&&(u=zt(a)),new d3(u,s.transformResults||[])})(t,e)))):[]}function lC(n,e){return{documents:[rC(n,e.path)]}}function uC(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=rC(n,s);const a=(function(m){if(m.length!==0)return fC(ct.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(T){return{field:wl(T.field),direction:w3(T.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=yy(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function cC(n){let e=sC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Ae(i===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const T=dC(E);return T instanceof ct&&h0(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((T=>(function(N){return new td(Il(N.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let T;return T=typeof E=="object"?E.value:E,cd(T)?null:T})(t.limit));let f=null;t.startAt&&(f=(function(E){const T=!!E.before,w=E.values||[];return new ao(w,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const T=!E.before,w=E.values||[];return new ao(w,T)})(t.endAt)),UI(e,s,u,a,d,"F",f,m)}function b3(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Il(t.unaryFilter.field);return Je.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Il(t.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Il(t.unaryFilter.field);return Je.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Il(t.unaryFilter.field);return Je.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Je.create(Il(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ct.create(t.compositeFilter.filters.map((i=>dC(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function w3(n){return y3[n]}function I3(n){return _3[n]}function C3(n){return v3[n]}function wl(n){return{fieldPath:n.canonicalString()}}function Il(n){return Rt.fromServerFormat(n.fieldPath)}function fC(n){return n instanceof Je?(function(t){if(t.op==="=="){if(sx(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NAN"}};if(rx(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sx(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NOT_NAN"}};if(rx(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(t.field),op:I3(t.op),value:t.value}}})(n):n instanceof ct?(function(t){const i=t.getFilters().map((s=>fC(s)));return i.length===1?i[0]:{compositeFilter:{op:C3(t.op),filters:i}}})(n):Ee(54877,{filter:n})}function R3(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function hC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function mC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,t,i,s,a=Ie.min(),u=Ie.min(),d=Ut.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.yt=e}}function N3(n,e){let t;if(e.document)t=aC(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=he.fromSegments(e.noDocument.path),s=ga(e.noDocument.readTime);t=xt.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee(56709);{const i=he.fromSegments(e.unknownDocument.path),s=ga(e.unknownDocument.version);t=xt.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime((function(s){const a=new ot(s[0],s[1]);return Ie.fromTimestamp(a)})(e.readTime)),t}function Sx(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(a,u){return{name:nd(a,u.key),fields:u.data.value.mapValue.fields,updateTime:eu(a,u.version.toTimestamp()),createTime:eu(a,u.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:pa(e.version)};else{if(!e.isUnknownDocument())return Ee(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:pa(e.version)}}return i}function Vh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function pa(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ga(n){const e=new ot(n.seconds,n.nanoseconds);return Ie.fromTimestamp(e)}function na(n,e){const t=(e.baseMutations||[]).map((a=>Ey(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];u.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const i=e.mutations.map((a=>Ey(n.yt,a))),s=ot.fromMillis(e.localWriteTimeMs);return new _0(e.batchId,s,t,i)}function Dc(n){const e=ga(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ga(n.lastLimboFreeSnapshotVersion):Ie.min();let i;return i=(function(a){return a.documents!==void 0})(n.query)?(function(a){const u=a.documents.length;return Ae(u===1,1966,{count:u}),Pn(fu(sC(a.documents[0])))})(n.query):(function(a){return Pn(cC(a))})(n.query),new Qr(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ut.fromBase64String(n.resumeToken))}function gC(n,e){const t=pa(e.snapshotVersion),i=pa(e.lastLimboFreeSnapshotVersion);let s;s=Dh(e.target)?lC(n.yt,e.target):uC(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fa(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function A0(n){const e=cC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ph(e,e.limit,"L"):e}function Ng(n,e){return new E0(e.largestBatchId,Ey(n.yt,e.overlayMutation))}function Ax(n,e){const t=e.path.lastSegment();return[n,wn(e.path.popLast()),t]}function xx(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:pa(i.readTime),documentKey:wn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{getBundleMetadata(e,t){return bx(e).get(t).next((i=>{if(i)return(function(a){return{id:a.bundleId,createTime:ga(a.createTime),version:a.version}})(i)}))}saveBundleMetadata(e,t){return bx(e).put((function(s){return{bundleId:s.id,createTime:pa(zt(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return wx(e).get(t).next((i=>{if(i)return(function(a){return{name:a.name,query:A0(a.bundledQuery),readTime:ga(a.readTime)}})(i)}))}saveNamedQuery(e,t){return wx(e).put((function(s){return{name:s.name,readTime:pa(zt(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function bx(n){return rn(n,Zh)}function wx(n){return rn(n,em)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new am(e,i)}getOverlay(e,t){return Tc(e).get(Ax(this.userId,t)).next((i=>i?Ng(this.serializer,i):null))}getOverlays(e,t){const i=Er();return H.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,t,i){const s=[];return i.forEach(((a,u)=>{const d=new E0(t,u);s.push(this.bt(e,d))})),H.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach((u=>s.add(wn(u.getCollectionPath()))));const a=[];return s.forEach((u=>{const d=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);a.push(Tc(e).X(ly,d))})),H.waitFor(a)}getOverlaysForCollection(e,t,i){const s=Er(),a=wn(t),u=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Tc(e).H(ly,u).next((d=>{for(const f of d){const m=Ng(this.serializer,f);s.set(m.getKey(),m)}return s}))}getOverlaysForCollectionGroup(e,t,i,s){const a=Er();let u;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Tc(e).ee({index:mI,range:d},((f,m,_)=>{const E=Ng(this.serializer,m);a.size()<s||E.largestBatchId===u?(a.set(E.getKey(),E),u=E.largestBatchId):_.done()})).next((()=>a))}bt(e,t){return Tc(e).put((function(s,a,u){const[d,f,m]=Ax(a,u.mutation.key);return{userId:a,collectionPath:f,documentId:m,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:id(s.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Tc(n){return rn(n,tm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{St(e){return rn(e,u0)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const i=t==null?void 0:t.value;return i?Ut.fromUint8Array(i):Ut.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ct(e.integerValue));else if("doubleValue"in e){const i=Ct(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Jc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=es(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ts(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?wI(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):rm(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):Ee(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const i=e.fields||{};this.Ft(t,55);for(const s of Object.keys(i))this.Ot(s,t),this.Ct(i[s],t)}kt(e,t){var u,d;const i=e.fields||{};this.Ft(t,53);const s=jl,a=((d=(u=i[s].arrayValue)==null?void 0:u.values)==null?void 0:d.length)||0;this.Ft(t,15),t.Mt(Ct(a)),this.Ot(s,t),this.Ct(i[s],t)}qt(e,t){const i=e.values||[];this.Ft(t,50);for(const s of i)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),he.fromName(e).path.forEach((i=>{this.Ft(t,60),this.$t(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ia.Wt=new ia;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=255;function P3(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function Ix(n){const e=64-(function(i){let s=0;for(let a=0;a<8;++a){const u=P3(255&i[a]);if(s+=u,u!==8)break}return s})(n);return Math.ceil(e/8)}class V3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ht(i.value),i=t.next();this.Jt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const s=t.codePointAt(0);this.Ht(240|s>>>18),this.Ht(128|63&s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s)}}this.Jt()}Yt(e){const t=this.en(e),i=Ix(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),i=Ix(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(vl),this.sn(255)}_n(){this.an(vl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===vl?(this.sn(vl),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===vl?(this.an(vl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class k3{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class U3{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Sc{constructor(){this.cn=new V3,this.ascending=new k3(this.cn),this.descending=new U3(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t,i,s){this.hn=e,this.Pn=t,this.Tn=i,this.In=s}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.In,0),t!==e?i.set([0],this.In.length):++i[i.length-1],new ra(this.hn,this.Pn,this.Tn,i)}Rn(e,t,i){return{indexId:this.hn,uid:e,arrayValue:ph(this.Tn),directionalValue:ph(this.In),orderedDocumentKey:ph(t),documentKey:i.path.toArray()}}An(e,t,i){const s=this.Rn(e,t,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function zs(n,e){let t=n.hn-e.hn;return t!==0?t:(t=Cx(n.Tn,e.Tn),t!==0?t:(t=Cx(n.In,e.In),t!==0?t:he.comparator(n.Pn,e.Pn)))}function Cx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function ph(n){return Rw()?(function(t){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return i})(n):n}function Rx(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(n)}class Nx{constructor(e){this.Vn=new dt(((t,i)=>Rt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(e){if(Ae(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=sy(e);if(t!==void 0&&!this.pn(t))return!1;const i=Zo(e);let s=new Set,a=0,u=0;for(;a<i.length&&this.pn(i[a]);++a)s=s.add(i[a].fieldPath.canonicalString());if(a===i.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!s.has(d.field.canonicalString())){const f=i[a];if(!this.yn(d,f)||!this.wn(this.dn[u++],f))return!1}++a}for(;a<i.length;++a){const d=i[a];if(u>=this.dn.length||!this.wn(this.dn[u++],d))return!1}return!0}bn(){if(this.fn)return null;let e=new dt(Rt.comparator);const t=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new ah(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new ah(i.field,0))}for(const i of this.dn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new ah(i.field,i.dir==="asc"?0:1)));return new Ih(Ih.UNKNOWN_ID,this.collectionId,t,Yc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(n){var t,i;if(Ae(n instanceof Je||n instanceof ct,20012),n instanceof Je){if(n instanceof kI){const s=((i=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:i.map((a=>Je.create(n.field,"==",a))))||[];return ct.create(s,"or")}return n}const e=n.filters.map((s=>yC(s)));return ct.create(e,n.op)}function L3(n){if(n.getFilters().length===0)return[];const e=Ay(yC(n));return Ae(_C(e),7391),Ty(e)||Sy(e)?[e]:e.getFilters()}function Ty(n){return n instanceof Je}function Sy(n){return n instanceof ct&&h0(n)}function _C(n){return Ty(n)||Sy(n)||(function(t){if(t instanceof ct&&hy(t)){for(const i of t.getFilters())if(!Ty(i)&&!Sy(i))return!1;return!0}return!1})(n)}function Ay(n){if(Ae(n instanceof Je||n instanceof ct,34018),n instanceof Je)return n;if(n.filters.length===1)return Ay(n.filters[0]);const e=n.filters.map((i=>Ay(i)));let t=ct.create(e,n.op);return t=kh(t),_C(t)?t:(Ae(t instanceof ct,64498),Ae(Xl(t),40251),Ae(t.filters.length>1,57927),t.filters.reduce(((i,s)=>x0(i,s))))}function x0(n,e){let t;return Ae(n instanceof Je||n instanceof ct,38388),Ae(e instanceof Je||e instanceof ct,25473),t=n instanceof Je?e instanceof Je?(function(s,a){return ct.create([s,a],"and")})(n,e):Dx(n,e):e instanceof Je?Dx(e,n):(function(s,a){if(Ae(s.filters.length>0&&a.filters.length>0,48005),Xl(s)&&Xl(a))return MI(s,a.getFilters());const u=hy(s)?s:a,d=hy(s)?a:s,f=u.filters.map((m=>x0(m,d)));return ct.create(f,"or")})(n,e),kh(t)}function Dx(n,e){if(Xl(e))return MI(e,n.getFilters());{const t=e.filters.map((i=>x0(n,i)));return ct.create(t,"or")}}function kh(n){if(Ae(n instanceof Je||n instanceof ct,11850),n instanceof Je)return n;const e=n.getFilters();if(e.length===1)return kh(e[0]);if(NI(n))return n;const t=e.map((s=>kh(s))),i=[];return t.forEach((s=>{s instanceof Je?i.push(s):s instanceof ct&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:ct.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.Sn=new b0}addToCollectionParentIndex(e,t){return this.Sn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(di.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(di.min())}updateCollectionGroup(e,t,i){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class b0{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new dt(He.comparator),a=!s.has(i);return this.index[t]=s.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new dt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="IndexedDbIndexManager",eh=new Uint8Array(0);class F3{constructor(e,t){this.databaseId=t,this.Dn=new b0,this.Cn=new ss((i=>fa(i)),((i,s)=>fd(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const a={collectionId:i,parent:wn(s)};return Px(e).put(a)}return H.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[Zw(t),""],!1,!0);return Px(e).H(s).next((a=>{for(const u of a){if(u.collectionId!==t)break;i.push(vr(u.parent))}return i}))}addFieldIndex(e,t){const i=Ac(e),s=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete s.indexId;const a=i.add(s);if(t.indexState){const u=Tl(e);return a.next((d=>{u.put(xx(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const i=Ac(e),s=Tl(e),a=El(e);return i.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ac(e),i=El(e),s=Tl(e);return t.X().next((()=>i.X())).next((()=>s.X()))}createTargetIndexes(e,t){return H.forEach(this.vn(t),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const a=new Nx(i).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const i=El(e);let s=!0;const a=new Map;return H.forEach(this.vn(t),(u=>this.Fn(e,u).next((d=>{s&&(s=!!d),a.set(u,d)})))).next((()=>{if(s){let u=Oe();const d=[];return H.forEach(a,((f,m)=>{ce(Mx,`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map((se=>`${se.fieldPath}:${se.kind}`)).join(",")}`})(f)} to execute ${fa(t)}`);const _=(function(Q,se){const z=sy(se);if(z===void 0)return null;for(const J of Mh(Q,z.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null})(m,f),E=(function(Q,se){const z=new Map;for(const J of Zo(se))for(const R of Mh(Q,J.fieldPath))switch(R.op){case"==":case"in":z.set(J.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return z.set(J.fieldPath.canonicalString(),R.value),Array.from(z.values())}return null})(m,f),T=(function(Q,se){const z=[];let J=!0;for(const R of Zo(se)){const D=R.kind===0?cx(Q,R.fieldPath,Q.startAt):dx(Q,R.fieldPath,Q.startAt);z.push(D.value),J&&(J=D.inclusive)}return new ao(z,J)})(m,f),w=(function(Q,se){const z=[];let J=!0;for(const R of Zo(se)){const D=R.kind===0?dx(Q,R.fieldPath,Q.endAt):cx(Q,R.fieldPath,Q.endAt);z.push(D.value),J&&(J=D.inclusive)}return new ao(z,J)})(m,f),N=this.Mn(f,m,T),k=this.Mn(f,m,w),V=this.xn(f,m,E),$=this.On(f.indexId,_,N,T.inclusive,k,w.inclusive,V);return H.forEach($,(ne=>i.Z(ne,t.limit).next((Q=>{Q.forEach((se=>{const z=he.fromSegments(se.documentKey);u.has(z)||(u=u.add(z),d.push(z))}))}))))})).next((()=>d))}return H.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=L3(ct.create(e.filters,"and")).map((i=>py(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,i,s,a,u,d){const f=(t!=null?t.length:1)*Math.max(i.length,a.length),m=f/(t!=null?t.length:1),_=[];for(let E=0;E<f;++E){const T=t?this.Nn(t[E/m]):eh,w=this.Bn(e,T,i[E%m],s),N=this.Ln(e,T,a[E%m],u),k=d.map((V=>this.Bn(e,T,V,!0)));_.push(...this.createRange(w,N,k))}return _}Bn(e,t,i,s){const a=new ra(e,he.empty(),t,i);return s?a:a.En()}Ln(e,t,i,s){const a=new ra(e,he.empty(),t,i);return s?a.En():a}Fn(e,t){const i=new Nx(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let u=null;for(const d of a)i.gn(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u}))}getIndexType(e,t){let i=2;const s=this.vn(t);return H.forEach(s,(a=>this.Fn(e,a).next((u=>{u?i!==0&&u.fields.length<(function(f){let m=new dt(Rt.comparator),_=!1;for(const E of f.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?_=!0:m=m.add(T.field));for(const E of f.orderBy)E.field.isKeyField()||(m=m.add(E.field));return m.size+(_?1:0)})(a)&&(i=1):i=0})))).next((()=>(function(u){return u.limit!==null})(t)&&s.length>1&&i===2?1:i))}kn(e,t){const i=new Sc;for(const s of Zo(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const u=i.ln(s.kind);ia.Wt.Dt(a,u)}return i.un()}Nn(e){const t=new Sc;return ia.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const i=new Sc;return ia.Wt.Dt(da(this.databaseId,t),i.ln((function(a){const u=Zo(a);return u.length===0?0:u[u.length-1].kind})(e))),i.un()}xn(e,t,i){if(i===null)return[];let s=[];s.push(new Sc);let a=0;for(const u of Zo(e)){const d=i[a++];for(const f of s)if(this.qn(t,u.fieldPath)&&ed(d))s=this.Un(s,u,d);else{const m=f.ln(u.kind);ia.Wt.Dt(d,m)}}return this.$n(s)}Mn(e,t,i){return this.xn(e,t,i.position)}$n(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Un(e,t,i){const s=[...e],a=[];for(const u of i.arrayValue.values||[])for(const d of s){const f=new Sc;f.seed(d.un()),ia.Wt.Dt(u,f.ln(t.kind)),a.push(f)}return a}qn(e,t){return!!e.filters.find((i=>i instanceof Je&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Ac(e),s=Tl(e);return(t?i.H(ay,IDBKeyRange.bound(t,t)):i.H()).next((a=>{const u=[];return H.forEach(a,(d=>s.get([d.indexId,this.uid]).next((f=>{u.push((function(_,E){const T=E?new Yc(E.sequenceNumber,new di(ga(E.readTime),new he(vr(E.documentKey)),E.largestBatchId)):Yc.empty(),w=_.fields.map((([N,k])=>new ah(Rt.fromServerFormat(N),k)));return new Ih(_.indexId,_.collectionGroup,w,T)})(d,f))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,s)=>{const a=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:Me(i.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const s=Ac(e),a=Tl(e);return this.Wn(e).next((u=>s.H(ay,IDBKeyRange.bound(t,t)).next((d=>H.forEach(d,(f=>a.put(xx(f.indexId,this.uid,u,i))))))))}updateIndexEntries(e,t){const i=new Map;return H.forEach(t,((s,a)=>{const u=i.get(s.collectionGroup);return(u?H.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next((d=>(i.set(s.collectionGroup,d),H.forEach(d,(f=>this.Qn(e,s,f).next((m=>{const _=this.Gn(a,f);return m.isEqual(_)?H.resolve():this.zn(e,a,f,m,_)})))))))}))}jn(e,t,i,s){return El(e).put(s.Rn(this.uid,this.Kn(i,t.key),t.key))}Hn(e,t,i,s){return El(e).delete(s.An(this.uid,this.Kn(i,t.key),t.key))}Qn(e,t,i){const s=El(e);let a=new dt(zs);return s.ee({index:hI,range:IDBKeyRange.only([i.indexId,this.uid,ph(this.Kn(i,t))])},((u,d)=>{a=a.add(new ra(i.indexId,t,Rx(d.arrayValue),Rx(d.directionalValue)))})).next((()=>a))}Gn(e,t){let i=new dt(zs);const s=this.kn(t,e);if(s==null)return i;const a=sy(t);if(a!=null){const u=e.data.field(a.fieldPath);if(ed(u))for(const d of u.arrayValue.values||[])i=i.add(new ra(t.indexId,e.key,this.Nn(d),s))}else i=i.add(new ra(t.indexId,e.key,eh,s));return i}zn(e,t,i,s,a){ce(Mx,"Updating index entries for document '%s'",t.key);const u=[];return(function(f,m,_,E,T){const w=f.getIterator(),N=m.getIterator();let k=_l(w),V=_l(N);for(;k||V;){let $=!1,ne=!1;if(k&&V){const Q=_(k,V);Q<0?ne=!0:Q>0&&($=!0)}else k!=null?ne=!0:$=!0;$?(E(V),V=_l(N)):ne?(T(k),k=_l(w)):(k=_l(w),V=_l(N))}})(s,a,zs,(d=>{u.push(this.jn(e,t,i,d))}),(d=>{u.push(this.Hn(e,t,i,d))})),H.waitFor(u)}Wn(e){let t=1;return Tl(e).ee({index:fI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,a)=>{a.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((u,d)=>zs(u,d))).filter(((u,d,f)=>!d||zs(u,f[d-1])!==0));const s=[];s.push(e);for(const u of i){const d=zs(u,e),f=zs(u,t);if(d===0)s[0]=e.En();else if(d>0&&f<0)s.push(u),s.push(u.En());else if(f>0)break}s.push(t);const a=[];for(let u=0;u<s.length;u+=2){if(this.Jn(s[u],s[u+1]))return[];const d=s[u].An(this.uid,eh,he.empty()),f=s[u+1].An(this.uid,eh,he.empty());a.push(IDBKeyRange.bound(d,f))}return a}Jn(e,t){return zs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Vx)}getMinOffset(e,t){return H.mapArray(this.vn(t),(i=>this.Fn(e,i).next((s=>s||Ee(44426))))).next(Vx)}}function Px(n){return rn(n,Xc)}function El(n){return rn(n,Oc)}function Ac(n){return rn(n,l0)}function Tl(n){return rn(n,Lc)}function Vx(n){Ae(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;s0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new di(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vC=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(n,e,t){const i=n.store(ji),s=n.store(Kl),a=[],u=IDBKeyRange.only(t.batchId);let d=0;const f=i.ee({range:u},((_,E,T)=>(d++,T.delete())));a.push(f.next((()=>{Ae(d===1,47070,{batchId:t.batchId})})));const m=[];for(const _ of t.mutations){const E=uI(e,_.key.path,t.batchId);a.push(s.delete(E)),m.push(_.key)}return H.waitFor(a).next((()=>m))}function Uh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ee(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(vC,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);class lm{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Zn={}}static wt(e,t,i,s){Ae(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new lm(a,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hs(e).ee({index:oa,range:i},((s,a,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,i,s){const a=Cl(e),u=Hs(e);return u.add({}).next((d=>{Ae(typeof d=="number",49019);const f=new _0(d,t,i,s),m=(function(w,N,k){const V=k.baseMutations.map((ne=>id(w.yt,ne))),$=k.mutations.map((ne=>id(w.yt,ne)));return{userId:N,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:V,mutations:$}})(this.serializer,this.userId,f),_=[];let E=new dt(((T,w)=>Me(T.canonicalString(),w.canonicalString())));for(const T of s){const w=uI(this.userId,T.key.path,d);E=E.add(T.key.path.popLast()),_.push(u.put(m)),_.push(a.put(w,m5))}return E.forEach((T=>{_.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Zn[d]=f.keys()})),H.waitFor(_).next((()=>f))}))}lookupMutationBatch(e,t){return Hs(e).get(t).next((i=>i?(Ae(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),na(this.serializer,i)):null))}Xn(e,t){return this.Zn[t]?H.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const s=i.keys();return this.Zn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let a=null;return Hs(e).ee({index:oa,range:s},((u,d,f)=>{d.userId===this.userId&&(Ae(d.batchId>=i,47524,{Yn:i}),a=na(this.serializer,d)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Zs;return Hs(e).ee({index:oa,range:t,reverse:!0},((s,a,u)=>{i=a.batchId,u.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Zs],[this.userId,Number.POSITIVE_INFINITY]);return Hs(e).H(oa,t).next((i=>i.map((s=>na(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=lh(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=[];return Cl(e).ee({range:s},((u,d,f)=>{const[m,_,E]=u,T=vr(_);if(m===this.userId&&t.path.isEqual(T))return Hs(e).get(E).next((w=>{if(!w)throw Ee(61480,{er:u,batchId:E});Ae(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:E}),a.push(na(this.serializer,w))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new dt(Me);const s=[];return t.forEach((a=>{const u=lh(this.userId,a.path),d=IDBKeyRange.lowerBound(u),f=Cl(e).ee({range:d},((m,_,E)=>{const[T,w,N]=m,k=vr(w);T===this.userId&&a.path.isEqual(k)?i=i.add(N):E.done()}));s.push(f)})),H.waitFor(s).next((()=>this.tr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,a=lh(this.userId,i),u=IDBKeyRange.lowerBound(a);let d=new dt(Me);return Cl(e).ee({range:u},((f,m,_)=>{const[E,T,w]=f,N=vr(T);E===this.userId&&i.isPrefixOf(N)?N.length===s&&(d=d.add(w)):_.done()})).next((()=>this.tr(e,d)))}tr(e,t){const i=[],s=[];return t.forEach((a=>{s.push(Hs(e).get(a).next((u=>{if(u===null)throw Ee(35274,{batchId:a});Ae(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:a}),i.push(na(this.serializer,u))})))})),H.waitFor(s).next((()=>i))}removeMutationBatch(e,t){return EC(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),H.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();const i=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),s=[];return Cl(e).ee({range:i},((a,u,d)=>{if(a[0]===this.userId){const f=vr(a[1]);s.push(f)}else d.done()})).next((()=>{Ae(s.length===0,56720,{rr:s.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return TC(e,this.userId,t)}ir(e){return SC(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Zs,lastStreamToken:""}))}}function TC(n,e,t){const i=lh(e,t.path),s=i[1],a=IDBKeyRange.lowerBound(i);let u=!1;return Cl(n).ee({range:a,Y:!0},((d,f,m)=>{const[_,E,T]=d;_===e&&E===s&&(u=!0),m.done()})).next((()=>u))}function Hs(n){return rn(n,ji)}function Cl(n){return rn(n,Kl)}function SC(n){return rn(n,jc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ya(0)}static ar(){return new ya(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const i=new ya(t.highestTargetId);return t.highestTargetId=i.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ie.fromTimestamp(new ot(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.ur(e).next((s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.cr(e,s))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((i=>(i.targetCount+=1,this.hr(t,i),this.cr(e,i))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Sl(e).delete(t.targetId))).next((()=>this.ur(e))).next((i=>(Ae(i.targetCount>0,8065),i.targetCount-=1,this.cr(e,i))))}removeTargets(e,t,i){let s=0;const a=[];return Sl(e).ee(((u,d)=>{const f=Dc(d);f.sequenceNumber<=t&&i.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))})).next((()=>H.waitFor(a))).next((()=>s))}forEachTarget(e,t){return Sl(e).ee(((i,s)=>{const a=Dc(s);t(a)}))}ur(e){return Ux(e).get(Nh).next((t=>(Ae(t!==null,2888),t)))}cr(e,t){return Ux(e).put(Nh,t)}lr(e,t){return Sl(e).put(gC(this.serializer,t))}hr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const i=fa(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let a=null;return Sl(e).ee({range:s,index:dI},((u,d,f)=>{const m=Dc(d);fd(t,m.target)&&(a=m,f.done())})).next((()=>a))}addMatchingKeys(e,t,i){const s=[],a=Ys(e);return t.forEach((u=>{const d=wn(u.path);s.push(a.put({targetId:i,path:d})),s.push(this.referenceDelegate.addReference(e,i,u))})),H.waitFor(s)}removeMatchingKeys(e,t,i){const s=Ys(e);return H.forEach(t,(a=>{const u=wn(a.path);return H.waitFor([s.delete([i,u]),this.referenceDelegate.removeReference(e,i,a)])}))}removeMatchingKeysForTargetId(e,t){const i=Ys(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ys(e);let a=Oe();return s.ee({range:i,Y:!0},((u,d,f)=>{const m=vr(u[1]),_=new he(m);a=a.add(_)})).next((()=>a))}containsKey(e,t){const i=wn(t.path),s=IDBKeyRange.bound([i],[Zw(i)],!1,!0);let a=0;return Ys(e).ee({index:a0,Y:!0,range:s},(([u,d],f,m)=>{u!==0&&(a++,m.done())})).next((()=>a>0))}At(e,t){return Sl(e).get(t).next((i=>i?Dc(i):null))}}function Sl(n){return rn(n,$l)}function Ux(n){return rn(n,ua)}function Ys(n){return rn(n,Yl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="LruGarbageCollector",B3=1048576;function Ox([n,e],[t,i]){const s=Me(n,t);return s===0?Me(e,i):s}class G3{constructor(e){this.Pr=e,this.buffer=new dt(Ox),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Ox(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ce(Lx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ho(t)?ce(Lx,"Ignoring IndexedDB error during garbage collection: ",t):await fo(t)}await this.Ar(3e5)}))}}class z3{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(Kn.ce);const i=new G3(t);return this.Vr.forEachTarget(e,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(kx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kx):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,s,a,u,d,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(m=Date.now(),xl()<=Qe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${E} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function xC(n,e){return new z3(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,t){this.db=e,this.garbageCollector=xC(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((i,s)=>t(s)))}addReference(e,t,i){return th(e,i)}removeReference(e,t,i){return th(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return th(e,t)}wr(e,t){return(function(s,a){let u=!1;return SC(s).te((d=>TC(s,d,a).next((f=>(f&&(u=!0),H.resolve(!f)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.yr(e,((u,d)=>{if(d<=t){const f=this.wr(e,u).next((m=>{if(!m)return a++,i.getEntry(e,u).next((()=>(i.removeEntry(u,Ie.min()),Ys(e).delete((function(E){return[0,wn(E.path)]})(u)))))}));s.push(f)}})).next((()=>H.waitFor(s))).next((()=>i.apply(e))).next((()=>a))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return th(e,t)}yr(e,t){const i=Ys(e);let s,a=Kn.ce;return i.ee({index:a0},(([u,d],{path:f,sequenceNumber:m})=>{u===0?(a!==Kn.ce&&t(new he(vr(s)),a),a=m,s=f):a=Kn.ce})).next((()=>{a!==Kn.ce&&t(new he(vr(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function th(n,e){return Ys(n).put((function(i,s){return{targetId:0,path:wn(i.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.changes=new ss((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?H.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return jo(e).put(i)}removeEntry(e,t,i){return jo(e).delete((function(a,u){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Vh(u),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.br(e,i))))}getEntry(e,t){let i=xt.newInvalidDocument(t);return jo(e).ee({index:uh,range:IDBKeyRange.only(xc(t))},((s,a)=>{i=this.Sr(t,a)})).next((()=>i))}Dr(e,t){let i={size:0,document:xt.newInvalidDocument(t)};return jo(e).ee({index:uh,range:IDBKeyRange.only(xc(t))},((s,a)=>{i={document:this.Sr(t,a),size:Uh(a)}})).next((()=>i))}getEntries(e,t){let i=Yn();return this.Cr(e,t,((s,a)=>{const u=this.Sr(s,a);i=i.insert(s,u)})).next((()=>i))}vr(e,t){let i=Yn(),s=new Tt(he.comparator);return this.Cr(e,t,((a,u)=>{const d=this.Sr(a,u);i=i.insert(a,d),s=s.insert(a,Uh(u))})).next((()=>({documents:i,Fr:s})))}Cr(e,t,i){if(t.isEmpty())return H.resolve();let s=new dt(Bx);t.forEach((f=>s=s.add(f)));const a=IDBKeyRange.bound(xc(s.first()),xc(s.last())),u=s.getIterator();let d=u.getNext();return jo(e).ee({index:uh,range:a},((f,m,_)=>{const E=he.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&Bx(d,E)<0;)i(d,null),d=u.getNext();d&&d.isEqual(E)&&(i(d,m),d=u.hasNext()?u.getNext():null),d?_.j(xc(d)):_.done()})).next((()=>{for(;d;)i(d,null),d=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,i,s,a){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),Vh(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jo(e).H(IDBKeyRange.bound(d,f,!0)).next((m=>{a==null||a.incrementDocumentReadCount(m.length);let _=Yn();for(const E of m){const T=this.Sr(he.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(md(t,T)||s.has(T.key))&&(_=_.insert(T.key,T))}return _}))}getAllFromCollectionGroup(e,t,i,s){let a=Yn();const u=qx(t,i),d=qx(t,di.max());return jo(e).ee({index:cI,range:IDBKeyRange.bound(u,d,!0)},((f,m,_)=>{const E=this.Sr(he.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(E.key,E),a.size===s&&_.done()})).next((()=>a))}newChangeBuffer(e){return new $3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Fx(e).get(oy).next((t=>(Ae(!!t,20021),t)))}br(e,t){return Fx(e).put(oy,t)}Sr(e,t){if(t){const i=N3(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ie.min())))return i}return xt.newInvalidDocument(e)}}function wC(n){return new K3(n)}class $3 extends bC{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new ss((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const t=[];let i=0,s=new dt(((a,u)=>Me(a.canonicalString(),u.canonicalString())));return this.changes.forEach(((a,u)=>{const d=this.Or.get(a);if(t.push(this.Mr.removeEntry(e,a,d.readTime)),u.isValidDocument()){const f=Sx(this.Mr.serializer,u);s=s.add(a.path.popLast());const m=Uh(f);i+=m-d.size,t.push(this.Mr.addEntry(e,a,f))}else if(i-=d.size,this.trackRemovals){const f=Sx(this.Mr.serializer,u.convertToNoDocument(Ie.min()));t.push(this.Mr.addEntry(e,a,f))}})),s.forEach((a=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Mr.updateMetadata(e,i)),H.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((i=>(this.Or.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:i,Fr:s})=>(s.forEach(((a,u)=>{this.Or.set(a,{size:u,readTime:i.get(a).readTime})})),i)))}}function Fx(n){return rn(n,Qc)}function jo(n){return rn(n,Rh)}function xc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qx(n,e){const t=e.documentKey.path.toArray();return[n,Vh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Bx(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<i.length-2;++a)if(s=Me(t[a],i[a]),s)return s;return s=Me(t.length,i.length),s||(s=Me(t[t.length-2],i[i.length-2]),s||Me(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&Bc(i.mutation,s,$n.empty(),ot.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Oe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Oe()){const s=Er();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((a=>{let u=Rc();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Er();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Oe())))}populateOverlays(e,t,i){const s=[];return i.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,s){let a=Yn();const u=qc(),d=(function(){return qc()})();return t.forEach(((f,m)=>{const _=i.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof os)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),Bc(_.mutation,m,_.mutation.getFieldMask(),ot.now())):u.set(m.key,$n.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>d.set(m,new Y3(_,u.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=qc();let s=new Tt(((u,d)=>u-d)),a=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=i.get(f)||$n.empty();_=d.applyToLocalView(m,_),i.set(f,_);const E=(s.get(d.batchId)||Oe()).add(f);s=s.insert(d.batchId,E)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,_=f.value,E=GI();_.forEach((T=>{if(!a.has(T)){const w=jI(t.get(T),i.get(T));w!==null&&E.set(T,w),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return H.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return W5(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):m0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-a.size):H.resolve(Er());let d=Hl,f=a;return u.next((m=>H.forEach(m,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?H.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{f=f.insert(_,T)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Oe()))).next((_=>({batchId:d,changes:BI(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next((i=>{let s=Rc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const a=t.collectionGroup;let u=Rc();return this.indexManager.getCollectionParents(e,a).next((d=>H.forEach(d,(f=>{const m=(function(E,T){return new rs(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next((_=>{_.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,s)))).next((u=>{a.forEach(((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,xt.newInvalidDocument(_)))}));let d=Rc();return u.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&Bc(_.mutation,m,$n.empty(),ot.now()),md(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return H.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:zt(s.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:A0(s.bundledQuery),readTime:zt(s.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(){this.overlays=new Tt(he.comparator),this.Lr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Er();return H.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,a)=>{this.bt(e,t,a)})),H.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),H.resolve()}getOverlaysForCollection(e,t,i){const s=Er(),a=t.length+1,u=new he(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>i&&s.set(f.getKey(),f)}return H.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let a=new Tt(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let _=a.get(m.largestBatchId);_===null&&(_=Er(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=Er(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=s)););return H.resolve(d)}bt(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const u=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new E0(t,i));let a=this.Lr.get(t);a===void 0&&(a=Oe(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this.kr=new dt(ln.Kr),this.qr=new dt(ln.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new ln(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new ln(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new he(new He([])),i=new ln(t,e),s=new ln(t,e+1),a=[];return this.qr.forEachInRange([i,s],(u=>{this.Wr(u),a.push(u.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new he(new He([])),i=new ln(t,e),s=new ln(t,e+1);let a=Oe();return this.qr.forEachInRange([i,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new ln(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class ln{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return he.comparator(e.key,t.key)||Me(e.Hr,t.Hr)}static Ur(e,t){return Me(e.Hr,t.Hr)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new dt(ln.Kr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new _0(a,t,i,s);this.mutationQueue.push(u);for(const d of s)this.Jr=this.Jr.add(new ln(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return H.resolve(u)}lookupMutationBatch(e,t){return H.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.Xr(i),a=s<0?0:s;return H.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Zs:this.Yn-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new ln(t,0),s=new ln(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,s],(u=>{const d=this.Zr(u.Hr);a.push(d)})),H.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new dt(Me);return t.forEach((s=>{const a=new ln(s,0),u=new ln(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),H.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let a=i;he.isDocumentKey(a)||(a=a.child(""));const u=new ln(new he(a),0);let d=new dt(Me);return this.Jr.forEachWhile((f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.Hr)),!0)}),u),H.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const s=this.Zr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ae(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return H.forEach(t.mutations,(s=>{const a=new ln(s.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new ln(t,0),s=this.Jr.firstAfterOrEqual(i);return H.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.ti=e,this.docs=(function(){return new Tt(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),a=s?s.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return H.resolve(i?i.document.mutableCopy():xt.newInvalidDocument(t))}getEntries(e,t){let i=Yn();return t.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():xt.newInvalidDocument(s))})),H.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let a=Yn();const u=t.path,d=new he(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||s0(rI(_),i)<=0||(s.has(_.key)||md(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return H.resolve(a)}getAllFromCollectionGroup(e,t,i,s){Ee(9500)}ni(e,t){return H.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Z3(this)}getSize(e){return H.resolve(this.size)}}class Z3 extends bC{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)})),H.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.persistence=e,this.ri=new ss((t=>fa(t)),fd),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new w0,this.targetCount=0,this.oi=ya._r()}forEachTarget(e,t){return this.ri.forEach(((i,s)=>t(s))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),H.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ya(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.lr(t),H.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,i){let s=0;const a=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),H.waitFor(a).next((()=>s))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return H.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),H.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),H.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return H.resolve(i)}containsKey(e,t){return H.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t){this._i={},this.overlays={},this.ai=new Kn(0),this.ui=!1,this.ui=!0,this.ci=new Q3,this.referenceDelegate=e(this),this.li=new eO(this),this.indexManager=new O3,this.remoteDocumentCache=(function(s){return new W3(s)})((i=>this.referenceDelegate.hi(i))),this.serializer=new pC(t),this.Pi=new J3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new j3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new X3(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const s=new tO(this.ai.next());return this.referenceDelegate.Ti(),i(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return H.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class tO extends oI{constructor(e){super(),this.currentSequenceNumber=e}}class um{constructor(e){this.persistence=e,this.Ri=new w0,this.Ai=null}static Vi(e){return new um(e)}get di(){if(this.Ai)return this.Ai;throw Ee(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),H.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.di,(i=>{const s=he.fromPath(i);return this.mi(e,s).next((a=>{a||t.removeEntry(s,Ie.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Lh{constructor(e,t){this.persistence=e,this.fi=new ss((i=>wn(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=xC(this,t)}static Vi(e,t){return new Lh(e,t)}Ti(){}Ii(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return H.forEach(this.fi,((i,s)=>this.wr(e,i,s).next((a=>a?H.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,(u=>this.wr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Ie.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),H.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dh(e.data.value)),t}wr(e,t,i){return H.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return H.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.serializer=e}k(e,t,i,s){const a=new Wh("createOrUpgrade",t);i<1&&s>=1&&((function(f){f.createObjectStore(dd)})(e),(function(f){f.createObjectStore(jc,{keyPath:h5}),f.createObjectStore(ji,{keyPath:WA,autoIncrement:!0}).createIndex(oa,ZA,{unique:!0}),f.createObjectStore(Kl)})(e),Gx(e),(function(f){f.createObjectStore(ea)})(e));let u=H.resolve();return i<3&&s>=3&&(i!==0&&((function(f){f.deleteObjectStore(Yl),f.deleteObjectStore($l),f.deleteObjectStore(ua)})(e),Gx(e)),u=u.next((()=>(function(f){const m=f.store(ua),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ie.min().toTimestamp(),targetCount:0};return m.put(Nh,_)})(a)))),i<4&&s>=4&&(i!==0&&(u=u.next((()=>(function(f,m){return m.store(ji).H().next((E=>{f.deleteObjectStore(ji),f.createObjectStore(ji,{keyPath:WA,autoIncrement:!0}).createIndex(oa,ZA,{unique:!0});const T=m.store(ji),w=E.map((N=>T.put(N)));return H.waitFor(w)}))})(e,a)))),u=u.next((()=>{(function(f){f.createObjectStore(Jl,{keyPath:S5})})(e)}))),i<5&&s>=5&&(u=u.next((()=>this.gi(a)))),i<6&&s>=6&&(u=u.next((()=>((function(f){f.createObjectStore(Qc)})(e),this.pi(a))))),i<7&&s>=7&&(u=u.next((()=>this.yi(a)))),i<8&&s>=8&&(u=u.next((()=>this.wi(e,a)))),i<9&&s>=9&&(u=u.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(u=u.next((()=>this.bi(a)))),i<11&&s>=11&&(u=u.next((()=>{(function(f){f.createObjectStore(Zh,{keyPath:A5})})(e),(function(f){f.createObjectStore(em,{keyPath:x5})})(e)}))),i<12&&s>=12&&(u=u.next((()=>{(function(f){const m=f.createObjectStore(tm,{keyPath:D5});m.createIndex(ly,M5,{unique:!1}),m.createIndex(mI,P5,{unique:!1})})(e)}))),i<13&&s>=13&&(u=u.next((()=>(function(f){const m=f.createObjectStore(Rh,{keyPath:p5});m.createIndex(uh,g5),m.createIndex(cI,y5)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(ea)))),i<14&&s>=14&&(u=u.next((()=>this.Di(e,a)))),i<15&&s>=15&&(u=u.next((()=>(function(f){f.createObjectStore(l0,{keyPath:b5,autoIncrement:!0}).createIndex(ay,w5,{unique:!1}),f.createObjectStore(Lc,{keyPath:I5}).createIndex(fI,C5,{unique:!1}),f.createObjectStore(Oc,{keyPath:R5}).createIndex(hI,N5,{unique:!1})})(e)))),i<16&&s>=16&&(u=u.next((()=>{t.objectStore(Lc).clear()})).next((()=>{t.objectStore(Oc).clear()}))),i<17&&s>=17&&(u=u.next((()=>{(function(f){f.createObjectStore(u0,{keyPath:V5})})(e)}))),i<18&&s>=18&&Rw()&&(u=u.next((()=>{t.objectStore(Lc).clear()})).next((()=>{t.objectStore(Oc).clear()}))),u}pi(e){let t=0;return e.store(ea).ee(((i,s)=>{t+=Uh(s)})).next((()=>{const i={byteSize:t};return e.store(Qc).put(oy,i)}))}gi(e){const t=e.store(jc),i=e.store(ji);return t.H().next((s=>H.forEach(s,(a=>{const u=IDBKeyRange.bound([a.userId,Zs],[a.userId,a.lastAcknowledgedBatchId]);return i.H(oa,u).next((d=>H.forEach(d,(f=>{Ae(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const m=na(this.serializer,f);return EC(e,a.userId,m).next((()=>{}))}))))}))))}yi(e){const t=e.store(Yl),i=e.store(ea);return e.store(ua).get(Nh).next((s=>{const a=[];return i.ee(((u,d)=>{const f=new He(u),m=(function(E){return[0,wn(E)]})(f);a.push(t.get(m).next((_=>_?H.resolve():(E=>t.put({targetId:0,path:wn(E),sequenceNumber:s.highestListenSequenceNumber}))(f))))})).next((()=>H.waitFor(a)))}))}wi(e,t){e.createObjectStore(Xc,{keyPath:T5});const i=t.store(Xc),s=new b0,a=u=>{if(s.add(u)){const d=u.lastSegment(),f=u.popLast();return i.put({collectionId:d,parent:wn(f)})}};return t.store(ea).ee({Y:!0},((u,d)=>{const f=new He(u);return a(f.popLast())})).next((()=>t.store(Kl).ee({Y:!0},(([u,d,f],m)=>{const _=vr(d);return a(_.popLast())}))))}bi(e){const t=e.store($l);return t.ee(((i,s)=>{const a=Dc(s),u=gC(this.serializer,a);return t.put(u)}))}Si(e,t){const i=t.store(ea),s=[];return i.ee(((a,u)=>{const d=t.store(Rh),f=(function(E){return E.document?new he(He.fromString(E.document.name).popFirst(5)):E.noDocument?he.fromSegments(E.noDocument.path):E.unknownDocument?he.fromSegments(E.unknownDocument.path):Ee(36783)})(u).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(d.put(m))})).next((()=>H.waitFor(s)))}Di(e,t){const i=t.store(ji),s=wC(this.serializer),a=new I0(um.Vi,this.serializer.yt);return i.H().next((u=>{const d=new Map;return u.forEach((f=>{let m=d.get(f.userId)??Oe();na(this.serializer,f).keys().forEach((_=>m=m.add(_))),d.set(f.userId,m)})),H.forEach(d,((f,m)=>{const _=new un(m),E=am.wt(this.serializer,_),T=a.getIndexManager(_),w=lm.wt(_,this.serializer,T,a.referenceDelegate);return new IC(s,w,E,T).recalculateAndSaveOverlaysForDocumentKeys(new uy(t,Kn.ce),f).next()}))}))}}function Gx(n){n.createObjectStore(Yl,{keyPath:v5}).createIndex(a0,E5,{unique:!0}),n.createObjectStore($l,{keyPath:"targetId"}).createIndex(dI,_5,{unique:!0}),n.createObjectStore(ua)}const Ks="IndexedDbPersistence",Dg=18e5,Mg=5e3,Pg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",CC="main";class C0{constructor(e,t,i,s,a,u,d,f,m,_,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ci=a,this.window=u,this.document=d,this.Fi=m,this.Mi=_,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=T=>Promise.resolve(),!C0.v())throw new le(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new H3(this,s),this.Ki=t+CC,this.serializer=new pC(f),this.qi=new Tr(this.Ki,this.xi,new nO(this.serializer)),this.ci=new M3,this.li=new q3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wC(this.serializer),this.Pi=new D3,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&Gt(Ks,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(W.FAILED_PRECONDITION,Pg);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Kn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>nh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(ho(e))return ce(Ks,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(Ks,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return bc(e).get(yl).next((t=>H.resolve(this.Xi(t))))}Yi(e){return nh(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Dg)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=rn(t,Jl);return i.H().next((s=>{const a=this.ns(s,Dg),u=s.filter((d=>a.indexOf(d)===-1));return H.forEach(u,(d=>i.delete(d.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?H.resolve(!0):bc(e).get(yl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Mg)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new le(W.FAILED_PRECONDITION,Pg);return!1}}return!(!this.networkEnabled||!this.inForeground)||nh(e).H().next((i=>this.ns(i,Mg).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,d=this.networkEnabled===s.networkEnabled;if(a||u&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(Ks,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[dd,Jl],(e=>{const t=new uy(e,Kn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((i=>this.ts(i.updateTimeMs,t)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>nh(e).H().next((t=>this.ns(t,Dg).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return lm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new F3(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return am.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,i){ce(Ks,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?L5:f===17?_I:f===16?U5:f===15?c0:f===14?yI:f===13?gI:f===12?k5:f===11?pI:void Ee(60245)})(this.xi);let u;return this.qi.runTransaction(e,s,a,(d=>(u=new uy(d,this.ai?this.ai.next():Kn.ce),t==="readwrite-primary"?this.ji(u).next((f=>!!f||this.Hi(u))).next((f=>{if(!f)throw Gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new le(W.FAILED_PRECONDITION,sI);return i(u)})).next((f=>this.Zi(u).next((()=>f)))):this.Ps(u).next((()=>i(u)))))).then((d=>(u.raiseOnCommittedEvent(),d)))}Ps(e){return bc(e).get(yl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Mg)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le(W.FAILED_PRECONDITION,Pg)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bc(e).put(yl,t)}static v(){return Tr.v()}Ji(e){const t=bc(e);return t.get(yl).next((i=>this.Xi(i)?(ce(Ks,"Releasing primary lease."),t.delete(yl)):H.resolve()))}ts(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Gt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;Cw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const i=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return ce(Ks,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Gt(Ks,"Failed to get zombied client id.",i),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Gt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bc(n){return rn(n,dd)}function nh(n){return rn(n,Jl)}function R0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=s}static Es(e,t){let i=Oe(),s=Oe();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new N0(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Cw()?8:aI(bh())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const a={result:null};return this.gs(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ps(e,t,s,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new iO;return this.ys(e,t,u).next((d=>{if(a.result=d,this.As)return this.ws(e,t,u,d.size)}))})).next((()=>a.result))}ws(e,t,i,s){return i.documentReadCount<this.Vs?(xl()<=Qe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",bl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),H.resolve()):(xl()<=Qe.DEBUG&&ce("QueryEngine","Query:",bl(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(xl()<=Qe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",bl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(t))):H.resolve())}gs(e,t){if(fx(t))return H.resolve(null);let i=Pn(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Ph(t,null,"F"),i=Pn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Oe(...a);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((f=>{const m=this.bs(t,d);return this.Ss(t,m,u,f.readTime)?this.gs(e,Ph(t,null,"F")):this.Ds(e,m,t,f)}))))})))))}ps(e,t,i,s){return fx(t)||s.isEqual(Ie.min())?H.resolve(null):this.fs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ss(t,u,i,s)?H.resolve(null):(xl()<=Qe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),bl(t)),this.Ds(e,u,t,iI(s,Hl)).next((d=>d)))}))}bs(e,t){let i=new dt(FI(e));return t.forEach(((s,a)=>{md(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,t,i){return xl()<=Qe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",bl(t)),this.fs.getDocumentsMatchingQuery(e,t,di.min(),i)}Ds(e,t,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="LocalStore",rO=3e8;class sO{constructor(e,t,i,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new Tt(Me),this.Fs=new ss((a=>fa(a)),fd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function NC(n,e,t,i){return new sO(n,e,t,i)}async function DC(n,e){const t=ye(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let f=Oe();for(const m of s){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){d.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(i,f).next((m=>({Ns:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function oO(n,e){const t=ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,_){const E=m.batch,T=E.keys();let w=H.resolve();return T.forEach((N=>{w=w.next((()=>_.getEntry(f,N))).next((k=>{const V=m.docVersions.get(N);Ae(V!==null,48541),k.version.compareTo(V)<0&&(E.applyToRemoteDocument(k,m),k.isValidDocument()&&(k.setReadTime(m.commitVersion),_.addEntry(k)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(f,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let f=Oe();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function MC(n){const e=ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function aO(n,e){const t=ye(n),i=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((_,E)=>{const T=s.get(E);if(!T)return;d.push(t.li.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(a,_.addedDocuments,E))));let w=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Ut.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,i)),s=s.insert(E,w),(function(k,V,$){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=rO?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(T,w,_)&&d.push(t.li.updateTargetData(a,w))}));let f=Yn(),m=Oe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(PC(a,u,e.documentUpdates).next((_=>{f=_.Bs,m=_.Ls}))),!i.isEqual(Ie.min())){const _=t.li.getLastRemoteSnapshotVersion(a).next((E=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return H.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.vs=s,a)))}function PC(n,e,t){let i=Oe(),s=Oe();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Yn();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(Ie.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ce(D0,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Bs:u,Ls:s}}))}function lO(n,e){const t=ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Zs),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function tu(n,e){const t=ye(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.li.getTargetData(i,e).next((a=>a?(s=a,H.resolve(s)):t.li.allocateTargetId(i).next((u=>(s=new Qr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function nu(n,e,t){const i=ye(n),s=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!ho(u))throw u;ce(D0,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function Oh(n,e,t){const i=ye(n);let s=Ie.min(),a=Oe();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,_){const E=ye(f),T=E.Fs.get(_);return T!==void 0?H.resolve(E.vs.get(T)):E.li.getTargetData(m,_)})(i,u,Pn(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?s:Ie.min(),t?a:Oe()))).next((d=>(UC(i,OI(e),d),{documents:d,ks:a})))))}function VC(n,e){const t=ye(n),i=ye(t.li),s=t.vs.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(a=>i.At(a,e).next((u=>u?u.target:null))))}function kC(n,e){const t=ye(n),i=t.Ms.get(e)||Ie.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.xs.getAllFromCollectionGroup(s,e,iI(i,Hl),Number.MAX_SAFE_INTEGER))).then((s=>(UC(t,e,s),s)))}function UC(n,e,t){let i=n.Ms.get(e)||Ie.min();t.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}async function uO(n,e,t,i){const s=ye(n);let a=Oe(),u=Yn();for(const m of t){const _=e.Ks(m.metadata.name);m.document&&(a=a.add(_));const E=e.qs(m);E.setReadTime(e.Us(m.metadata.readTime)),u=u.insert(_,E)}const d=s.xs.newChangeBuffer({trackRemovals:!0}),f=await tu(s,(function(_){return Pn(fu(He.fromString(`__bundle__/docs/${_}`)))})(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(m=>PC(m,d,u).next((_=>(d.apply(m),_))).next((_=>s.li.removeMatchingKeysForTargetId(m,f.targetId).next((()=>s.li.addMatchingKeys(m,a,f.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(m,_.Bs,_.Ls))).next((()=>_.Bs))))))}async function cO(n,e,t=Oe()){const i=await tu(n,Pn(A0(e.bundledQuery))),s=ye(n);return s.persistence.runTransaction("Save named query","readwrite",(a=>{const u=zt(e.readTime);if(i.snapshotVersion.compareTo(u)>=0)return s.Pi.saveNamedQuery(a,e);const d=i.withResumeToken(Ut.EMPTY_BYTE_STRING,u);return s.vs=s.vs.insert(d.targetId,d),s.li.updateTargetData(a,d).next((()=>s.li.removeMatchingKeysForTargetId(a,i.targetId))).next((()=>s.li.addMatchingKeys(a,t,i.targetId))).next((()=>s.Pi.saveNamedQuery(a,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="firestore_clients";function zx(n,e){return`${LC}_${n}_${e}`}const OC="firestore_mutations";function Hx(n,e,t){let i=`${OC}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const FC="firestore_targets";function Vg(n,e){return`${FC}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="SharedClientState";class Fh{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static $s(e,t,i){const s=JSON.parse(i);let a,u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(a=new le(s.error.code,s.error.message))),u?new Fh(e,t,s.state,a):(Gt(_r,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gc{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static $s(e,t){const i=JSON.parse(t);let s,a=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new le(i.error.code,i.error.message))),a?new Gc(e,i.state,s):(Gt(_r,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const i=JSON.parse(t);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,a=p0();for(let u=0;s&&u<i.activeTargetIds.length;++u)s=lI(i.activeTargetIds[u]),a=a.add(i.activeTargetIds[u]);return s?new qh(e,a):(Gt(_r,`Failed to parse client data for instance '${e}': ${t}`),null)}}class M0{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new M0(t.clientId,t.onlineState):(Gt(_r,`Failed to parse online state: ${e}`),null)}}class xy{constructor(){this.activeTargetIds=p0()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kg{constructor(e,t,i,s,a){this.window=e,this.Ci=t,this.persistenceKey=i,this.zs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Tt(Me),this.started=!1,this.Zs=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=zx(this.persistenceKey,this.zs),this.Ys=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new xy),this.eo=new RegExp(`^${LC}_${u}_([^_]*)$`),this.no=new RegExp(`^${OC}_${u}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${FC}_${u}_(\\d+)$`),this.io=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this.so=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const i of e){if(i===this.zs)continue;const s=this.getItem(zx(this.persistenceKey,i));if(s){const a=qh.$s(i,s);a&&(this.Js=this.Js.insert(a.clientId,a))}}this.oo();const t=this.storage.getItem(this.io);if(t){const i=this._o(t);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,i){this.co(e,t,i),this.lo(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Vg(this.persistenceKey,e));if(s){const a=Gc.$s(e,s);a&&(i=a.state)}}return t&&this.ho.Qs(e),this.oo(),i}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vg(this.persistenceKey,e))}updateQueryState(e,t,i){this.Po(e,t,i)}handleUserChange(e,t,i){t.forEach((s=>{this.lo(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(_r,"READ",e,t),t}setItem(e,t){ce(_r,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(_r,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ce(_r,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const i=this.Eo(t.key);return this.Ro(i,null)}{const i=this.Ao(t.key,t.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(t.key)){if(t.newValue!==null){const i=this.Vo(t.key,t.newValue);if(i)return this.mo(i)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(t.key===this.io){if(t.newValue!==null){const i=this._o(t.newValue);if(i)return this.ao(i)}}else if(t.key===this.Ys){const i=(function(a){let u=Kn.ce;if(a!=null)try{const d=JSON.parse(a);Ae(typeof d=="number",30636,{yo:a}),u=d}catch(d){Gt(_r,"Failed to read sequence number from WebStorage",d)}return u})(t.newValue);i!==Kn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this.so){const i=this.wo(t.newValue);await Promise.all(i.map((s=>this.syncEngine.bo(s))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,i){const s=new Fh(this.currentUser,e,t,i),a=Hx(this.persistenceKey,this.currentUser,e);this.setItem(a,s.Ws())}lo(e){const t=Hx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,i){const s=Vg(this.persistenceKey,e),a=new Gc(e,t,i);this.setItem(s,a.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const i=this.Eo(e);return qh.$s(i,t)}Vo(e,t){const i=this.no.exec(e),s=Number(i[1]),a=i[2]!==void 0?i[2]:null;return Fh.$s(new un(a),s,t)}fo(e,t){const i=this.ro.exec(e),s=Number(i[1]);return Gc.$s(s,t)}_o(e){return M0.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);ce(_r,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const i=t?this.Js.insert(e,t):this.Js.remove(e),s=this.uo(this.Js),a=this.uo(i),u=[],d=[];return a.forEach((f=>{s.has(f)||u.push(f)})),s.forEach((f=>{a.has(f)||d.push(f)})),this.syncEngine.Co(u,d).then((()=>{this.Js=i}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=p0();return e.forEach(((i,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class qC{constructor(){this.vo=new xy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new xy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="ConnectivityMonitor";class $x{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ce(Kx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ce(Kx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih=null;function by(){return ih===null?ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():ih++,"0x"+ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="RestConnection",fO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class hO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===cy?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,t,i,s,a){const u=by(),d=this.Qo(e,t.toUriEncodedString());ce(Ug,`Sending RPC '${e}' ${u}:`,d,i);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,s,a);const{host:m}=new URL(d),_=Yy(m);return this.zo(e,d,f,i,_).then((E=>(ce(Ug,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw nr(Ug,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",i),E}))}jo(e,t,i,s,a,u){return this.Wo(e,t,i,s,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+du})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}Qo(e,t){const i=fO[e];let s=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection",wc=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Ul extends hO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ul.c_){const e=jw();wc(e,Jw.STAT_EVENT,(t=>{t.stat===iy.PROXY?ce(Sn,"STAT_EVENT: detected buffering proxy"):t.stat===iy.NOPROXY&&ce(Sn,"STAT_EVENT: detected no buffering proxy")})),Ul.c_=!0}}zo(e,t,i,s,a){const u=by();return new Promise(((d,f)=>{const m=new $w;m.setWithCredentials(!0),m.listenOnce(Yw.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case oh.NO_ERROR:const E=m.getResponseJson();ce(Sn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case oh.TIMEOUT:ce(Sn,`RPC '${e}' ${u} timed out`),f(new le(W.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const T=m.getStatus();if(ce(Sn,`RPC '${e}' ${u} failed with status:`,T,"response text:",m.getResponseText()),T>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w==null?void 0:w.error;if(N&&N.status&&N.message){const k=(function($){const ne=$.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ne)>=0?ne:W.UNKNOWN})(N.status);f(new le(k,N.message))}else f(new le(W.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new le(W.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ce(Sn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(s);ce(Sn,`RPC '${e}' ${u} sending request:`,s),m.send(t,"POST",_,i,15)}))}T_(e,t,i){const s=by(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const m=a.join("");ce(Sn,`Creating RPC '${e}' stream ${s}: ${m}`,d);const _=u.createWebChannel(m,d);this.I_(_);let E=!1,T=!1;const w=new mO({Ho:N=>{T?ce(Sn,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(E||(ce(Sn,`Opening RPC '${e}' stream ${s} transport.`),_.open(),E=!0),ce(Sn,`RPC '${e}' stream ${s} sending:`,N),_.send(N))},Jo:()=>_.close()});return wc(_,Cc.EventType.OPEN,(()=>{T||(ce(Sn,`RPC '${e}' stream ${s} transport opened.`),w.i_())})),wc(_,Cc.EventType.CLOSE,(()=>{T||(T=!0,ce(Sn,`RPC '${e}' stream ${s} transport closed`),w.o_(),this.E_(_))})),wc(_,Cc.EventType.ERROR,(N=>{T||(T=!0,nr(Sn,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),w.o_(new le(W.UNAVAILABLE,"The operation could not be completed")))})),wc(_,Cc.EventType.MESSAGE,(N=>{var k;if(!T){const V=N.data[0];Ae(!!V,16349);const $=V,ne=($==null?void 0:$.error)||((k=$[0])==null?void 0:k.error);if(ne){ce(Sn,`RPC '${e}' stream ${s} received error:`,ne);const Q=ne.status;let se=(function(R){const D=Wt[R];if(D!==void 0)return WI(D)})(Q),z=ne.message;Q==="NOT_FOUND"&&z.includes("database")&&z.includes("does not exist")&&z.includes(this.databaseId.database)&&nr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),se===void 0&&(se=W.INTERNAL,z="Unknown error status: "+Q+" with message "+ne.message),T=!0,w.o_(new le(se,z)),_.close()}else ce(Sn,`RPC '${e}' stream ${s} received:`,V),w.__(V)}})),Ul.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Qw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(n){return new Ul(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){return typeof window<"u"?window:null}function gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(n){return new E3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ul.c_=!1;class P0{constructor(e,t,i=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="PersistentStream";class GC{constructor(e,t,i,s,a,u,d,f){this.Ci=e,this.b_=i,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new P0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Gt(t.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new le(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Yx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ce(Yx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gO extends GC{constructor(e,t,i,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=A3(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ie.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ie.min():u.readTime?zt(u.readTime):Ie.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=vy(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=Dh(f)?{documents:lC(a,f)}:{query:uC(a,f).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=nC(a,u.resumeToken);const m=yy(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ie.min())>0){d.readTime=eu(a,u.snapshotVersion.toTimestamp());const m=yy(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const i=b3(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=vy(this.serializer),t.removeTarget=e,this.K_(t)}}class yO extends GC{constructor(e,t,i,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,u),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=x3(e.writeResults,e.commitTime),i=zt(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=vy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>id(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{}class vO extends _O{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,_y(t,i),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(W.UNKNOWN,a.toString())}))}jo(e,t,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,_y(t,i),s,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(W.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function EO(n,e,t,i){return new vO(n,e,t,i)}class TO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gt(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="RemoteStore";class SO{constructor(e,t,i,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{po(this)&&(ce(_a,"Restarting streams for network reachability change."),await(async function(f){const m=ye(f);m.Ea.add(4),await pu(m),m.Va.set("Unknown"),m.Ea.delete(4),await vd(m)})(this))}))})),this.Va=new TO(i,s)}}async function vd(n){if(po(n))for(const e of n.Ra)await e(!0)}async function pu(n){for(const e of n.Ra)await e(!1)}function cm(n,e){const t=ye(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),U0(t)?k0(t):yu(t).O_()&&V0(t,e))}function iu(n,e){const t=ye(n),i=yu(t);t.Ia.delete(e),i.O_()&&zC(t,e),t.Ia.size===0&&(i.O_()?i.L_():po(t)&&t.Va.set("Unknown"))}function V0(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yu(n).Z_(e)}function zC(n,e){n.da.$e(e),yu(n).X_(e)}function k0(n){n.da=new g3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),yu(n).start(),n.Va.ua()}function U0(n){return po(n)&&!yu(n).x_()&&n.Ia.size>0}function po(n){return ye(n).Ea.size===0}function HC(n){n.da=void 0}async function AO(n){n.Va.set("Online")}async function xO(n){n.Ia.forEach(((e,t)=>{V0(n,e)}))}async function bO(n,e){HC(n),U0(n)?(n.Va.ha(e),k0(n)):n.Va.set("Unknown")}async function wO(n,e,t){if(n.Va.set("Online"),e instanceof tC&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const d of a.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(i){ce(_a,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Bh(n,i)}else if(e instanceof mh?n.da.Xe(e):e instanceof eC?n.da.st(e):n.da.tt(e),!t.isEqual(Ie.min()))try{const i=await MC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.da.Tt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Ia.get(m);_&&a.Ia.set(m,_.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const _=a.Ia.get(f);if(!_)return;a.Ia.set(f,_.withResumeToken(Ut.EMPTY_BYTE_STRING,_.snapshotVersion)),zC(a,f);const E=new Qr(_.target,f,m,_.sequenceNumber);V0(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ce(_a,"Failed to raise snapshot:",i),await Bh(n,i)}}async function Bh(n,e,t){if(!ho(e))throw e;n.Ea.add(1),await pu(n),n.Va.set("Offline"),t||(t=()=>MC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce(_a,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await vd(n)}))}function KC(n,e){return e().catch((t=>Bh(n,t,e)))}async function gu(n){const e=ye(n),t=lo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zs;for(;IO(e);)try{const s=await lO(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,CO(e,s)}catch(s){await Bh(e,s)}$C(e)&&YC(e)}function IO(n){return po(n)&&n.Ta.length<10}function CO(n,e){n.Ta.push(e);const t=lo(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function $C(n){return po(n)&&!lo(n).x_()&&n.Ta.length>0}function YC(n){lo(n).start()}async function RO(n){lo(n).ra()}async function NO(n){const e=lo(n);for(const t of n.Ta)e.ea(t.mutations)}async function DO(n,e,t){const i=n.Ta.shift(),s=v0.from(i,e,t);await KC(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await gu(n)}async function MO(n,e){e&&lo(n).Y_&&await(async function(i,s){if((function(u){return XI(u)&&u!==W.ABORTED})(s.code)){const a=i.Ta.shift();lo(i).B_(),await KC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await gu(i)}})(n,e),$C(n)&&YC(n)}async function Jx(n,e){const t=ye(n);t.asyncQueue.verifyOperationInProgress(),ce(_a,"RemoteStore received new credentials");const i=po(t);t.Ea.add(3),await pu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await vd(t)}async function wy(n,e){const t=ye(n);e?(t.Ea.delete(2),await vd(t)):e||(t.Ea.add(2),await pu(t),t.Va.set("Unknown"))}function yu(n){return n.ma||(n.ma=(function(t,i,s){const a=ye(t);return a.sa(),new gO(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:AO.bind(null,n),Yo:xO.bind(null,n),t_:bO.bind(null,n),J_:wO.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),U0(n)?k0(n):n.Va.set("Unknown")):(await n.ma.stop(),HC(n))}))),n.ma}function lo(n){return n.fa||(n.fa=(function(t,i,s){const a=ye(t);return a.sa(),new yO(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:RO.bind(null,n),t_:MO.bind(null,n),ta:NO.bind(null,n),na:DO.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await gu(n)):(await n.fa.stop(),n.Ta.length>0&&(ce(_a,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t,i,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,a){const u=Date.now()+i,d=new L0(e,t,u,s,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _u(n,e){if(Gt("AsyncQueue",`${e}: ${n}`),ho(n))return new le(W.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{static emptySet(e){return new Ll(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||he.comparator(t.key,i.key):(t,i)=>he.comparator(t.key,i.key),this.keyedMap=Rc(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ll;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.ga=new Tt(he.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ru{constructor(e,t,i,s,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,s,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ru(e,t,Ll.emptySet(t),u,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class VO{constructor(){this.queries=Qx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=ye(t),a=s.queries;s.queries=Qx(),a.forEach(((u,d)=>{for(const f of d.ba)f.onError(i)}))})(this,new le(W.ABORTED,"Firestore shutting down"))}}function Qx(){return new ss((n=>LI(n)),hd)}async function O0(n,e){const t=ye(n);let i=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.Da()&&(i=2):(a=new PO,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=_u(u,`Initialization of query '${bl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&q0(t)}async function F0(n,e){const t=ye(n),i=e.query;let s=3;const a=t.queries.get(i);if(a){const u=a.ba.indexOf(e);u>=0&&(a.ba.splice(u,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function kO(n,e){const t=ye(n);let i=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const d of u.ba)d.Fa(s)&&(i=!0);u.wa=s}}i&&q0(t)}function UO(n,e,t){const i=ye(n),s=i.queries.get(e);if(s)for(const a of s.ba)a.onError(t);i.queries.delete(e)}function q0(n){n.Ca.forEach((e=>{e.next()}))}var Iy,Xx;(Xx=Iy||(Iy={})).Ma="default",Xx.Cache="cache";class B0{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ru(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Iy.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,t){this.qa=e,this.byteLength=t}Ua(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.serializer=e}Ks(e){return Sr(this.serializer,e)}qs(e){return e.metadata.exists?aC(this.serializer,e.document,!1):xt.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return zt(e)}}class OO{constructor(e,t){this.$a=e,this.serializer=t,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=JC(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const i=He.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,i=new Wx(this.serializer);for(const s of e)if(s.metadata.queries){const a=i.Ks(s.metadata.name);for(const u of s.metadata.queries){const d=(t.get(u)||Oe()).add(a);t.set(u,d)}}return t}async ja(e){const t=await uO(e,new Wx(this.serializer),this.Qa,this.$a.id),i=this.za(this.documents);for(const s of this.Wa)await cO(e,s,i.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:t}}}function JC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.key=e}}class QC{constructor(e){this.key=e}}class XC{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Oe(),this.mutatedKeys=Oe(),this.eu=FI(e),this.tu=new Ll(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new jx,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const T=s.get(_),w=md(this.query,E)?E:null,N=!!T&&this.mutatedKeys.has(T.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let V=!1;T&&w?T.data.isEqual(w.data)?N!==k&&(i.track({type:3,doc:w}),V=!0):this.su(T,w)||(i.track({type:2,doc:w}),V=!0,(f&&this.eu(w,f)>0||m&&this.eu(w,m)<0)&&(d=!0)):!T&&w?(i.track({type:0,doc:w}),V=!0):T&&!w&&(i.track({type:1,doc:T}),V=!0,(f||m)&&(d=!0)),V&&(w?(u=u.add(w),a=k?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Ss:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,E)=>(function(w,N){const k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:V})}};return k(w)-k(N)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),s=s??!1;const d=t&&!s?this._u():[],f=this.Ya.size===0&&this.current&&!s?1:0,m=f!==this.Xa;return this.Xa=f,u.length!==0||m?{snapshot:new ru(this.query,e.tu,a,u,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Oe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new QC(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new jC(i))})),t}cu(e){this.Za=e.ks,this.Ya=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ru.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const go="SyncEngine";class FO{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class qO{constructor(e){this.key=e,this.hu=!1}}class BO{constructor(e,t,i,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ss((d=>LI(d)),hd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Tt(he.comparator),this.Au=new Map,this.Vu=new w0,this.du={},this.mu=new Map,this.fu=ya.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GO(n,e,t=!0){const i=dm(n);let s;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await WC(i,e,t,!0),s}async function zO(n,e){const t=dm(n);await WC(t,e,!0,!1)}async function WC(n,e,t,i){const s=await tu(n.localStore,Pn(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await G0(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&cm(n.remoteStore,s),d}async function G0(n,e,t,i,s){n.pu=(E,T,w)=>(async function(k,V,$,ne){let Q=V.view.ru($);Q.Ss&&(Q=await Oh(k.localStore,V.query,!1).then((({documents:R})=>V.view.ru(R,Q))));const se=ne&&ne.targetChanges.get(V.targetId),z=ne&&ne.targetMismatches.get(V.targetId)!=null,J=V.view.applyChanges(Q,k.isPrimaryClient,se,z);return Cy(k,V.targetId,J.au),J.snapshot})(n,E,T,w);const a=await Oh(n.localStore,e,!0),u=new XC(e,a.ks),d=u.ru(a.documents),f=yd.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),m=u.applyChanges(d,n.isPrimaryClient,f);Cy(n,t,m.au);const _=new FO(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function HO(n,e,t){const i=ye(n),s=i.Tu.get(e),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter((u=>!hd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await nu(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&iu(i.remoteStore,s.targetId),su(i,s.targetId)})).catch(fo)):(su(i,s.targetId),await nu(i.localStore,s.targetId,!0))}async function KO(n,e){const t=ye(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),iu(t.remoteStore,i.targetId))}async function $O(n,e,t){const i=$0(n);try{const s=await(function(u,d){const f=ye(u),m=ot.now(),_=d.reduce(((w,N)=>w.add(N.key)),Oe());let E,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let N=Yn(),k=Oe();return f.xs.getEntries(w,_).next((V=>{N=V,N.forEach((($,ne)=>{ne.isValidDocument()||(k=k.add($))}))})).next((()=>f.localDocuments.getOverlayedDocuments(w,N))).next((V=>{E=V;const $=[];for(const ne of d){const Q=h3(ne,E.get(ne.key).overlayedDocument);Q!=null&&$.push(new os(ne.key,Q,CI(Q.value.mapValue),Nt.exists(!0)))}return f.mutationQueue.addMutationBatch(w,m,$,d)})).next((V=>{T=V;const $=V.applyToLocalDocumentSet(E,k);return f.documentOverlayCache.saveOverlays(w,V.batchId,$)}))})).then((()=>({batchId:T.batchId,changes:BI(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(u,d,f){let m=u.du[u.currentUser.toKey()];m||(m=new Tt(Me)),m=m.insert(d,f),u.du[u.currentUser.toKey()]=m})(i,s.batchId,t),await as(i,s.changes),await gu(i.remoteStore)}catch(s){const a=_u(s,"Failed to persist write");t.reject(a)}}async function ZC(n,e){const t=ye(n);try{const i=await aO(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Au.get(a);u&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.hu=!0:s.modifiedDocuments.size>0?Ae(u.hu,14607):s.removedDocuments.size>0&&(Ae(u.hu,42227),u.hu=!1))})),await as(t,i,e)}catch(i){await fo(i)}}function Zx(n,e,t){const i=ye(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const f=ye(u);f.onlineState=d;let m=!1;f.queries.forEach(((_,E)=>{for(const T of E.ba)T.va(d)&&(m=!0)})),m&&q0(f)})(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function YO(n,e,t){const i=ye(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),a=s&&s.key;if(a){let u=new Tt(he.comparator);u=u.insert(a,xt.newNoDocument(a,Ie.min()));const d=Oe().add(a),f=new gd(Ie.min(),new Map,new Tt(Me),u,d);await ZC(i,f),i.Ru=i.Ru.remove(a),i.Au.delete(e),K0(i)}else await nu(i.localStore,e,!1).then((()=>su(i,e,t))).catch(fo)}async function JO(n,e){const t=ye(n),i=e.batch.batchId;try{const s=await oO(t.localStore,e);H0(t,i,null),z0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await as(t,s)}catch(s){await fo(s)}}async function jO(n,e,t){const i=ye(n);try{const s=await(function(u,d){const f=ye(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,d).next((E=>(Ae(E!==null,37113),_=E.keys(),f.mutationQueue.removeMutationBatch(m,E)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(i.localStore,e);H0(i,e,t),z0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await as(i,s)}catch(s){await fo(s)}}async function QO(n,e){const t=ye(n);po(t.remoteStore)||ce(go,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(u){const d=ye(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(f=>d.mutationQueue.getHighestUnacknowledgedBatchId(f)))})(t.localStore);if(i===Zs)return void e.resolve();const s=t.mu.get(i)||[];s.push(e),t.mu.set(i,s)}catch(i){const s=_u(i,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function z0(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function H0(n,e,t){const i=ye(n);let s=i.du[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function su(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||eR(n,i)}))}function eR(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(iu(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),K0(n))}function Cy(n,e,t){for(const i of t)i instanceof jC?(n.Vu.addReference(i.key,e),XO(n,i)):i instanceof QC?(ce(go,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||eR(n,i.key)):Ee(19791,{wu:i})}function XO(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(ce(go,"New document in limbo: "+t),n.Eu.add(i),K0(n))}function K0(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new he(He.fromString(e)),i=n.fu.next();n.Au.set(i,new qO(t)),n.Ru=n.Ru.insert(t,i),cm(n.remoteStore,new Qr(Pn(fu(t.path)),i,"TargetPurposeLimboResolution",Kn.ce))}}async function as(n,e,t){const i=ye(n),s=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,f)=>{u.push(i.pu(f,e,t).then((m=>{var _;if((m||t)&&i.isPrimaryClient){const E=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(m){s.push(m);const E=N0.Es(f.targetId,m);a.push(E)}})))})),await Promise.all(u),i.Pu.J_(s),await(async function(f,m){const _=ye(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>H.forEach(m,(T=>H.forEach(T.Ts,(w=>_.persistence.referenceDelegate.addReference(E,T.targetId,w))).next((()=>H.forEach(T.Is,(w=>_.persistence.referenceDelegate.removeReference(E,T.targetId,w)))))))))}catch(E){if(!ho(E))throw E;ce(D0,"Failed to update sequence numbers: "+E)}for(const E of m){const T=E.targetId;if(!E.fromCache){const w=_.vs.get(T),N=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(N);_.vs=_.vs.insert(T,k)}}})(i.localStore,a))}async function WO(n,e){const t=ye(n);if(!t.currentUser.isEqual(e)){ce(go,"User change. New user:",e.toKey());const i=await DC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((f=>{f.reject(new le(W.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await as(t,i.Ns)}}function ZO(n,e){const t=ye(n),i=t.Au.get(e);if(i&&i.hu)return Oe().add(i.key);{let s=Oe();const a=t.Iu.get(e);if(!a)return s;for(const u of a){const d=t.Tu.get(u);s=s.unionWith(d.view.nu)}return s}}async function eF(n,e){const t=ye(n),i=await Oh(t.localStore,e.query,!0),s=e.view.cu(i);return t.isPrimaryClient&&Cy(t,e.targetId,s.au),s}async function tF(n,e){const t=ye(n);return kC(t.localStore,e).then((i=>as(t,i)))}async function nF(n,e,t,i){const s=ye(n),a=await(function(d,f){const m=ye(d),_=ye(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",(E=>_.Xn(E,f).next((T=>T?m.localDocuments.getDocuments(E,T):H.resolve(null)))))})(s.localStore,e);a!==null?(t==="pending"?await gu(s.remoteStore):t==="acknowledged"||t==="rejected"?(H0(s,e,i||null),z0(s,e),(function(d,f){ye(ye(d).mutationQueue).nr(f)})(s.localStore,e)):Ee(6720,"Unknown batchState",{bu:t}),await as(s,a)):ce(go,"Cannot apply mutation batch with id: "+e)}async function iF(n,e){const t=ye(n);if(dm(t),$0(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),s=await eb(t,i.toArray());t.gu=!0,await wy(t.remoteStore,!0);for(const a of s)cm(t.remoteStore,a)}else if(e===!1&&t.gu!==!1){const i=[];let s=Promise.resolve();t.Iu.forEach(((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?i.push(u):s=s.then((()=>(su(t,u),nu(t.localStore,u,!0)))),iu(t.remoteStore,u)})),await s,await eb(t,i),(function(u){const d=ye(u);d.Au.forEach(((f,m)=>{iu(d.remoteStore,m)})),d.Vu.zr(),d.Au=new Map,d.Ru=new Tt(he.comparator)})(t),t.gu=!1,await wy(t.remoteStore,!1)}}async function eb(n,e,t){const i=ye(n),s=[],a=[];for(const u of e){let d;const f=i.Iu.get(u);if(f&&f.length!==0){d=await tu(i.localStore,Pn(f[0]));for(const m of f){const _=i.Tu.get(m),E=await eF(i,_);E.snapshot&&a.push(E.snapshot)}}else{const m=await VC(i.localStore,u);d=await tu(i.localStore,m),await G0(i,tR(m),u,!1,d.resumeToken)}s.push(d)}return i.Pu.J_(a),s}function tR(n){return UI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function rF(n){return(function(t){return ye(ye(t).persistence).hs()})(ye(n).localStore)}async function sF(n,e,t,i){const s=ye(n);if(s.gu)return void ce(go,"Ignoring unexpected query state notification.");const a=s.Iu.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=await kC(s.localStore,OI(a[0])),d=gd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ut.EMPTY_BYTE_STRING);await as(s,u,d);break}case"rejected":await nu(s.localStore,e,!0),su(s,e,i);break;default:Ee(64155,t)}}async function oF(n,e,t){const i=dm(n);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){ce(go,"Adding an already active target "+s);continue}const a=await VC(i.localStore,s),u=await tu(i.localStore,a);await G0(i,tR(a),u.targetId,!1,u.resumeToken),cm(i.remoteStore,u)}for(const s of t)i.Iu.has(s)&&await nu(i.localStore,s,!1).then((()=>{iu(i.remoteStore,s),su(i,s)})).catch(fo)}}function dm(n){const e=ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YO.bind(null,e),e.Pu.J_=kO.bind(null,e.eventManager),e.Pu.yu=UO.bind(null,e.eventManager),e}function $0(n){const e=ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jO.bind(null,e),e}function aF(n,e,t){const i=ye(n);(async function(a,u,d){try{const f=await u.getMetadata();if(await(function(w,N){const k=ye(w),V=zt(N.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",($=>k.Pi.getBundleMetadata($,N.id))).then(($=>!!$&&$.createTime.compareTo(V)>=0))})(a.localStore,f))return await u.close(),d._completeWith((function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}})(f)),Promise.resolve(new Set);d._updateProgress(JC(f));const m=new OO(f,u.serializer);let _=await u.Su();for(;_;){const T=await m.Ga(_);T&&d._updateProgress(T),_=await u.Su()}const E=await m.ja(a.localStore);return await as(a,E.Ja,void 0),await(function(w,N){const k=ye(w);return k.persistence.runTransaction("Save bundle","readwrite",(V=>k.Pi.saveBundleMetadata(V,N)))})(a.localStore,f),d._completeWith(E.progress),Promise.resolve(E.Ha)}catch(f){return nr(go,`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}})(i,e,t).then((s=>{i.sharedClientState.notifyBundleLoaded(s)}))}class rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return NC(this.persistence,new RC,e.initialUser,this.serializer)}Cu(e){return new I0(um.Vi,this.serializer)}Du(e){return new qC}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rd.provider={build:()=>new rd};class lF extends rd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ae(this.persistence.referenceDelegate instanceof Lh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new AC(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new I0((i=>Lh.Vi(i,t)),this.serializer)}}class nR extends rd{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await $0(this.xu.syncEngine),await gu(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return NC(this.persistence,new RC,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new AC(i,e.asyncQueue,t)}Mu(e,t){const i=new d5(t,this.persistence);return new c5(e.asyncQueue,i)}Cu(e){const t=R0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new C0(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,BC(),gh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new qC}}class uF extends nR{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof kg&&(this.sharedClientState.syncEngine={So:nF.bind(null,t),Do:sF.bind(null,t),Co:oF.bind(null,t),hs:rF.bind(null,t),bo:tF.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await iF(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=BC();if(!kg.v(t))throw new le(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=R0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kg(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class sd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Zx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WO.bind(null,this.syncEngine),await wy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new VO})()}createDatastore(e){const t=_d(e.databaseInfo.databaseId),i=pO(e.databaseInfo);return EO(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,a,u,d){return new SO(i,s,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Zx(this.syncEngine,t,0)),(function(){return $x.v()?new $x:new dO})())}createSyncEngine(e,t){return(function(s,a,u,d,f,m,_){const E=new BO(s,a,u,d,f,m);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=ye(s);ce(_a,"RemoteStore shutting down."),a.Ea.add(5),await pu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}sd.provider={build:()=>new sd};function tb(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new vn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.Ua()?this.metadata.resolve(i.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const t=this.Lu.decode(e),i=Number(t);isNaN(i)&&this.qu(`length string (${t}) is not valid number`);const s=await this.Uu(i);return new LO(JSON.parse(s),e.length+i)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dF=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new le(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,a){const u=ye(s),d={documents:a.map((E=>nd(u.serializer,E)))},f=await u.jo("BatchGetDocuments",u.serializer.databaseId,He.emptyPath(),d,a.length),m=new Map;f.forEach((E=>{const T=S3(u.serializer,E);m.set(T.key.toString(),T)}));const _=[];return a.forEach((E=>{const T=m.get(E.toString());Ae(!!T,55234,{key:E}),_.push(T)})),_})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new mu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const s=he.fromPath(i);this.mutations.push(new y0(s,this.precondition(s)))})),await(async function(i,s){const a=ye(i),u={writes:s.map((d=>id(a.serializer,d)))};await a.Wo("Commit",a.serializer.databaseId,He.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ee(50498,{Gu:e.constructor.name});t=Ie.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new le(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ie.min())?Nt.exists(!1):Nt.updateTime(t):Nt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ie.min()))throw new le(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nt.updateTime(t)}return Nt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,t,i,s,a){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=s,this.deferred=a,this.zu=i.maxAttempts,this.M_=new P0(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new dF(this.datastore),t=this.Ju(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Zu(s)}))))})).catch((i=>{this.Zu(i)}))}))}Ju(e){try{const t=this.updateFunction(e);return!cd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!XI(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="FirestoreClient";class hF{constructor(e,t,i,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=s,this.user=un.UNAUTHENTICATED,this.clientId=i0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ce(uo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ce(uo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=_u(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Lg(n,e){n.asyncQueue.verifyOperationInProgress(),ce(uo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await DC(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function nb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Y0(n);ce(uo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Jx(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>Jx(e.remoteStore,s))),n._onlineComponents=e}async function Y0(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(uo,"Using user provided OfflineComponentProvider");try{await Lg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;nr("Error using user provided cache. Falling back to memory cache: "+t),await Lg(n,new rd)}}else ce(uo,"Using default OfflineComponentProvider"),await Lg(n,new lF(void 0));return n._offlineComponents}async function hm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(uo,"Using user provided OnlineComponentProvider"),await nb(n,n._uninitializedComponentsProvider._online)):(ce(uo,"Using default OnlineComponentProvider"),await nb(n,new sd))),n._onlineComponents}function iR(n){return Y0(n).then((e=>e.persistence))}function J0(n){return Y0(n).then((e=>e.localStore))}function rR(n){return hm(n).then((e=>e.remoteStore))}function j0(n){return hm(n).then((e=>e.syncEngine))}function mF(n){return hm(n).then((e=>e.datastore))}async function ou(n){const e=await hm(n),t=e.eventManager;return t.onListen=GO.bind(null,e.syncEngine),t.onUnlisten=HO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=KO.bind(null,e.syncEngine),t}function pF(n){return n.asyncQueue.enqueue((async()=>{const e=await iR(n),t=await rR(n);return e.setNetworkEnabled(!0),(function(s){const a=ye(s);return a.Ea.delete(0),vd(a)})(t)}))}function gF(n){return n.asyncQueue.enqueue((async()=>{const e=await iR(n),t=await rR(n);return e.setNetworkEnabled(!1),(async function(s){const a=ye(s);a.Ea.add(0),await pu(a),a.Va.set("Offline")})(t)}))}function yF(n,e,t,i){const s=new fm(i),a=new B0(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>O0(await ou(n),a))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>F0(await ou(n),a)))}}function _F(n,e){const t=new vn;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,a,u){try{const d=await(function(m,_){const E=ye(m);return E.persistence.runTransaction("read document","readonly",(T=>E.localDocuments.getDocument(T,_)))})(s,a);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new le(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=_u(d,`Failed to get document '${a} from cache`);u.reject(f)}})(await J0(n),e,t))),t.promise}function sR(n,e,t={}){const i=new vn;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new fm({next:T=>{_.Nu(),u.enqueueAndForget((()=>F0(a,E)));const w=T.docs.has(d);!w&&T.fromCache?m.reject(new le(W.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&T.fromCache&&f&&f.source==="server"?m.reject(new le(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),E=new B0(fu(d.path),_,{includeMetadataChanges:!0,Ka:!0});return O0(a,E)})(await ou(n),n.asyncQueue,e,t,i))),i.promise}function vF(n,e){const t=new vn;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,a,u){try{const d=await Oh(s,a,!0),f=new XC(a,d.ks),m=f.ru(d.documents),_=f.applyChanges(m,!1);u.resolve(_.snapshot)}catch(d){const f=_u(d,`Failed to execute query '${a} against cache`);u.reject(f)}})(await J0(n),e,t))),t.promise}function oR(n,e,t={}){const i=new vn;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new fm({next:T=>{_.Nu(),u.enqueueAndForget((()=>F0(a,E))),T.fromCache&&f.source==="server"?m.reject(new le(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),E=new B0(d,_,{includeMetadataChanges:!0,Ka:!0});return O0(a,E)})(await ou(n),n.asyncQueue,e,t,i))),i.promise}function EF(n,e){const t=new vn;return n.asyncQueue.enqueueAndForget((async()=>$O(await j0(n),e,t))),t.promise}function TF(n,e){const t=new fm(e);return n.asyncQueue.enqueueAndForget((async()=>(function(s,a){ye(s).Ca.add(a),a.next()})(await ou(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(s,a){ye(s).Ca.delete(a)})(await ou(n),t)))}}function SF(n,e,t){const i=new vn;return n.asyncQueue.enqueueAndForget((async()=>{const s=await mF(n);new fF(n.asyncQueue,s,t,e,i).ju()})),i.promise}function AF(n,e,t,i){const s=(function(u,d){let f;return f=typeof u=="string"?ZI().encode(u):u,(function(_,E){return new cF(_,E)})((function(_,E){if(_ instanceof Uint8Array)return tb(_,E);if(_ instanceof ArrayBuffer)return tb(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(f),d)})(t,_d(e));n.asyncQueue.enqueueAndForget((async()=>{aF(await j0(n),s,i)}))}function xF(n,e){return n.asyncQueue.enqueue((async()=>(function(i,s){const a=ye(i);return a.persistence.runTransaction("Get named query","readonly",(u=>a.Pi.getNamedQuery(u,s)))})(await J0(n),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF="ComponentProvider",ib=new Map;function wF(n,e,t,i,s){return new q5(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,aR(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="firestore.googleapis.com",rb=!0;class sb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lR,this.ssl=rb}else this.host=e.host,this.ssl=e.ssl??rb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<B3)throw new le(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aR(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ed{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new W6;switch(i.type){case"firstParty":return new n5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=ib.get(t);i&&(ce(bF,"Removing Datastore"),ib.delete(t),i.terminate())})(this),Promise.resolve()}}function IF(n,e,t,i={}){var m;n=et(n,Ed);const s=Yy(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(mL(`https://${d}`),_L("Firestore",!0)),a.host!==lR&&a.host!==d&&nr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:d,ssl:s,emulatorOptions:i};if(!Fl(f,u)&&(n._setSettings(f),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=un.MOCK_USER;else{_=pL(i.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new le(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new un(T)}n._authCredentials=new Z6(new Ww(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kn=class uR{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new uR(this.firestore,e,this._query)}},Et=class Mc{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mc(this.firestore,e,this._key)}toJSON(){return{type:Mc._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ud(t,Mc._jsonSchema))return new Mc(e,i||null,new he(He.fromString(t.referencePath)))}};Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:en("string",Et._jsonSchemaVersion),referencePath:en("string")};let eo=class cR extends kn{constructor(e,t,i){super(e,t,fu(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new he(e))}withConverter(e){return new cR(this.firestore,e,this._path)}};function dR(n,e,...t){if(n=tn(n),r0("collection","path",e),n instanceof Ed){const i=He.fromString(e,...t);return YA(i),new eo(n,null,i)}{if(!(n instanceof Et||n instanceof eo))throw new le(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(e,...t));return YA(i),new eo(n.firestore,null,i)}}function CF(n,e){if(n=et(n,Ed),r0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new le(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new kn(n,null,(function(i){return new rs(He.emptyPath(),i)})(e))}function Gh(n,e,...t){if(n=tn(n),arguments.length===1&&(e=i0.newId()),r0("doc","path",e),n instanceof Ed){const i=He.fromString(e,...t);return $A(i),new Et(n,null,new he(i))}{if(!(n instanceof Et||n instanceof eo))throw new le(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(e,...t));return $A(i),new Et(n.firestore,n instanceof eo?n.converter:null,new he(i))}}function fR(n,e){return n=tn(n),e=tn(e),(n instanceof Et||n instanceof eo)&&(e instanceof Et||e instanceof eo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hR(n,e){return n=tn(n),e=tn(e),n instanceof kn&&e instanceof kn&&n.firestore===e.firestore&&hd(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="AsyncQueue";class ab{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new P0(this,"async_queue_retry"),this._c=()=>{const i=gh();i&&ce(ob,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=gh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new vn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ho(e))throw e;ce(ob,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Gt("INTERNAL UNHANDLED ERROR: ",lb(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=L0.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Ee(47125,{Pc:lb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function lb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(){this._progressObserver={},this._taskCompletionResolver=new vn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=-1;let Ht=class extends Ed{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new ab,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ab(e),this._firestoreClient=void 0,await e}}};function In(n){if(n._terminated)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mR(n),n._firestoreClient}function mR(n){var i,s,a,u;const e=n._freezeSettings(),t=wF(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new hF(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(n._componentsProvider))}function DF(n,e){nr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return pR(n,sd.provider,{build:i=>new nR(i,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function MF(n){nr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();pR(n,sd.provider,{build:t=>new uF(t,e.cacheSizeBytes)})}function pR(n,e,t){if((n=et(n,Ht))._firestoreClient||n._terminated)throw new le(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new le(W.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},mR(n)}function PF(n){if(n._initialized&&!n._terminated)throw new le(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!Tr.v())return Promise.resolve();const s=i+CC;await Tr.delete(s)})(R0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function VF(n){return(function(t){const i=new vn;return t.asyncQueue.enqueueAndForget((async()=>QO(await j0(t),i))),i.promise})(In(n=et(n,Ht)))}function kF(n){return pF(In(n=et(n,Ht)))}function UF(n){return gF(In(n=et(n,Ht)))}function LF(n,e){const t=In(n=et(n,Ht)),i=new RF;return AF(t,n._databaseId,e,i),i}function OF(n,e){return xF(In(n=et(n,Ht)),e).then((t=>t?new kn(n,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xn(Ut.fromBase64String(e))}catch(t){throw new le(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xn(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ud(e,xn._jsonSchema))return xn.fromBase64String(e.bytes)}}xn._jsonSchemaVersion="firestore/bytes/1.0",xn._jsonSchema={type:en("string",xn._jsonSchemaVersion),bytes:en("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zi._jsonSchemaVersion}}static fromJSON(e){if(ud(e,Zi._jsonSchema))return new Zi(e.latitude,e.longitude)}}Zi._jsonSchemaVersion="firestore/geoPoint/1.0",Zi._jsonSchema={type:en("string",Zi._jsonSchemaVersion),latitude:en("number"),longitude:en("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ud(e,er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new er(e.vectorValues);throw new le(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}er._jsonSchemaVersion="firestore/vectorValue/1.0",er._jsonSchema={type:en("string",er._jsonSchemaVersion),vectorValues:en("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF=/^__.*__$/;class qF{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,t,this.fieldTransforms):new hu(e,this.data,t,this.fieldTransforms)}}class gR{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{dataSource:n})}}class mm{constructor(e,t,i,s,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new mm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return zh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(yR(this.dataSource)&&FF.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class BF{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||_d(e)}createContext(e,t,i,s=!1){return new mm({dataSource:e,methodName:t,targetDoc:i,path:Rt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ba(n){const e=n._freezeSettings(),t=_d(n._databaseId);return new BF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pm(n,e,t,i,s,a={}){const u=n.createContext(a.merge||a.mergeFields?2:0,e,t,s);n_("Data must be an object, but it was:",u,i);const d=ER(i,u);let f,m;if(a.merge)f=new $n(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const T=Ea(e,E,t);if(!u.contains(T))throw new le(W.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);AR(_,T)||_.push(T)}f=new $n(_),m=u.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,m=u.fieldTransforms;return new qF(new _n(d),f,m)}class Td extends xa{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Td}}function _R(n,e,t){return new mm({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Q0 extends xa{_toFieldTransform(e){return new pd(e.path,new Wl)}isEqual(e){return e instanceof Q0}}class X0 extends xa{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=_R(this,e,!0),i=this.Ac.map((a=>wa(a,t))),s=new ha(i);return new pd(e.path,s)}isEqual(e){return e instanceof X0&&Fl(this.Ac,e.Ac)}}class W0 extends xa{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=_R(this,e,!0),i=this.Ac.map((a=>wa(a,t))),s=new ma(i);return new pd(e.path,s)}isEqual(e){return e instanceof W0&&Fl(this.Ac,e.Ac)}}class Z0 extends xa{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Zl(e.serializer,HI(e.serializer,this.Vc));return new pd(e.path,t)}isEqual(e){return e instanceof Z0&&this.Vc===e.Vc}}function e_(n,e,t,i){const s=n.createContext(1,e,t);n_("Data must be an object, but it was:",s,i);const a=[],u=_n.empty();mo(i,((f,m)=>{const _=SR(e,f,t);m=tn(m);const E=s.childContextForFieldPath(_);if(m instanceof Td)a.push(_);else{const T=wa(m,E);T!=null&&(a.push(_),u.set(_,T))}}));const d=new $n(a);return new gR(u,d,s.fieldTransforms)}function t_(n,e,t,i,s,a){const u=n.createContext(1,e,t),d=[Ea(e,i,t)],f=[s];if(a.length%2!=0)throw new le(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(Ea(e,a[T])),f.push(a[T+1]);const m=[],_=_n.empty();for(let T=d.length-1;T>=0;--T)if(!AR(m,d[T])){const w=d[T];let N=f[T];N=tn(N);const k=u.childContextForFieldPath(w);if(N instanceof Td)m.push(w);else{const V=wa(N,k);V!=null&&(m.push(w),_.set(w,V))}}const E=new $n(m);return new gR(_,E,u.fieldTransforms)}function vR(n,e,t,i=!1){return wa(t,n.createContext(i?4:3,e))}function wa(n,e){if(TR(n=tn(n)))return n_("Unsupported field value:",e,n),ER(n,e);if(n instanceof xa)return(function(i,s){if(!yR(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,s){const a=[];let u=0;for(const d of i){let f=wa(d,s.childContextForArray(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,s){if((i=tn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return HI(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ot.fromDate(i);return{timestampValue:eu(s.serializer,a)}}if(i instanceof ot){const a=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:eu(s.serializer,a)}}if(i instanceof Zi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xn)return{bytesValue:nC(s.serializer,i._byteString)};if(i instanceof Et){const a=s.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw s.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:S0(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof er)return(function(u,d){const f=u instanceof er?u.toArray():u;return{mapValue:{fields:{[d0]:{stringValue:f0},[jl]:{arrayValue:{values:f.map((_=>{if(typeof _!="number")throw d.createError("VectorValues must only contain numeric values.");return g0(d.serializer,_)}))}}}}}})(i,s);if(mC(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Xh(i)}`)})(n,e)}function ER(n,e){const t={};return vI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(n,((i,s)=>{const a=wa(s,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function TR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof Zi||n instanceof xn||n instanceof Et||n instanceof xa||n instanceof er||mC(n))}function n_(n,e,t){if(!TR(t)||!tI(t)){const i=Xh(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Ea(n,e,t){if((e=tn(e))instanceof va)return e._internalPath;if(typeof e=="string")return SR(n,e);throw zh("Field path arguments must be of type string or ",n,!1,void 0,t)}const GF=new RegExp("[~\\*/\\[\\]]");function SR(n,e,t){if(e.search(GF)>=0)throw zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new va(...e.split("."))._internalPath}catch{throw zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zh(n,e,t,i,s){const a=i&&!i.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${i}`),u&&(f+=` in document ${s}`),f+=")"),new le(W.INVALID_ARGUMENT,d+n+f)}function AR(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{convertValue(e,t="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return mo(e,((s,a)=>{i[s]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,s,a;const t=(a=(s=(i=e.fields)==null?void 0:i[jl].arrayValue)==null?void 0:s.values)==null?void 0:a.map((u=>Ct(u.doubleValue)));return new er(t)}convertGeoPoint(e){return new Zi(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=im(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Wc(e));default:return null}}convertTimestamp(e){const t=es(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=He.fromString(e);Ae(hC(i),9688,{name:e});const s=new ro(i.get(1),i.get(3)),a=new he(i.popFirst(5));return s.isEqual(t)||Gt(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends i_{constructor(e){super(),this.firestore=e}convertBytes(e){return new xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(){return new Td("deleteField")}function HF(){return new Q0("serverTimestamp")}function KF(...n){return new X0("arrayUnion",n)}function $F(...n){return new W0("arrayRemove",n)}function YF(n){return new Z0("increment",n)}const ub="@firebase/firestore",cb="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t,i,s,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ea("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class JF extends od{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r_{}class Sd extends r_{}function $s(n,e,...t){let i=[];e instanceof r_&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((f=>f instanceof s_)).length,d=a.filter((f=>f instanceof gm)).length;if(u>1||u>0&&d>0)throw new le(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class gm extends Sd{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new gm(e,t,i)}_apply(e){const t=this._parse(e);return wR(e._query,t),new kn(e.firestore,e.converter,gy(e._query,t))}_parse(e){const t=ba(e.firestore);return(function(a,u,d,f,m,_,E){let T;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new le(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){fb(E,_);const N=[];for(const k of E)N.push(db(f,a,k));T={arrayValue:{values:N}}}else T=db(f,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||fb(E,_),T=vR(d,u,E,_==="in"||_==="not-in");return Je.create(m,_,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function jF(n,e,t){const i=e,s=Ea("where",n);return gm._create(s,i,t)}class s_ extends r_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new s_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ct.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const d=a.getFlattenedFilters();for(const f of d)wR(u,f),u=gy(u,f)})(e._query,t),new kn(e.firestore,e.converter,gy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class o_ extends Sd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new o_(e,t)}_apply(e){const t=(function(s,a,u){if(s.startAt!==null)throw new le(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new td(a,u)})(e._query,this._field,this._direction);return new kn(e.firestore,e.converter,e3(e._query,t))}}function QF(n,e="asc"){const t=e,i=Ea("orderBy",n);return o_._create(i,t)}class ym extends Sd{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new ym(e,t,i)}_apply(e){return new kn(e.firestore,e.converter,Ph(e._query,this._limit,this._limitType))}}function XF(n){return nI("limit",n),ym._create("limit",n,"F")}function WF(n){return nI("limitToLast",n),ym._create("limitToLast",n,"L")}class _m extends Sd{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new _m(e,t,i)}_apply(e){const t=bR(e,this.type,this._docOrFields,this._inclusive);return new kn(e.firestore,e.converter,t3(e._query,t))}}function ZF(...n){return _m._create("startAt",n,!0)}function eq(...n){return _m._create("startAfter",n,!1)}class vm extends Sd{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new vm(e,t,i)}_apply(e){const t=bR(e,this.type,this._docOrFields,this._inclusive);return new kn(e.firestore,e.converter,n3(e._query,t))}}function tq(...n){return vm._create("endBefore",n,!1)}function nq(...n){return vm._create("endAt",n,!0)}function bR(n,e,t,i){if(t[0]=tn(t[0]),t[0]instanceof od)return(function(a,u,d,f,m){if(!f)throw new le(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const E of kl(a))if(E.field.isKeyField())_.push(da(u,f.key));else{const T=f.data.field(E.field);if(nm(T))throw new le(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const w=E.field.canonicalString();throw new le(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}_.push(T)}return new ao(_,m)})(n._query,n.firestore._databaseId,e,t[0]._document,i);{const s=ba(n.firestore);return(function(u,d,f,m,_,E){const T=u.explicitOrderBy;if(_.length>T.length)throw new le(W.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let N=0;N<_.length;N++){const k=_[N];if(T[N].field.isKeyField()){if(typeof k!="string")throw new le(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof k}`);if(!m0(u)&&k.indexOf("/")!==-1)throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${k}' contains a slash.`);const V=u.path.child(He.fromString(k));if(!he.isDocumentKey(V))throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const $=new he(V);w.push(da(d,$))}else{const V=vR(f,m,k);w.push(V)}}return new ao(w,E)})(n._query,n.firestore._databaseId,s,e,t,i)}}function db(n,e,t){if(typeof(t=tn(t))=="string"){if(t==="")throw new le(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m0(e)&&t.indexOf("/")!==-1)throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(He.fromString(t));if(!he.isDocumentKey(i))throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return da(n,new he(i))}if(t instanceof Et)return da(n,t._key);throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xh(t)}.`)}function fb(n,e){if(!Array.isArray(n)||n.length===0)throw new le(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wR(n,e){const t=(function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Em(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class iq extends i_{constructor(e){super(),this.firestore=e}convertBytes(e){return new xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}}class aa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ni=class IR extends od{constructor(e,t,i,s,a,u){super(e,t,i,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ea("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=IR._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ni._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ni._jsonSchema={type:en("string",Ni._jsonSchemaVersion),bundleSource:en("string","DocumentSnapshot"),bundleName:en("string"),bundle:en("string")};let zc=class extends Ni{data(e={}){return super.data(e)}},tr=class CR{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new aa(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new zc(this._firestore,this._userDataWriter,i.key,i,new aa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const f=new zc(s._firestore,s._userDataWriter,d.doc.key,d.doc,new aa(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new zc(s._firestore,s._userDataWriter,d.doc.key,d.doc,new aa(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:rq(d.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=CR._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=i0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function rq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}function RR(n,e){return n instanceof Ni&&e instanceof Ni?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof tr&&e instanceof tr&&n._firestore===e._firestore&&hR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr._jsonSchemaVersion="firestore/querySnapshot/1.0",tr._jsonSchema={type:en("string",tr._jsonSchemaVersion),bundleSource:en("string","QuerySnapshot"),bundleName:en("string"),bundle:en("string")};const sq={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oq=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ba(e)}set(e,t,i){this._verifyNotCommitted();const s=Qs(e,this._firestore),a=Em(s.converter,t,i),u=pm(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,i);return this._mutations.push(u.toMutation(s._key,Nt.none())),this}update(e,t,i,...s){this._verifyNotCommitted();const a=Qs(e,this._firestore);let u;return u=typeof(t=tn(t))=="string"||t instanceof va?t_(this._dataReader,"WriteBatch.update",a._key,t,i,s):e_(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qs(e,this._firestore);return this._mutations=this._mutations.concat(new mu(t._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Qs(n,e){if((n=tn(n)).firestore!==e)throw new le(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aq{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ba(e)}get(e){const t=Qs(e,this._firestore),i=new iq(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return Ee(24041);const a=s[0];if(a.isFoundDocument())return new od(this._firestore,i,a.key,a,t.converter);if(a.isNoDocument())return new od(this._firestore,i,t._key,null,t.converter);throw Ee(18433,{doc:a})}))}set(e,t,i){const s=Qs(e,this._firestore),a=Em(s.converter,t,i),u=pm(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,u),this}update(e,t,i,...s){const a=Qs(e,this._firestore);let u;return u=typeof(t=tn(t))=="string"||t instanceof va?t_(this._dataReader,"Transaction.update",a._key,t,i,s):e_(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Qs(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lq=class extends aq{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qs(e,this._firestore),i=new Ia(this._firestore);return super.get(e).then((s=>new Ni(this._firestore,i,t._key,s._document,new aa(!1,!1),t.converter)))}};function uq(n,e,t){n=et(n,Ht);const i={...sq,...t};(function(u){if(u.maxAttempts<1)throw new le(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i);const s=In(n);return SF(s,(a=>e(new lq(n,a))),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cq(n){n=et(n,Et);const e=et(n.firestore,Ht),t=In(e);return sR(t,n._key).then((i=>a_(e,n,i)))}function dq(n){n=et(n,Et);const e=et(n.firestore,Ht),t=In(e),i=new Ia(e);return _F(t,n._key).then((s=>new Ni(e,i,n._key,s,new aa(s!==null&&s.hasLocalMutations,!0),n.converter)))}function fq(n){n=et(n,Et);const e=et(n.firestore,Ht),t=In(e);return sR(t,n._key,{source:"server"}).then((i=>a_(e,n,i)))}function hq(n){n=et(n,kn);const e=et(n.firestore,Ht),t=In(e),i=new Ia(e);return xR(n._query),oR(t,n._query).then((s=>new tr(e,i,n,s)))}function mq(n){n=et(n,kn);const e=et(n.firestore,Ht),t=In(e),i=new Ia(e);return vF(t,n._query).then((s=>new tr(e,i,n,s)))}function pq(n){n=et(n,kn);const e=et(n.firestore,Ht),t=In(e),i=new Ia(e);return oR(t,n._query,{source:"server"}).then((s=>new tr(e,i,n,s)))}function hb(n,e,t){n=et(n,Et);const i=et(n.firestore,Ht),s=Em(n.converter,e,t),a=ba(i);return Ad(i,[pm(a,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Nt.none())])}function mb(n,e,t,...i){n=et(n,Et);const s=et(n.firestore,Ht),a=ba(s);let u;return u=typeof(e=tn(e))=="string"||e instanceof va?t_(a,"updateDoc",n._key,e,t,i):e_(a,"updateDoc",n._key,e),Ad(s,[u.toMutation(n._key,Nt.exists(!0))])}function gq(n){return Ad(et(n.firestore,Ht),[new mu(n._key,Nt.none())])}function yq(n,e){const t=et(n.firestore,Ht),i=Gh(n),s=Em(n.converter,e),a=ba(n.firestore);return Ad(t,[pm(a,"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Nt.exists(!1))]).then((()=>i))}function NR(n,...e){var m,_,E;n=tn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Ry(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ry(e[i])){const T=e[i];e[i]=(m=T.next)==null?void 0:m.bind(T),e[i+1]=(_=T.error)==null?void 0:_.bind(T),e[i+2]=(E=T.complete)==null?void 0:E.bind(T)}let a,u,d;if(n instanceof Et)u=et(n.firestore,Ht),d=fu(n._key.path),a={next:T=>{e[i]&&e[i](a_(u,n,T))},error:e[i+1],complete:e[i+2]};else{const T=et(n,kn);u=et(T.firestore,Ht),d=T._query;const w=new Ia(u);a={next:N=>{e[i]&&e[i](new tr(u,w,T,N))},error:e[i+1],complete:e[i+2]},xR(n._query)}const f=In(u);return yF(f,d,s,a)}function _q(n,e){n=et(n,Ht);const t=In(n),i=Ry(e)?e:{next:e};return TF(t,i)}function Ad(n,e){const t=In(n);return EF(t,e)}function a_(n,e,t){const i=t.docs.get(e._key),s=new Ia(n);return new Ni(n,s,e._key,i,new aa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){j6(Wy),Gl(new ca("firestore",((i,{instanceIdentifier:s,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Ht(new e5(i.getProvider("auth-internal")),new i5(u,i.getProvider("app-check-internal")),B5(u,s),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Xr(ub,cb,e),Xr(ub,cb,"esm2020")})();const vq="@firebase/firestore-compat",Eq="0.4.5";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){if(typeof Uint8Array>"u")throw new le("unimplemented","Uint8Arrays are not available in this environment.")}function gb(){if(!O5())throw new le("unimplemented","Blobs are unavailable in Firestore in this environment.")}let DR=class Ny{constructor(e){this._delegate=e}static fromBase64String(e){return gb(),new Ny(xn.fromBase64String(e))}static fromUint8Array(e){return pb(),new Ny(xn.fromUint8Array(e))}toBase64(){return gb(),this._delegate.toBase64()}toUint8Array(){return pb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(n){return Tq(n,["next","error","complete"])}function Tq(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{enableIndexedDbPersistence(e,t){return DF(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return MF(e._delegate)}clearIndexedDbPersistence(e){return PF(e._delegate)}}class MR{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof ro||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&nr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){IF(this._delegate,e,t,i)}enableNetwork(){return kF(this._delegate)}disableNetwork(){return UF(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,eI("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return VF(this._delegate)}onSnapshotsInSync(e){return _q(this._delegate,e)}get app(){if(!this._appCompat)throw new le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new au(this,dR(this._delegate,e))}catch(t){throw Mn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ci(this,Gh(this._delegate,e))}catch(t){throw Mn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Dn(this,CF(this._delegate,e))}catch(t){throw Mn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return uq(this._delegate,t=>e(new PR(this,t)))}batch(){return In(this._delegate),new VR(new oq(this._delegate,e=>Ad(this._delegate,e)))}loadBundle(e){return LF(this._delegate,e)}namedQuery(e){return OF(this._delegate,e).then(t=>t?new Dn(this,t):null)}}class Tm extends i_{constructor(e){super(),this.firestore=e}convertBytes(e){return new DR(new xn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ci.forKey(t,this.firestore,null)}}function Aq(n){Q6(n)}class PR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Tm(e)}get(e){const t=la(e);return this._delegate.get(t).then(i=>new ad(this._firestore,new Ni(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const s=la(e);return i?(l_("Transaction.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const a=la(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,i,...s),this}delete(e){const t=la(e);return this._delegate.delete(t),this}}class VR{constructor(e){this._delegate=e}set(e,t,i){const s=la(e);return i?(l_("WriteBatch.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const a=la(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,i,...s),this}delete(e){const t=la(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ta{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new zc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ld(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Ta.INSTANCES;let s=i.get(e);s||(s=new WeakMap,i.set(e,s));let a=s.get(t);return a||(a=new Ta(e,new Tm(e),t),s.set(t,a)),a}}Ta.INSTANCES=new WeakMap;class Ci{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tm(e)}static forPath(e,t,i){if(e.length%2!==0)throw new le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ci(t,new Et(t._delegate,i,new he(e)))}static forKey(e,t,i){return new Ci(t,new Et(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new au(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new au(this.firestore,dR(this._delegate,e))}catch(t){throw Mn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=tn(e),e instanceof Et?fR(this._delegate,e):!1}set(e,t){t=l_("DocumentReference.set",t);try{return t?hb(this._delegate,e,t):hb(this._delegate,e)}catch(i){throw Mn(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?mb(this._delegate,e):mb(this._delegate,e,t,...i)}catch(s){throw Mn(s,"updateDoc()","DocumentReference.update()")}}delete(){return gq(this._delegate)}onSnapshot(...e){const t=kR(e),i=UR(e,s=>new ad(this.firestore,new Ni(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return NR(this._delegate,t,i)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=dq(this._delegate):(e==null?void 0:e.source)==="server"?t=fq(this._delegate):t=cq(this._delegate),t.then(i=>new ad(this.firestore,new Ni(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Ci(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Mn(n,e,t){return n.message=n.message.replace(e,t),n}function kR(n){for(const e of n)if(typeof e=="object"&&!Dy(e))return e;return{}}function UR(n,e){var i,s;let t;return Dy(n[0])?t=n[0]:Dy(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:a=>{t.next&&t.next(e(a))},error:(i=t.error)==null?void 0:i.bind(t),complete:(s=t.complete)==null?void 0:s.bind(t)}}class ad{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ci(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return RR(this._delegate,e._delegate)}}class ld extends ad{data(e){const t=this._delegate.data(e);return this._delegate._converter||X6(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Dn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tm(e)}where(e,t,i){try{return new Dn(this.firestore,$s(this._delegate,jF(e,t,i)))}catch(s){throw Mn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Dn(this.firestore,$s(this._delegate,QF(e,t)))}catch(i){throw Mn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Dn(this.firestore,$s(this._delegate,XF(e)))}catch(t){throw Mn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Dn(this.firestore,$s(this._delegate,WF(e)))}catch(t){throw Mn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Dn(this.firestore,$s(this._delegate,ZF(...e)))}catch(t){throw Mn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Dn(this.firestore,$s(this._delegate,eq(...e)))}catch(t){throw Mn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Dn(this.firestore,$s(this._delegate,tq(...e)))}catch(t){throw Mn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Dn(this.firestore,$s(this._delegate,nq(...e)))}catch(t){throw Mn(t,"endAt()","Query.endAt()")}}isEqual(e){return hR(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=mq(this._delegate):(e==null?void 0:e.source)==="server"?t=pq(this._delegate):t=hq(this._delegate),t.then(i=>new My(this.firestore,new tr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=kR(e),i=UR(e,s=>new My(this.firestore,new tr(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return NR(this._delegate,t,i)}withConverter(e){return new Dn(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class xq{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ld(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class My{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Dn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ld(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xq(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new ld(this._firestore,i))})}isEqual(e){return RR(this._delegate,e._delegate)}}class au extends Dn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ci(this.firestore,e):null}doc(e){try{return e===void 0?new Ci(this.firestore,Gh(this._delegate)):new Ci(this.firestore,Gh(this._delegate,e))}catch(t){throw Mn(t,"doc()","CollectionReference.doc()")}}add(e){return yq(this._delegate,e).then(t=>new Ci(this.firestore,t))}isEqual(e){return fR(this._delegate,e._delegate)}withConverter(e){return new au(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function la(n){return et(n,Et)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(...e){this._delegate=new va(...e)}static documentId(){return new u_(Rt.keyField().canonicalString())}isEqual(e){return e=tn(e),e instanceof va?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{static serverTimestamp(){const e=HF();return e._methodName="FieldValue.serverTimestamp",new sa(e)}static delete(){const e=zF();return e._methodName="FieldValue.delete",new sa(e)}static arrayUnion(...e){const t=KF(...e);return t._methodName="FieldValue.arrayUnion",new sa(t)}static arrayRemove(...e){const t=$F(...e);return t._methodName="FieldValue.arrayRemove",new sa(t)}static increment(e){const t=YF(e);return t._methodName="FieldValue.increment",new sa(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq={Firestore:MR,GeoPoint:Zi,Timestamp:ot,Blob:DR,Transaction:PR,WriteBatch:VR,DocumentReference:Ci,DocumentSnapshot:ad,Query:Dn,QueryDocumentSnapshot:ld,QuerySnapshot:My,CollectionReference:au,FieldPath:u_,FieldValue:sa,setLogLevel:Aq,CACHE_SIZE_UNLIMITED:NF};function wq(n,e){n.INTERNAL.registerComponent(new ca("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(i,s)},"PUBLIC").setServiceProps({...bq}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iq(n){wq(n,(e,t)=>new MR(e,t,new Sq)),n.registerVersion(vq,Eq)}Iq(t0);const Cq={apiKey:"AIzaSyCTS6IXhO1_VhwlhDxcVQGZu-jB6PmsD78",authDomain:"escuelaeats.firebaseapp.com",projectId:"escuelaeats",storageBucket:"escuelaeats.firebasestorage.app",messagingSenderId:"22013540088",appId:"1:22013540088:web:1f0e6d6b6e2dbf1bd22d0d",measurementId:"G-CRJZMWD6YS"},Rq=t0.initializeApp(Cq),Dt=Rq.firestore(),Nq=["https://api.dicebear.com/7.x/adventurer/svg?seed=Felix","https://api.dicebear.com/7.x/adventurer/svg?seed=Aneka","https://api.dicebear.com/7.x/adventurer/svg?seed=Milo","https://api.dicebear.com/7.x/adventurer/svg?seed=Lola","https://api.dicebear.com/7.x/adventurer/svg?seed=Gizmo","https://api.dicebear.com/7.x/adventurer/svg?seed=Sassy","https://api.dicebear.com/7.x/avataaars/svg?seed=Scooter","https://api.dicebear.com/7.x/avataaars/svg?seed=Miss%20kitty"],Dq=({isAvatarModalOpen:n,setIsAvatarModalOpen:e,user:t,setUser:i})=>{const[s,a]=xe.useState(""),u=async d=>{if(!t)return;const f={...t,avatar:d};if(i(f),t.email!=="admin@ucol.mx")try{await Dt.collection("users").doc(t.email).update({avatar:d})}catch(m){console.error("Error updating avatar:",m)}else localStorage.setItem("adminAvatar",d);e(!1)};return n?S.jsxs("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4",children:[S.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>e(!1)}),S.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-md relative z-10 shadow-2xl animate-scale-in border border-gray-100 dark:border-gray-700 overflow-hidden",children:[S.jsx("button",{onClick:()=>e(!1),className:"absolute top-4 right-4 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:S.jsx(Ol,{size:24})}),S.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4 text-center",children:"Elige tu Avatar"}),S.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:Nq.map((d,f)=>S.jsx("button",{onClick:()=>u(d),className:"aspect-square rounded-full overflow-hidden border-2 border-transparent hover:border-green-500 hover:scale-110 transition-all bg-gray-100 dark:bg-gray-700",children:S.jsx("img",{src:d,alt:`Avatar ${f}`,className:"w-full h-full object-cover"})},f))}),S.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-4",children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2",children:"O pega una URL de imagen"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"text",value:s,onChange:d=>a(d.target.value),placeholder:"https://...",className:"flex-1 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-2 text-sm dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500/50"}),S.jsx("button",{onClick:()=>s&&u(s),disabled:!s,className:"bg-green-600 text-white px-4 rounded-xl font-bold text-sm disabled:opacity-50",children:"Guardar"})]})]})]})]}):null},Mq=()=>{const n={name:"Administrador",email:"admin@ucol.mx",school:"Administracin",grade:"-",group:"Staff",balance:99999,loyaltyPoints:9999},[e,t]=xe.useState(null),[i,s]=xe.useState("LOGIN"),[a,u]=xe.useState(!0),[d,f]=xe.useState("HOME"),[m,_]=xe.useState(Zt.ALL),[E,T]=xe.useState(""),[w,N]=xe.useState([]),[k,V]=xe.useState(!1),[$,ne]=xe.useState([]),[Q,se]=xe.useState([]),[z,J]=xe.useState(!1),[R,D]=xe.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light"),[M,O]=xe.useState(!1),[L,B]=xe.useState("SELECT_AMOUNT"),[P,Ve]=xe.useState(0),[ft,te]=xe.useState(""),[me,Te]=xe.useState(""),[qe,st]=xe.useState(""),[q,oe]=xe.useState(""),[pe,ve]=xe.useState(null),[De,Ne]=xe.useState(!1),[Ke,Lt]=xe.useState("ACTIVE"),[vt,Mi]=xe.useState(!1),[Pi,Vi]=xe.useState({}),[ls,Jn]=xe.useState(!1),[yo,ki]=xe.useState(!1),[Ui,xr]=xe.useState(""),[bt,Mt]=xe.useState(""),[fi,Ca]=xe.useState(""),[Li,sn]=xe.useState(""),[Oi,br]=xe.useState(""),[wr,Fi]=xe.useState(""),[_o,vo]=xe.useState(""),[us,Eo]=xe.useState(""),[Un,ht]=xe.useState(""),[dn,nt]=xe.useState(!1);xe.useEffect(()=>{R==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",R)},[R]);const To=()=>{D(ue=>ue==="light"?"dark":"light")};xe.useEffect(()=>{(async()=>{const ge=localStorage.getItem("activeSessionEmail");if(!ge){u(!1);return}if(ge==="admin@ucol.mx"){const we=localStorage.getItem("adminAvatar");t({...n,avatar:we||void 0}),u(!1);return}try{const de=await Dt.collection("users").doc(ge).get();de.exists?t(de.data()):localStorage.removeItem("activeSessionEmail")}catch(we){console.error("Error recuperando sesin:",we)}finally{u(!1)}})()},[]),xe.useEffect(()=>{if(!e||e.email==="admin@ucol.mx")return;const ue=Dt.collection("users").doc(e.email).onSnapshot(ge=>{ge.exists&&t(ge.data())});return()=>ue()},[e==null?void 0:e.email]),xe.useEffect(()=>{const ue=Dt.collection("menu_items").onSnapshot(ge=>{if(ge.empty){console.log("Seeding Menu Items...");const we=Dt.batch();Tw.forEach(de=>{const Kt=Dt.collection("menu_items").doc(de.id);we.set(Kt,de)}),we.commit().catch(console.error)}else{const we=ge.docs.map(de=>({id:de.id,...de.data()}));se(we)}});return()=>ue()},[]),xe.useEffect(()=>{if(!e)return;J(!0);let ue;e.email==="admin@ucol.mx"?ue=Dt.collection("orders").orderBy("timestamp","desc"):ue=Dt.collection("orders").where("userId","==",e.email);const ge=ue.onSnapshot(we=>{const de=[];we.forEach(Kt=>{de.push(Kt.data())}),de.sort((Kt,Wn)=>{const Zn=Kt.timestamp||0;return(Wn.timestamp||0)-Zn}),ne(de),J(!1)},we=>{console.error("Error cargando pedidos:",we),J(!1)});return()=>ge()},[e]);const cs=async ue=>{if(ue.preventDefault(),ht(""),nt(!0),Ui==="admin@ucol.mx"&&bt==="admin"){const ge=localStorage.getItem("adminAvatar");t({...n,avatar:ge||void 0}),localStorage.setItem("activeSessionEmail","admin@ucol.mx"),nt(!1);return}if(!Ui.endsWith("@ucol.mx")){ht("El correo debe terminar en @ucol.mx"),nt(!1);return}try{const we=await Dt.collection("users").doc(Ui).get();if(we.exists){const de=we.data();de&&de.password===bt?(t(de),localStorage.setItem("activeSessionEmail",Ui)):ht("Contrasea incorrecta.")}else ht("No existe cuenta con este correo.")}catch(ge){console.error(ge),ht("Error de conexin. Intenta de nuevo.")}finally{nt(!1)}},Ra=async ue=>{if(ue.preventDefault(),ht(""),nt(!0),!Li.endsWith("@ucol.mx")){ht("El correo debe ser institucional (@ucol.mx)"),nt(!1);return}if(!fi||!Oi||!wr||!_o||!us){ht("Por favor completa todos los campos"),nt(!1);return}try{if((await Dt.collection("users").doc(Li).get()).exists){ht("Este usuario ya est registrado."),nt(!1);return}const de={name:fi,email:Li,school:wr,grade:_o,group:us,balance:50,loyaltyPoints:0,password:Oi};await Dt.collection("users").doc(Li).set(de),alert("Registro exitoso! Por favor inicia sesin."),s("LOGIN"),xr(Li),Ca(""),sn(""),br(""),Fi(""),vo(""),Eo("")}catch(ge){console.error("Error al registrar:",ge),ht("Error guardando datos en la nube.")}finally{nt(!1)}},jn=()=>{localStorage.removeItem("activeSessionEmail"),t(null),N([]),ne([]),f("HOME"),Mt(""),br(""),xr("")},Ir=ue=>{Vi(ue||{name:"",description:"",price:0,category:Zt.LUNCH,image:"",calories:0,prepTime:5,isPopular:!1}),Mi(!0)},Pt=async()=>{if(!(!Pi.name||!Pi.price)){Ne(!0);try{const ue={...Pi};if(ue.id)await Dt.collection("menu_items").doc(ue.id).update(ue);else{const ge=Dt.collection("menu_items").doc();await ge.set({...ue,id:ge.id})}Mi(!1),Vi({})}catch(ue){console.error("Error saving item:",ue),alert("Error guardando el platillo.")}finally{Ne(!1)}}},hi=async ue=>{if(window.confirm("Seguro que deseas eliminar este platillo?"))try{await Dt.collection("menu_items").doc(ue).delete()}catch(ge){console.error("Error deleting item:",ge)}},mi=async(ue,ge)=>{Ne(!0);try{await Dt.collection("orders").doc(ue).update({status:ge})}catch(we){console.error(we),alert("Error actualizando")}finally{Ne(!1)}},Qn=async()=>{var ue;if(q.trim()){Ne(!0),ve(null);try{const we=await Dt.collection("recharge_requests").where("code","==",q.trim()).get();if(we.empty){ve({type:"error",msg:"Invlido."}),Ne(!1);return}const de=we.docs[0],Kt=de.data();if(Kt.status==="COMPLETED"){ve({type:"error",msg:"Ya usado."}),Ne(!1);return}const Wn=Dt.collection("users").doc(Kt.userId),Zn=await Wn.get();Zn.exists&&(await Wn.update({balance:(((ue=Zn.data())==null?void 0:ue.balance)||0)+Kt.amount}),await Dt.collection("recharge_requests").doc(de.id).update({status:"COMPLETED",processedAt:Date.now()}),ve({type:"success",msg:"Recarga exitosa."}),oe(""))}catch(ge){console.error(ge)}finally{Ne(!1)}}},Na=xe.useMemo(()=>Q.filter(ue=>{const ge=m===Zt.ALL||ue.category===m,we=ue.name.toLowerCase().includes(E.toLowerCase())||ue.description.toLowerCase().includes(E.toLowerCase());return ge&&we}),[m,E,Q]),So=ue=>{N(ge=>ge.find(de=>de.id===ue.id)?ge.map(de=>de.id===ue.id?{...de,quantity:de.quantity+1}:de):[...ge,{...ue,quantity:1}]),setTimeout(()=>V(!0),10)},pi=(ue,ge)=>{N(we=>we.map(de=>de.id===ue?{...de,quantity:Math.max(0,de.quantity+ge)}:de).filter(de=>de.quantity>0))},Cr=async(ue,ge=0,we=0,de)=>{if(!e)return;const Kt=w.reduce(($t,En)=>$t+En.price*En.quantity,0),Wn=Math.max(0,Kt-we);let Zn=e.balance;if(de==="COINS"){if(Wn>e.balance){alert("Oh no! Te faltan Ucol Coins para pagar este pedido. Recarga saldo o paga en efectivo.");return}Zn=e.balance-Wn}const ds=e.loyaltyPoints||0;if(ge>0&&ds<ge){alert("No tienes suficientes puntos para canjear esta recompensa.");return}const ei=Math.floor(Wn),Dr=ds-ge+ei,gi=Math.random().toString(36).substring(2,8).toUpperCase(),Ln={id:Math.random().toString(36).substr(2,9),items:[...w],total:Wn,subtotal:Kt,discount:we,pointsEarned:ei,pointsRedeemed:ge,status:Qi.PENDING,date:new Date().toLocaleDateString(),pickupTime:ue,userId:e.email,pickupCode:gi,paymentMethod:de};try{const $t=await Dt.collection("orders").add({...Ln,date:new Date().toLocaleDateString(),timestamp:Date.now()});await $t.update({id:$t.id}),e.email==="admin@ucol.mx"?t({...e,balance:Zn,loyaltyPoints:Dr}):await Dt.collection("users").doc(e.email).update({balance:Zn,loyaltyPoints:Dr}),N([]),V(!1),f("ORDERS");let En=`Pedido confirmado! Pasa a recogerlo: ${ue}.`;de==="CASH"&&(En+=" Recuerda pagar en efectivo."),alert(En)}catch($t){console.error("Error pedido:",$t),alert("Error de conexin.")}},vu=async()=>{if(!(!e||e.email==="admin@ucol.mx")&&window.confirm("Borrar historial?"))try{const ge=await Dt.collection("orders").where("userId","==",e.email).where("status","==",Qi.COMPLETED).get(),we=Dt.batch();ge.forEach(de=>we.delete(de.ref)),await we.commit(),alert("Historial limpiado.")}catch(ue){console.error(ue)}},Rr=()=>{B("SELECT_AMOUNT"),Ve(0),Te(""),O(!0)},Ao=xe.useCallback(async ue=>{Ve(ue);const ge=`UCOL-${ue}-${Math.floor(1e3+Math.random()*9e3)}`;if(te(ge),B("SHOW_CODE"),e&&e.email!=="admin@ucol.mx")try{await Dt.collection("recharge_requests").add({code:ge,amount:ue,userId:e.email,userName:e.name,status:"PENDING",createdAt:new Date().toISOString()})}catch{}},[e]),xo=xe.useCallback(async()=>{O(!1),alert("Solicitud enviada! Espera a que el administrador valide tu pago.")},[]);if(a)return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:S.jsx(Ml,{className:"w-10 h-10 text-green-600 animate-spin"})});if(!e)return S.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4 font-sans transition-colors w-full",children:S.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md rounded-3xl shadow-xl overflow-hidden border border-gray-100 dark:border-gray-700 animate-scale-in",children:[S.jsxs("div",{className:"bg-gradient-to-r from-green-700 to-emerald-600 p-8 text-center text-white relative",children:[S.jsx("button",{onClick:To,className:"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/30 rounded-full backdrop-blur-sm transition-colors text-white",children:R==="dark"?S.jsx(YT,{size:18}):S.jsx(KT,{size:18})}),S.jsx("div",{className:"w-32 h-32 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg p-2 overflow-hidden animate-float",children:S.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7d/Logo_de_la_Universidad_de_Colima.svg/640px-Logo_de_la_Universidad_de_Colima.svg.png",alt:"UCol Logo",className:"w-full h-full object-contain"})}),S.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Aperativo"}),S.jsx("p",{className:"text-white/80 text-sm",children:"Cafetera Universidad de Colima"})]}),S.jsxs("div",{className:"flex border-b border-gray-100 dark:border-gray-700",children:[S.jsx("button",{onClick:()=>s("LOGIN"),className:`flex-1 py-4 text-sm font-bold transition-colors ${i==="LOGIN"?"text-green-700 dark:text-green-400 border-b-2 border-green-700 dark:border-green-400":"text-gray-400 dark:text-gray-500"}`,children:"Iniciar Sesin"}),S.jsx("button",{onClick:()=>s("REGISTER"),className:`flex-1 py-4 text-sm font-bold transition-colors ${i==="REGISTER"?"text-green-700 dark:text-green-400 border-b-2 border-green-700 dark:border-green-400":"text-gray-400 dark:text-gray-500"}`,children:"Crear Cuenta"})]}),S.jsxs("div",{className:"p-8 bg-white dark:bg-gray-800 transition-colors",children:[Un&&S.jsxs("div",{className:"mb-4 bg-red-50 dark:bg-red-900/30 text-red-500 dark:text-red-300 text-xs p-3 rounded-lg flex items-center gap-2 animate-bounce-in",children:[S.jsx(Ol,{size:14}),Un]}),i==="LOGIN"?S.jsxs("form",{onSubmit:cs,className:"space-y-4 animate-fade-in",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Correo Institucional"}),S.jsx("input",{type:"email",placeholder:"estudiante@ucol.mx",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-3 text-sm text-gray-900 dark:text-white focus:outline-none focus:border-green-500 dark:focus:border-green-400 transition-colors",value:Ui,onChange:ue=>xr(ue.target.value),required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Contrasea"}),S.jsx("input",{type:"password",placeholder:"",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-3 text-sm text-gray-900 dark:text-white focus:outline-none focus:border-green-500 dark:focus:border-green-400 transition-colors",value:bt,onChange:ue=>Mt(ue.target.value),required:!0})]}),S.jsxs("button",{type:"submit",disabled:dn,className:"w-full bg-green-700 hover:bg-green-800 text-white font-bold py-3.5 rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition mt-4 flex justify-center items-center gap-2 disabled:opacity-70 active:scale-95",children:[dn&&S.jsx(Ml,{className:"w-4 h-4 animate-spin"})," Entrar"]})]}):S.jsxs("form",{onSubmit:Ra,className:"space-y-4 animate-fade-in",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Completo"}),S.jsxs("div",{className:"relative",children:[S.jsx(JT,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),S.jsx("input",{type:"text",placeholder:"Juan Prez",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl pl-12 pr-4 py-3 text-sm text-gray-900 dark:text-white focus:outline-none focus:border-green-500 dark:focus:border-green-400 transition-colors",value:fi,onChange:ue=>Ca(ue.target.value),required:!0})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Correo Institucional"}),S.jsxs("div",{className:"relative",children:[S.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold",children:"@"}),S.jsx("input",{type:"email",placeholder:"juan@ucol.mx",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl pl-12 pr-4 py-3 text-sm text-gray-900 dark:text-white focus:outline-none focus:border-green-500 dark:focus:border-green-400 transition-colors",value:Li,onChange:ue=>sn(ue.target.value),required:!0})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Contrasea"}),S.jsxs("div",{className:"relative",children:[S.jsx(Hf,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),S.jsx("input",{type:"password",placeholder:"",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl pl-12 pr-4 py-3 text-sm text-gray-900 dark:text-white focus:outline-none focus:border-green-500 dark:focus:border-green-400 transition-colors",value:Oi,onChange:ue=>br(ue.target.value),required:!0})]})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Bachillerato"}),S.jsxs("div",{className:"relative",children:[S.jsx(hD,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),S.jsx("input",{type:"text",placeholder:"Bach 1",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl pl-9 pr-3 py-3 text-sm text-gray-900 dark:text-white focus:outline-none focus:border-green-500 dark:focus:border-green-400 transition-colors",value:wr,onChange:ue=>Fi(ue.target.value),required:!0})]})]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsxs("div",{className:"w-1/2",children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Grado"}),S.jsxs("div",{className:"relative",children:[S.jsx(ON,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),S.jsx("input",{type:"text",placeholder:"4",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl pl-9 pr-3 py-3 text-sm text-gray-900 dark:text-white focus:outline-none focus:border-green-500 dark:focus:border-green-400 transition-colors",value:_o,onChange:ue=>vo(ue.target.value),required:!0})]})]}),S.jsxs("div",{className:"w-1/2",children:[S.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Grupo"}),S.jsxs("div",{className:"relative",children:[S.jsx(wD,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),S.jsx("input",{type:"text",placeholder:"A",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl pl-9 pr-3 py-3 text-sm text-gray-900 dark:text-white focus:outline-none focus:border-green-500 dark:focus:border-green-400 transition-colors",value:us,onChange:ue=>Eo(ue.target.value),required:!0})]})]})]})]}),S.jsxs("button",{type:"submit",disabled:dn,className:"w-full bg-green-700 hover:bg-green-800 text-white font-bold py-3.5 rounded-xl shadow-lg transition mt-4 flex justify-center items-center gap-2 active:scale-95",children:[dn&&S.jsx(Ml,{className:"w-4 h-4 animate-spin"})," Registrarse"]})]})]})]})});const Nr=()=>S.jsxs("div",{className:"pb-24 md:pb-8 space-y-6 animate-fade-in",children:[S.jsx("div",{className:"sticky top-0 z-20 bg-[#f3f4f6] dark:bg-gray-950 py-2 -mx-4 px-4 md:mx-0 md:px-0 transition-colors",children:S.jsxs("div",{className:"relative group",children:[S.jsx("input",{type:"text",value:E,onChange:ue=>T(ue.target.value),placeholder:"Buscar comida (ej. Mollete, Jugo)...",className:"w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl py-4 pl-12 pr-4 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500/20 text-gray-800 dark:text-white transition-all group-hover:shadow-md",autoFocus:d==="MENU"}),S.jsx($T,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 group-hover:text-green-500 transition-colors"})]})}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-bold text-gray-800 dark:text-white text-lg mb-3",children:"Categoras"}),S.jsx("div",{className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 -mx-4 px-4 md:mx-0 md:px-0",children:RA.map(ue=>S.jsx("button",{onClick:()=>_(ue),className:`flex-shrink-0 px-5 py-2.5 rounded-full text-sm font-bold transition-all shadow-sm border ${m===ue?"bg-green-600 text-white border-green-600 shadow-green-200 dark:shadow-none scale-105":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:ue},ue))})]}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:[Na.map(ue=>S.jsx(jT,{item:ue,onAdd:So},ue.id)),Na.length===0&&S.jsxs("div",{className:"col-span-full py-20 text-center text-gray-400",children:[S.jsx("p",{children:"No se encontraron resultados."}),S.jsx("button",{onClick:()=>{_(Zt.ALL),T("")},className:"text-green-500 font-bold mt-2",children:"Limpiar filtros"})]})]})]}),qi=()=>{const ue=$,ge=ue.filter(de=>de.status!==Qi.COMPLETED),we=ue.filter(de=>de.status===Qi.COMPLETED);return S.jsxs("div",{className:"space-y-6 animate-fade-in",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Mis Pedidos"}),ge.length>0&&S.jsxs("div",{className:"space-y-4",children:[S.jsx("h3",{className:"font-bold text-gray-500 dark:text-gray-400 uppercase text-xs tracking-wider",children:"En proceso"}),ge.map(de=>S.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border-l-4 border-green-500 flex justify-between items-center",children:[S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S.jsxs("span",{className:"font-bold text-lg text-gray-800 dark:text-white",children:["#",de.pickupCode||"---"]}),S.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-800 text-[10px] font-bold rounded-full",children:de.status})]}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[de.items.length," items  Total: ",de.total," UC"]})]}),S.jsx("div",{className:"text-right",children:S.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 font-bold text-sm",children:[S.jsx(Vy,{size:14})," ",de.pickupTime]})})]},de.id))]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h3",{className:"font-bold text-gray-500 dark:text-gray-400 uppercase text-xs tracking-wider",children:"Historial"}),we.length>0&&S.jsxs("button",{onClick:vu,className:"text-xs text-red-500 hover:text-red-600 flex items-center gap-1",children:[S.jsx(Ib,{size:12})," Limpiar"]})]}),we.length===0&&ge.length===0&&S.jsxs("div",{className:"text-center py-12 text-gray-400",children:[S.jsx(Pc,{className:"w-16 h-16 mx-auto mb-4 opacity-20"}),S.jsx("p",{children:"An no tienes pedidos."})]}),we.map(de=>S.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm opacity-75 grayscale hover:grayscale-0 transition-all",children:[S.jsxs("div",{className:"flex justify-between mb-2",children:[S.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:["#",de.pickupCode]}),S.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Entregado"})]}),S.jsx("p",{className:"text-xs text-gray-500",children:de.date})]},de.id))]})]})},Da=()=>e?S.jsxs("div",{className:"pb-24 animate-fade-in space-y-8 max-w-2xl mx-auto pt-8",children:[S.jsxs("div",{className:"flex flex-col items-center",children:[S.jsxs("div",{className:"relative group",children:[S.jsx("div",{className:`w-32 h-32 rounded-full border-4 border-white dark:border-[#1e2330] shadow-2xl flex items-center justify-center text-5xl font-bold text-gray-400 dark:text-white overflow-hidden ${e.avatar?"cursor-pointer":""}`,style:{backgroundColor:e.avatar?"transparent":"#e5e7eb"},onClick:()=>e.avatar&&ki(!0),children:e.avatar?S.jsx("img",{src:e.avatar,alt:"User Avatar",className:"w-full h-full object-cover"}):e.name.charAt(0)}),S.jsx("button",{onClick:ue=>{ue.stopPropagation(),Jn(!0)},className:"absolute bottom-0 right-0 bg-gray-100 dark:bg-[#2f364a] text-gray-600 dark:text-white p-2.5 rounded-full border-4 border-white dark:border-[#13161f] hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors z-10",children:S.jsx(Ab,{size:16})})]}),S.jsx("h2",{className:"mt-4 font-bold text-2xl text-gray-800 dark:text-white",children:e.name}),S.jsx("div",{className:"flex items-center gap-2 mt-1",children:S.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[e.school||"Administracin","  ",e.group||"Staff"]})}),S.jsx("div",{className:"mt-2 bg-gray-200 dark:bg-[#2f364a] px-3 py-1 rounded-full text-xs text-gray-600 dark:text-gray-400 font-mono",children:e.email})]}),S.jsxs("div",{className:"bg-[#0f1218] rounded-3xl p-8 relative overflow-hidden text-center border border-gray-800 shadow-2xl",children:[S.jsx("div",{className:"absolute top-0 right-0 p-32 bg-green-500/5 blur-[100px] rounded-full pointer-events-none"}),S.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[S.jsxs("div",{className:"flex items-start justify-between w-full mb-6 relative",children:[S.jsxs("div",{className:"text-left",children:[S.jsxs("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2 mb-1",children:[S.jsx(Dl,{size:14})," Saldo Disponible"]}),S.jsxs("h3",{className:"text-4xl md:text-5xl font-bold text-white tracking-tight",children:[e.balance," UC"]})]}),S.jsxs("div",{className:"bg-[#1e2330] rounded-xl p-3 border border-gray-700 min-w-[80px]",children:[S.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold text-center mb-1",children:"Puntos"}),S.jsx("p",{className:"text-xl font-bold text-orange-500 text-center",children:e.loyaltyPoints||0})]})]}),S.jsxs("button",{onClick:Rr,className:"w-full bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 text-white font-bold py-4 rounded-xl shadow-lg shadow-green-900/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[S.jsx(bb,{size:20})," Recargar Saldo"]})]})]}),S.jsxs("div",{className:"space-y-4",children:[e.email==="admin@ucol.mx"&&S.jsxs("button",{onClick:()=>f("ADMIN_PANEL"),className:"w-full bg-white dark:bg-[#0f1218] hover:bg-gray-50 dark:hover:bg-[#151922] p-4 rounded-xl border border-gray-200 dark:border-blue-900/30 flex items-center justify-between group transition-all shadow-sm",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/20 p-2.5 rounded-lg text-blue-600 dark:text-blue-400",children:S.jsx(Hf,{size:20})}),S.jsx("h4",{className:"font-bold text-gray-800 dark:text-white",children:"Panel de Administrador"})]}),S.jsx(gl,{className:"text-gray-400 dark:text-gray-600 group-hover:text-gray-600 dark:group-hover:text-white transition-colors",size:18})]}),S.jsxs("div",{className:"w-full bg-white dark:bg-[#1e2330] p-4 rounded-xl border border-gray-200 dark:border-gray-700 flex items-center justify-between shadow-sm",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:`${R==="dark"?"bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400":"bg-yellow-100 dark:bg-yellow-500/10 text-yellow-600 dark:text-yellow-500"} p-2.5 rounded-lg transition-colors`,children:R==="dark"?S.jsx(KT,{size:20}):S.jsx(YT,{size:20})}),S.jsx("h4",{className:"font-bold text-gray-800 dark:text-white",children:"Modo Oscuro"})]}),S.jsx("button",{onClick:To,className:`w-12 h-7 rounded-full p-1 transition-colors duration-300 focus:outline-none flex items-center ${R==="dark"?"bg-green-500":"bg-gray-300"}`,children:S.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${R==="dark"?"translate-x-5":"translate-x-0"}`})})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsxs("button",{className:"bg-white dark:bg-[#1e2330] hover:bg-gray-50 dark:hover:bg-[#252b3b] p-4 rounded-xl border border-gray-200 dark:border-gray-700 flex items-center justify-between group transition-all shadow-sm",children:[S.jsx("div",{children:S.jsx("h4",{className:"font-bold text-gray-800 dark:text-white text-sm",children:"Ayuda y Soporte"})}),S.jsx(gl,{className:"text-gray-400 dark:text-gray-600 group-hover:text-gray-600 dark:group-hover:text-white transition-colors",size:16})]}),S.jsxs("button",{className:"bg-white dark:bg-[#1e2330] hover:bg-gray-50 dark:hover:bg-[#252b3b] p-4 rounded-xl border border-gray-200 dark:border-gray-700 flex items-center justify-between group transition-all shadow-sm",children:[S.jsx("div",{children:S.jsx("h4",{className:"font-bold text-gray-800 dark:text-white text-sm",children:"Historial Recargas"})}),S.jsx(gl,{className:"text-gray-400 dark:text-gray-600 group-hover:text-gray-600 dark:group-hover:text-white transition-colors",size:16})]})]}),S.jsxs("button",{onClick:jn,className:"w-full bg-red-50 dark:bg-[#1a0f0f] hover:bg-red-100 dark:hover:bg-[#2a1212] p-4 rounded-xl border border-red-200 dark:border-red-900/20 flex items-center justify-center gap-2 text-red-600 dark:text-red-500 font-bold transition-colors mt-6 shadow-sm",children:[S.jsx(nD,{size:18})," Cerrar Sesin"]})]})]}):null,Xn=()=>{const ue=(e==null?void 0:e.loyaltyPoints)||0,ge=200,we=Math.min(100,ue/ge*100);return S.jsx("div",{className:"space-y-6 pb-24 md:pb-8",children:S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[S.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[S.jsxs("div",{className:"lg:hidden mt-2 relative animate-fade-in",children:[S.jsx("input",{type:"text",placeholder:"Qu se te antoja hoy?",className:"w-full bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-2xl py-3.5 pl-11 pr-4 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/20 shadow-sm",onClick:()=>{f("MENU")}}),S.jsx($T,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"})]}),S.jsxs("div",{className:"bg-gradient-to-r from-green-700 to-emerald-600 rounded-2xl md:rounded-3xl p-6 md:p-8 text-white shadow-lg relative overflow-hidden mt-2 md:mt-0 min-h-[160px] md:min-h-auto flex flex-col justify-center animate-scale-in",children:[S.jsx("div",{className:"hidden md:block absolute right-[-20px] bottom-[-40px] opacity-20 transform rotate-12",children:S.jsx(Pc,{size:180})}),S.jsxs("div",{className:"relative z-10 max-w-lg",children:[S.jsx("span",{className:"inline-block bg-white/20 backdrop-blur-md px-3 py-1 rounded-full text-[10px] font-bold mb-2 uppercase tracking-wide",children:"Evita filas!"}),S.jsxs("h2",{className:"text-2xl md:text-3xl font-bold mb-2 leading-tight",children:["Hola, ",e==null?void 0:e.name.split(" ")[0]," "]}),S.jsx("p",{className:"mb-6 opacity-90 text-sm md:text-base leading-relaxed max-w-[80%]",children:"Aparta tu desayuno ahora para el recreo de las 9:30."}),S.jsxs("button",{onClick:()=>f("MENU"),className:"inline-flex items-center gap-2 bg-white text-green-800 px-6 py-2.5 rounded-full text-sm font-bold hover:bg-gray-50 transition shadow-lg active:scale-95 transform",children:["Ver Men ",S.jsx(gl,{size:16})]})]})]}),(e==null?void 0:e.email)==="admin@ucol.mx"&&S.jsx("div",{className:"lg:hidden animate-slide-up",children:S.jsx("button",{onClick:()=>f("ADMIN_PANEL"),className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 p-1 rounded-2xl shadow-lg group relative overflow-hidden",children:S.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-xl flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"bg-white/20 p-2.5 rounded-xl shadow-inner",children:S.jsx(Hf,{className:"w-6 h-6 text-white"})}),S.jsxs("div",{className:"text-left text-white",children:[S.jsx("h3",{className:"font-bold text-base",children:"Panel Admin"}),S.jsx("p",{className:"text-blue-100 text-xs opacity-80",children:"Gestionar cafetera"})]})]}),S.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:S.jsx(gl,{className:"w-5 h-5 text-white"})})]})})}),S.jsxs("div",{className:"animate-slide-up stagger-1",children:[S.jsx("h3",{className:"font-bold text-gray-800 dark:text-white text-lg mb-3",children:"Categoras"}),S.jsx("div",{className:"flex gap-3 overflow-x-auto no-scrollbar pb-1 -mx-4 px-4 md:mx-0 md:px-0",children:RA.filter(de=>de!==Zt.ALL).map(de=>S.jsxs("button",{onClick:()=>{_(de),f("MENU")},className:"flex-shrink-0 flex items-center gap-2 pl-2 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-full shadow-sm active:scale-95 transition-all",children:[S.jsxs("div",{className:"w-8 h-8 rounded-full bg-green-50 dark:bg-green-900/30 flex items-center justify-center text-sm",children:[de===Zt.BREAKFAST&&"",de===Zt.LUNCH&&"",de===Zt.SNACKS&&"",de===Zt.DRINKS&&"",de===Zt.HEALTHY&&""]}),S.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:de})]},de))})]}),S.jsxs("div",{className:"animate-slide-up stagger-2",children:[S.jsxs("div",{className:"flex justify-between items-center mb-3",children:[S.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white text-lg flex items-center gap-2",children:[S.jsx(Tb,{size:18,className:"text-orange-500 fill-current"})," Ms pedidos"]}),S.jsx("button",{onClick:()=>f("MENU"),className:"text-green-600 dark:text-green-400 text-sm font-medium hover:underline",children:"Ver todo"})]}),S.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:Q.filter(de=>de.isPopular).slice(0,4).map(de=>S.jsx(jT,{item:de,onAdd:So},de.id))})]})]}),S.jsxs("div",{className:"hidden lg:block space-y-6 animate-slide-in-right",children:[S.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 border border-orange-100 dark:border-orange-900/30 shadow-md relative overflow-hidden group transition-colors",children:[S.jsx("div",{className:"absolute -top-4 -right-4 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:S.jsx(PN,{size:120,className:"text-orange-500"})}),S.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[S.jsxs("div",{children:[S.jsxs("h3",{className:"text-orange-600 dark:text-orange-400 font-bold flex items-center gap-2 text-lg",children:[S.jsx(Sb,{size:20})," Rewards"]}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Acumula puntos y come gratis."})]}),S.jsxs("div",{className:"text-right",children:[S.jsx("span",{className:"text-4xl font-bold text-gray-800 dark:text-white",children:ue}),S.jsx("span",{className:"text-xs text-gray-400 block uppercase tracking-wide",children:"Puntos"})]})]}),S.jsxs("div",{className:"relative z-10 space-y-2",children:[S.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1 font-medium",children:[S.jsx("span",{children:"Nivel Comensal"}),S.jsxs("span",{children:[ue,"/",ge]})]}),S.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-4 overflow-hidden",children:S.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-orange-600 h-4 rounded-full shadow-sm transition-all duration-1000 ease-out",style:{width:`${we}%`}})}),S.jsx("p",{className:"text-xs text-center text-gray-400 pt-2",children:ue>=ge?"Felicidades! Tienes una recompensa disponible.":`Solo ${ge-ue} puntos ms para tu premio.`})]})]}),(e==null?void 0:e.email)==="admin@ucol.mx"&&S.jsxs("button",{onClick:()=>f("ADMIN_PANEL"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-6 rounded-3xl shadow-lg flex items-center justify-between group transition-all",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"bg-white/20 p-3 rounded-xl",children:S.jsx(Hf,{className:"w-8 h-8 text-white"})}),S.jsxs("div",{className:"text-left",children:[S.jsx("h3",{className:"font-bold text-lg",children:"Panel Admin"}),S.jsx("p",{className:"text-blue-100 text-xs",children:"Gestionar cafetera"})]})]}),S.jsx(gl,{className:"w-6 h-6 text-white/70 group-hover:translate-x-1 transition-transform"})]}),S.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 border border-gray-100 dark:border-gray-700 shadow-sm",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-700 rounded-full flex items-center justify-center text-white font-bold text-xl overflow-hidden",children:e!=null&&e.avatar?S.jsx("img",{src:e.avatar,className:"w-full h-full object-cover"}):e==null?void 0:e.name.charAt(0)}),S.jsxs("div",{children:[S.jsx("h4",{className:"font-bold text-gray-800 dark:text-white",children:e==null?void 0:e.name}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e==null?void 0:e.email})]})]}),S.jsx("button",{onClick:()=>f("PROFILE"),className:"w-full py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Ver Perfil Completo"})]})]})]})})};return S.jsxs("div",{className:"min-h-screen w-full bg-[#f3f4f6] dark:bg-gray-950 transition-colors duration-300 flex flex-col font-sans",children:[e&&S.jsx("header",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-800 sticky top-0 z-30 transition-colors supports-[backdrop-filter]:bg-white/60 animate-fade-in",children:S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 h-16 md:h-20 flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>f("HOME"),children:[S.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-xl bg-white flex items-center justify-center p-1 shadow-sm border border-gray-100 group-hover:scale-105 transition-transform",children:S.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7d/Logo_de_la_Universidad_de_Colima.svg/640px-Logo_de_la_Universidad_de_Colima.svg.png",alt:"UCol Logo",className:"w-full h-full object-contain"})}),S.jsxs("div",{className:"hidden sm:flex flex-col",children:[S.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-800 dark:text-white leading-tight tracking-tight",children:"Aperativo"}),S.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 gap-1",children:[S.jsx(rD,{className:"w-3 h-3"}),S.jsx("span",{children:e.school})]})]})]}),S.jsx("nav",{className:"hidden md:flex items-center gap-1 bg-gray-100/50 dark:bg-gray-800/50 p-1.5 rounded-full border border-gray-200 dark:border-gray-700",children:[{id:"HOME",icon:HT,label:"Inicio"},{id:"MENU",icon:Og,label:"Men"},{id:"ORDERS",icon:BT,label:"Pedidos"}].map(ue=>S.jsxs("button",{onClick:()=>f(ue.id),className:`flex items-center gap-2 px-5 py-2 rounded-full text-sm font-bold transition-all ${d===ue.id?"bg-white dark:bg-gray-700 text-green-700 dark:text-green-400 shadow-sm scale-105":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/50"}`,children:[S.jsx(ue.icon,{size:16,strokeWidth:2.5})," ",ue.label]},ue.id))}),S.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[S.jsxs("div",{onClick:()=>f("PROFILE"),className:"flex bg-green-50 dark:bg-green-900/20 px-3 py-1.5 md:px-4 md:py-2 rounded-xl items-center gap-2 border border-green-100 dark:border-green-800/50 cursor-pointer hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[S.jsx(Dl,{size:16,className:"text-green-600 dark:text-green-400 sm:w-[18px] sm:h-[18px]"}),S.jsx("span",{className:"text-sm md:text-base font-bold text-green-800 dark:text-green-300",children:e.balance.toFixed(0)})]}),S.jsxs("button",{onClick:()=>V(!0),className:"relative p-2.5 md:p-3 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-xl transition-all group active:scale-95",children:[S.jsx(Pc,{className:"w-5 h-5 md:w-6 md:h-6 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors"}),w.length>0&&S.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full border-2 border-white dark:border-gray-900 text-[10px] flex items-center justify-center text-white font-bold animate-pulse",children:w.length})]}),S.jsx("button",{onClick:()=>f("PROFILE"),className:"hidden md:flex w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-green-500 to-emerald-700 rounded-xl items-center justify-center text-white font-bold shadow-md hover:scale-105 transition-transform overflow-hidden",children:e.avatar?S.jsx("img",{src:e.avatar,className:"w-full h-full object-cover"}):e.name.charAt(0)})]})]})}),S.jsxs("main",{className:`flex-1 w-full max-w-7xl mx-auto p-4 md:p-6 lg:p-8 ${d==="ADMIN_PANEL"?"":"pb-24 md:pb-8"}`,children:[d==="HOME"&&S.jsx(Xn,{}),d==="MENU"&&S.jsx(Nr,{}),d==="ORDERS"&&S.jsx(qi,{}),d==="PROFILE"&&S.jsx(Da,{}),d==="ADMIN_PANEL"&&S.jsx(iL,{orders:$,menuItems:Q,adminTab:Ke,setAdminTab:Lt,adminRechargeCode:q,setAdminRechargeCode:oe,adminFeedback:pe,isAdminProcessing:De,isEditingItem:vt,setIsEditingItem:Mi,editingItem:Pi,setEditingItem:Vi,setActiveScreen:f,handleAdminRecharge:Qn,handleUpdateOrderStatus:mi,openEditItemModal:Ir,handleSaveItem:Pt,handleDeleteItem:hi,handleLogout:jn})]}),e&&S.jsxs("nav",{className:"md:hidden bg-white/90 dark:bg-gray-900/90 backdrop-blur-lg border-t border-gray-100 dark:border-gray-800 px-6 py-3 flex justify-between items-center fixed bottom-0 w-full z-30 transition-colors pb-safe safe-area-bottom shadow-[0_-4px_20px_rgba(0,0,0,0.05)] animate-slide-up",children:[S.jsxs("button",{onClick:()=>f("HOME"),className:`flex flex-col items-center gap-1 transition ${d==="HOME"?"text-green-700 dark:text-green-400 scale-105":"text-gray-400 dark:text-gray-500"}`,children:[S.jsx(HT,{className:"w-6 h-6",strokeWidth:d==="HOME"?2.5:2}),S.jsx("span",{className:"text-[10px] font-medium",children:"Inicio"})]}),S.jsxs("button",{onClick:()=>f("MENU"),className:`flex flex-col items-center gap-1 transition ${d==="MENU"?"text-green-700 dark:text-green-400 scale-105":"text-gray-400 dark:text-gray-500"}`,children:[S.jsx(Og,{className:"w-6 h-6",strokeWidth:d==="MENU"?2.5:2}),S.jsx("span",{className:"text-[10px] font-medium",children:"Men"})]}),S.jsxs("button",{onClick:()=>f("ORDERS"),className:`flex flex-col items-center gap-1 transition ${d==="ORDERS"?"text-green-700 dark:text-green-400 scale-105":"text-gray-400 dark:text-gray-500"}`,children:[S.jsx(BT,{className:"w-6 h-6",strokeWidth:d==="ORDERS"?2.5:2}),S.jsx("span",{className:"text-[10px] font-medium",children:"Pedidos"})]}),S.jsxs("button",{onClick:()=>f("PROFILE"),className:`flex flex-col items-center gap-1 transition ${d==="PROFILE"?"text-green-700 dark:text-green-400 scale-105":"text-gray-400 dark:text-gray-500"}`,children:[S.jsx(JT,{className:"w-6 h-6",strokeWidth:d==="PROFILE"?2.5:2}),S.jsx("span",{className:"text-[10px] font-medium",children:"Perfil"})]})]}),S.jsx(CD,{isOpen:k,onClose:()=>V(!1),items:w,loyaltyPoints:(e==null?void 0:e.loyaltyPoints)||0,onUpdateQuantity:pi,onCheckout:Cr}),S.jsx(nL,{menuItems:Q}),S.jsx(rL,{showRechargeModal:M,setShowRechargeModal:O,rechargeStep:L,setRechargeStep:B,selectedRechargeAmount:P,handleSelectAmount:Ao,customRechargeInput:me,setCustomRechargeInput:Te,handleFinishRecharge:xo,rechargeCode:ft}),S.jsx(Dq,{isAvatarModalOpen:ls,setIsAvatarModalOpen:Jn,user:e,setUser:t}),yo&&(e==null?void 0:e.avatar)&&S.jsxs("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4",onClick:()=>ki(!1),children:[S.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm"}),S.jsxs("div",{className:"relative z-10 max-w-full max-h-full p-4 animate-scale-in flex flex-col items-center",children:[S.jsx("img",{src:e.avatar,alt:"Full Avatar",className:"max-w-full max-h-[80vh] rounded-2xl shadow-2xl object-contain border-4 border-white dark:border-gray-800"}),S.jsxs("button",{onClick:()=>ki(!1),className:"mt-6 bg-white/10 hover:bg-white/20 text-white px-6 py-2 rounded-full backdrop-blur-md transition-colors flex items-center gap-2 font-medium",children:[S.jsx(Ol,{size:20})," Cerrar"]})]})]})]})},LR=document.getElementById("root");if(!LR)throw new Error("Could not find root element to mount to");const Pq=bN.createRoot(LR);Pq.render(S.jsx(yN.StrictMode,{children:S.jsx(Mq,{})}));
